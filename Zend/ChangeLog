2004-07-12  Ilia Alshanetsky  <ilia@prohost.org>

    * (php_5_0_0RC4)
      zend_execute.c:
      Fixed bug #29086 & #28064 (PHP crashes on extremly long scripts).

2004-07-12  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0RC4)
      zend.c:
      - Convert zend_class_entry -> zend_class_entry *

2004-07-10  Jon Parise  <jon+php@csh.rit.edu>

    * zend.c:
      DragonFly BSD is derived from FreeBSD and requires the same floating point
      precision fix.

2004-07-10  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c
      zend_hash.c
      zend_variables.c:
      - Better stability during premature shutdown of request startup

2004-07-05  Andi Gutmans  <andi@zend.com>

    * zend_mm.h:
      - Disable zend_mm for 5.0.0

2004-07-03  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c:
      - Should fix mem leak with ZEND_MM. I made this change a while ago and
      - rolled it back but I don't remember why. Please test!

2004-07-01  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_constants.c:
      Do not use alloca() where it can be easily abused by the users.
      

2004-06-25  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_stream.c
      zend_stream.h:
      export zend stream functions for zend extensions under windows

2004-06-24  Sara Golemon  <php@alphaweb.net>

    * zend_execute.c:
      Ease off on severity of new error (Using Resources as array offsets)

2004-06-23  Sara Golemon  <php@alphaweb.net>

    * zend_execute.c:
      BugFix #28879  Inconsistent behavior between explicit and implicit array
      creation.
      
      Changes:
      
      Throw E_WARNING "Illegal offset type" when explicitly creating
      array elements with objects, arrays, or resorces as indexes.
      This matches implicit creation w/ obj/arr indices.
      
      Throw E_WARNING "Resource ID#%ld used as offset, casting to integer (%ld)"
      when implicitly creating array with resource as index. (BC)

2004-06-19  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_reflection_api.c:
      Reflection_* -> Reflection*. Patch by Timm Friebe.

2004-06-18  Sara Golemon  <php@alphaweb.net>

    * zend_execute.c:
      Another typo in converting array index doubles to long.

2004-06-18  George Schlossnagle  <george@omniti.com>

    * zend_builtin_functions.c:
      fix for 28213.
      
      class_name and call_type should be reinitialized on every loop iter.

2004-06-17  Sara Golemon  <php@alphaweb.net>

    * zend_builtin_functions.c:
      String length in parse_parameters should be int

2004-06-15  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      

2004-06-14  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_language_scanner.l:
      Need {} here

2004-06-10  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_language_scanner.l:
      - Require a single white-space char after /** to start a doc comment that
        way we prevent /*** from becoming a doc comment (as requested Derick).

    * zend_API.h:
      Add missing declaration

    * zend_reflection_api.c:
      Small code layout change

    * zend_language_scanner.l:
      Do not require NEWLINE at start of doccomment

    * zend_reflection_api.c:
      Bugfix #28699: Reflection api bugs

2004-06-09  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Fix Bug #28694 ReflectionExtension::getFunctions() crashes PHP

2004-06-07  Andi Gutmans  <andi@zend.com>

    * zend.h:
      - Go back to -dev (Shouldn't need another RC)

    * (php_5_0_0RC3)
      zend.h:
      - Roll RC3

2004-06-06  Stefan Esser  <sesser@suspekt.org>

    * zend_compile.h
      zend_opcode.c:
      Fixed Zend Function Destructor to use correct TSRM handle.

2004-06-05  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Fix #28641: Instance of Interface

2004-06-03  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0RC3RC2)
      zend.h:
      - Prepare for RC3RC2

2004-06-02  Andi Gutmans  <andi@zend.com>

    * zend_mm.h:
      - Don't use ZEND_MM in Windows

2004-06-02  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      fix incdec - make value's refcount non-zero when passing to
      write_property - otherwise __set caller cleanup could kill it.

2004-06-01  Andi Gutmans  <andi@zend.com>

    * zend.c:
      - If user error handler returns "false" then we relay to the built in error
        handler

2004-05-31  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Refcount must not be set separatley again.

    * zend_reflection_api.c
      zend_reflection_api.c:
      Add missing initialization

    * zend_compile.c:
      

2004-05-28  Andrei Zmievski  <andreiz@gmail.com>

    * zend.c:
      Allow user-defined error handlers to indicate whether default error
      handler should be re-invoked, by returning true or false.

2004-05-28  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Prevent possible problems with illegal properties

2004-05-28  Derick Rethans  <php@derickrethans.nl>

    * zend_builtin_functions.c:
      - Make the default mask for user defined error handlers include ALL errors,
        including E_STRICT.

2004-05-27  Andi Gutmans  <andi@zend.com>

    * zend.h:
      - Back to RC3-dev until we roll final

    * (php_5_0_0RC3RC1)
      zend_execute.c:
      - Fix problem with exceptions returning from include(). (Dmitry)

    * (php_5_0_0RC3RC1)
      zend.h:
      - RC3RC1

2004-05-26  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_object_handlers.c:
      Fix leak on systems where alloca isn't really alloca.

2004-05-26  Andrei Zmievski  <andreiz@gmail.com>

    * zend_constants.c:
      Avoid unnecessary and silly copying of constant name when registering.

2004-05-26  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c:
      - Fix memory manager problem

2004-05-26  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      Update Reflection API class names. Whitespace fixes.

2004-05-25  Andi Gutmans  <andi@zend.com>

    * zend_objects_API.h:
      - Nuke unused decleration

    * zend_alloc.c
      zend_alloc.h:
      - More fixes

    * zend_alloc.c
      zend_alloc.h:
      - Make fix compile.

    * zend_alloc.c
      zend_alloc.h:
      - Fix memory leak in mem cache in conjunction with Zend MM. How come no one
      - noticed this? :)

2004-05-23  Andi Gutmans  <andi@zend.com>

    * zend_objects_API.c:
      - Fix problem with object being destroyed more than once

    * zend_builtin_functions.c:
      - Fix the following script (it crashed):
      <?php
         class ErrorHandler {
           function __construct() {
             set_error_handler(array(&$this, 'handle'));
           }
      
           function __destruct() {
             restore_error_handler();
           }
      
           function handle($code, $msg, $file, $line, $locals) {
           }
         }
      
         new ErrorHandler();
      ?>

2004-05-20  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_exceptions.c
      zend_exceptions.h:
      Revert; obviously I missed the function at the bottom of the file...

    * zend_exceptions.c
      zend_exceptions.h:
      Export this, so extensions may throw their own exception objects that
      they have already instantiated.

2004-05-18  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      - Need to operate on module pointer in hash table

2004-05-18  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_execute_API.c:
      Fix bug #28438: win32 build fails in non-zts mode

2004-05-18  Stanislav Malyshev  <stas@zend.com>

    * zend_API.c:
      Z_TYPE_P is for zvals

2004-05-18  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_API.c:
      Register according to the type specified by the module.
      (Helps to fix dl() bug)

2004-05-18  Sara Golemon  <php@alphaweb.net>

    * zend_execute.c:
      Bugfix#28404 When type is double we need to access dval, not lval

2004-05-17  Andrei Zmievski  <andreiz@gmail.com>

    * zend_ini_parser.y
      zend_ini_scanner.l:
      Revert the .ini vars patch. Will have to try again next Christmas
      apparently.

    * zend_ini_parser.y:
      Fix the apparent bug (; at the end of parse rule block).

2004-05-17  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_objects_API.c
      zend_objects_API.h:
      As discussed with Andi, add this helper API for setting the object pointer
      from
      within the constructor.
      
      Please read the comment for notes about how to use it; in general, you
      don't
      need it, so don't use it.

2004-05-14  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_ini_parser.y
      zend_ini_scanner.l:
      Adding ability to refer to existing .ini variables from within .ini
      files. Example:
      
      open_basedir = ${open_basedir} ":/new/dir"

2004-05-12  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      - Centralize register and hash operations for startup/register_module
        in new zend_register_module_ex().

    * zend_API.c:
      - Revert to 1.249

2004-05-11  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Don't allow passing NULL to type hinted parameter.

2004-05-10  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
      - Fix comparison of objects
      - Clarify convert_object_to_type()

2004-05-10  Stefan Esser  <sesser@suspekt.org>

    * zend_alloc.c:
      Checking MEMORY_LIMIT before doing emalloc/erealloc solves several ugly
      problems.

2004-05-04  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_iterators.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects_API.c:
      Add count_elements handler for overloaded objects.

2004-05-02  Andi Gutmans  <andi@zend.com>

    * zend_operators.c:
      - Fix comparison of two objects in non-compatibility mode.

2004-05-01  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Don't load modules twice

2004-04-29  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      Fix bug #27876

2004-04-28  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_exceptions.h:
      Fix c++ builds

2004-04-27  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_builtin_functions.c:
      - Optional parameter to class_exists() that can be used to bypass
        __autoload() which can be helpfull in __autoload() itself.

    * zend_interfaces.c:
      - Fix warnings

    * zend_interfaces.c
      zend_interfaces.h
      zend_iterators.h:
      - no unneccessary retval initialization
      - new c-level iterator handler invalidate_current that is optionally
        used to clear internal caching like in implementation of Iterator

2004-04-27  Andi Gutmans  <andi@zend.com>

    * zend_reflection_api.c:
      - Fix prototypes

2004-04-26  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Fix prototype

2004-04-25  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_builtin_functions.c:
      Skip correct amount of stack entries

    * zend_interfaces.c:
      Capture potential problem by error message

    * zend_reflection_api.c:
      Show number of classes

2004-04-25  Andi Gutmans  <andi@zend.com>

    * zend.h:
      - RC3-dev

    * (php_5_0_0RC2)
      zend.h:
      - RC2

2004-04-23  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Fixed bug #27923. foreach() without a key should not check if the key
      - is a reference (Adam)

2004-04-21  Andi Gutmans  <andi@zend.com>

    * zend.h:
      - RC2-dev

    * (php_5_0_0RC2RC2)
      zend.h:
      - Prepare for RC2RC2 (if everything is OK especially Zeev's interface
      - patch I'll roll RC2 tomorrow).

2004-04-21  Zeev Suraski  <zeev@zend.com>

    * (php_5_0_0RC2RC2)
      zend_compile.c:
      Restore fatal error in case a method that's supposed to implement an
      interface/abstract method, breaks its prototype

2004-04-20  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
      - Fix bug #27283 - Exceptions where the last catch() statement was
      sometimes
      - skipped.

2004-04-19  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      show ini entries and classes for extensions.

2004-04-17  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.c:
      Retval may not be set when zend_execute() is overloaded

2004-04-15  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Handle failure in get_current_data

2004-04-14  Andi Gutmans  <andi@zend.com>

    * zend_extensions.h:
      - Add comment

    * zend.h:
      - RC2-dev

    * (php_5_0_0RC2RC1)
      zend.h:
      - RC2RC1

2004-04-13  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_exceptions.c:
      Classnames shall start with an uppercase character

2004-04-13  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c:
      Fix debug_backtrace to show arguments again
      We need to merge code from debug_backtrace & debug_print_backtrace at
      some point!

2004-04-13  Andi Gutmans  <andi@zend.com>

    * zend_extensions.h:
      - Fix API no of Engine 2. The first number is the engine version and the
      - rest is the API_NO. This way engine2_api_no is always greater than
      - engine1_api_no.

    * zend.c
      zend_exceptions.c
      zend_exceptions.h:
      - Add hook for exception handler (Derick)

2004-04-12  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.h:
      Fix order of macro parameter (synch with other macros)

2004-04-12  Andi Gutmans  <andi@zend.com>

    * OBJECTS2_HOWTO
      zend_extensions.h
      zend_ini.c
      zend_ini.h
      zend_modules.h:
      - modifyable -> modifiable

2004-04-09  Andi Gutmans  <andi@zend.com>

    * zend_object_handlers.c:
      - Fix bug #26441 (When __set() returned a value it corrupted it)

2004-04-08  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Bugfix #27519 Reflection_Function constructor crashes with non-existant
      function's name

2004-04-07  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c:
      - Hopefully fix the debug_backtrace() code.

    * zend_builtin_functions.c:
      - Fix crash bug in zend_debug_backtrace(). No idea how come this survived
      - for so long....

2004-04-04  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_objects_API.c:
      Removed unused variable.

2004-04-03  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c:
      Patch by Timm Friebe:
      It changes
      set_exception_handler() to accept the pseudo-type "callable" (instead of
      a string referring to a global function).
      
      
      Examples:
        set_exception_handler('function_name');
        set_exception_handler(array('class_name', 'static_method'));
        set_exception_handler(array($instance, 'instance_method'));
      
      
      This also makes set_exception_handler() more consistent with all the
      other callback functionality, e.g. set_error_handler().

    * zend_operators.c:
      - Nuke more old junk

    * zend.h
      zend_operators.c
      zend_operators.h:
      - Nuke code which hasn't been in use for ages.

2004-04-01  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_builtin_functions.c:
      MFB: Revert patch for bug #27782.

    * zend_execute.c
      tests/bug27731.phpt:
      Fixed reversed condition for error reporting.

2004-03-31  Dmitry Stogov  <dmitry@zend.com>

    * zend_execute.c:
      Fixed BUG in zend_post_incdec_property

2004-03-31  Andi Gutmans  <andi@zend.com>

    * zend_reflection_api.c:
      - Fix typo

2004-03-30  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * tests/bug26695.phpt:
      Fix test

2004-03-30  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_builtin_functions.c:
      Fixed bug #27782 (Wrong behaviour of next(), prev() and each()).

2004-03-30  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      TSRM fix

    * zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_globals.h
      zend_reflection_api.c:
      - Fix Reflection class names
      - Add ability to get the extension an internal class was defined in

2004-03-29  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * acconfig.h:
      NAN==NAN doest work (Ard)

    * zend_builtin_functions.c:
      Allow mixed case search for extensions

2004-03-29  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_execute.c:
      -clonning+cloning

2004-03-29  Dmitry Stogov  <dmitry@zend.com>

    * zend_execute.c:
      Implicit clonning strict warning was added for ze1_compatibility_mode

2004-03-29  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute.c
      tests/bug27731.phpt:
      Fixed bug #27731 (error_reporting() inside @ block fails to set
      error_reporting level).

2004-03-28  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Use lowercasing here

    * zend.c:
      Initialize the complete struct

2004-03-28  Stanislav Malyshev  <stas@zend.com>

    * zend_language_parser.y:
      check writability on =& too

    * zend_execute.c:
      - call set handler if assigning to object having this handler
      - cleanup: use macros to access object internal vars

    * zend_interfaces.c:
      preserve ZEND_API in definition

    * zend_interfaces.h:
      declare as extern

2004-03-28  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Fix memleak found by Timm

2004-03-28  Stanislav Malyshev  <stas@zend.com>

    * zend_operators.c:
      centralize object-to-scalar conversion, make it work with get handler

    * zend.c:
      try get handler on printable conversion

    * zend_object_handlers.h:
      some more clear comments

    * zend_operators.c:
      Use macros for object parts access

2004-03-28  Dmitry Stogov  <dmitry@zend.com>

    * zend_execute_API.c:
      fix of fix related to __autoload. (ext/standard/tests/network/bug20134.phpt
      passes again)

2004-03-27  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.c:
      Even though it is uncommented it should be right

2004-03-26  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_compile.c:
      Force destructors to have empty signatures

2004-03-26  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
      - Fix build (thanks to Timm)

2004-03-25  Derick Rethans  <php@derickrethans.nl>

    * zend_language_scanner.l:
      - Remove old and deprecated <?php_track_vars?> scanner token.

2004-03-25  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - If __construct() is defined then it will always take precedence over
      - old style constructors.

2004-03-25  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      no need to use result for RECV's - as in PHP4

    * zend_execute.c:
      Use get/set handlers for increment.decrement ops on objects

2004-03-25  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c:
          /* The compiler is not-reentrant. Make sure we __autoload() only during
      run-time
           * (doesn't impact fuctionality of __autoload()
           */

2004-03-25  Dmitry Stogov  <dmitry@zend.com>

    * zend_execute_API.c:
      Using ALLOC_HASHTABLE/FREE_HASHTABLE instead of emalloc/free.

2004-03-24  Dmitry Stogov  <dmitry@zend.com>

    * zend.c
      zend_execute_API.c
      zend_globals.h:
      New autoload protection schema was implemented (Using HashTable instead of
      boolean flag)

2004-03-24  Derick Rethans  <php@derickrethans.nl>

    * zend_operators.c:
      - Revert bogus commit

    * zend_operators.c:
      - Fixed NEWS

2004-03-24  Dmitry Stogov  <dmitry@zend.com>

    * tests/bug27641.phpt:
      Fixed bug #27641 (Object cloning in ze1_compatibility_mode was
      reimplemented)

    * zend_execute.c
      zend_variables.c:
      Object cloning in ze1 compatibility mode (zend.ze1_compatibility_mode) was
      reimplemented (Dmitry, Andi)

2004-03-22  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Fix bug

    * zend_execute.c:
      - Remove whitespace

2004-03-21  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
      - Improve consistency

2004-03-21  Stanislav Malyshev  <stas@zend.com>

    * zend_objects_API.c
      zend_objects_API.h:
      return zval *, to make it useful for read_property

    * zend_objects_API.c:
      update to new API

    * zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h:
      API change for read_property:
      instead of bool silent it now gets fetch type
      This can be used for creating proxy objects for write contexts

2004-03-21  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
      - Nuke unused code

2004-03-18  Andi Gutmans  <andi@zend.com>

    * zend.h:
      - Back to RC2-dev

2004-03-18  Zeev Suraski  <zeev@zend.com>

    * (php_5_0_0RC1)
      zend.h:
      Prepare to roll RC1

    * (php_5_0_0RC1)
      zend_execute.c:
      Fix possible data corruption with __set()

2004-03-18  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      Improve error message - on E_STRICT, method is actually called,
      so the error shouldn't say it cannot be called.

2004-03-18  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0RC1)
      zend_compile.c:
      - Change redefinition of constructor from E_COMPILE_ERROR to E_STRICT.

    * (php_5_0_0RC1)
      ZEND_CHANGES:
      - Update Changes

2004-03-17  Sascha Schumann  <sascha@schumann.cx>

    * zend_multiply.h:
      Readd x86 implementation

2004-03-17  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0RC1RC2)
      zend_multiply.h:
      - Improved patch for support multiplication on 64bit machines

    * (php_5_0_0RC1RC2)
      zend_execute.c:
      - Fix tiny bug (one of the reasons we can't support __toString() for
      - regular objects).

    * (php_5_0_0RC1RC2)
      zend.c:
      - Stop make_printable_zval() from calling __toString()

    * zend_execute.c:
      - Fixed problem with __toString(). Due to the engine's architecture it is
      - currently not possible to call __toString() anywhere besides print &
      eval.
      - Follow up will be on internals@

2004-03-17  Stanislav Malyshev  <stas@zend.com>

    * (php_5_0_0RC1RC2)
      zend_compile.c:
      fix typo

2004-03-17  Andi Gutmans  <andi@zend.com>

    * zend_multiply.h
      zend_operators.c:
      - Apply Ard's patch to support multiplication & overflow on both 32bit
        and 64bit machines

2004-03-16  Derick Rethans  <php@derickrethans.nl>

    * zend.c
      zend.h
      zend_API.h
      zend_modules.h:
      - Replaced the exec_finished hook by the zend_post_deactive hook for
        extensions. The new hook will be run after the symbol table and
      destructors
        are run. (Derick)

    * zend_modules.h:
      - Bump API number so that it actually differs from PHP 4. This is needed
        because we don't want PHP 4 and PHP 5 extensions to be in the same
      directory
        when doing "make install" for shared, or phpize'd extensions.

2004-03-16  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute_API.c:
      Fix SEGV in certain conditions while calling static methods

2004-03-16  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h:
      Add ability to disable JIT for a particular auto global

2004-03-16  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute_API.c:
      TSRM fix

2004-03-16  Sascha Schumann  <sascha@schumann.cx>

    * zend.h:
      Enable ptr format check for GCC 3.1 and higher

2004-03-16  Ilia Alshanetsky  <ilia@prohost.org>

    * zend.h:
      Do not allow 3.0.4 for __attribute__.

    * zend.h:
      Fixed bug #27600 (GCC 3.0.4 does not like __attribute__ directive)

2004-03-16  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Fix problem when using old-style constructors it wasn't being inherited
        correctly.

2004-03-16  Derick Rethans  <php@derickrethans.nl>

    * zend_execute_API.c:
      - Spaces to tabs

2004-03-16  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c:
      - If the called method is static then don't define $this

    * zend_execute.c
      zend_execute_API.c:
      - Error out if get_method() isn't defined.
      - Use calling scope of internal function callee when calling a method
        using static syntax (array("A", "func"));

2004-03-16  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c
      zend_execute.h
      zend_execute_API.c:
      Improve error message

2004-03-15  Andi Gutmans  <andi@zend.com>

    * zend_operators.c:
      - Restore E_NOTICE for longs and doubles.

2004-03-15  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend.h:
      - Fixed bug #24582 (extensions can not be loaded dynamically in
      Solaris/iPlanet)

2004-03-15  Andi Gutmans  <andi@zend.com>

    * zend_operators.c:
      - Nuke E_NOTICE. This caused a notice when doing if ($obj == NULL)

2004-03-14  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_builtin_functions.c:
      Make object parameter optional

2004-03-14  Ilia Alshanetsky  <ilia@prohost.org>

    * zend.c:
      Fixed bug #27590 (crash during shutdown when freeing persistent resources
      in ZTS mode).

2004-03-14  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c:
      - Fix windows build

    * zend_execute_API.c:
      - Fix for bug #27504

    * zend_builtin_functions.c:
      - Fixing bug #27123

    * zend_operators.c:
      - Improve compatibility mode and compare objects according to property
      - comparison (sucky but this is how PHP 4 behaved).

    * zend.c:
      - Fix flow of logic

    * zend_operators.c:
      - Support old style of converting objects to long/double/bool.
      - This is only enabled in compatibility mode, else it calls cast_object()
      - and if that is not available we return 1 (true) so that the following
      - code would work:
      if ($obj) {
      }

2004-03-14  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_operators.c:
      Fix: Add return type void

2004-03-14  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_operators.c:
      - Support Cast operator in convert_to_* so that we support internal
      - extensions such as SimpleXML. This is for Sterling.

    * zend_operators.c:
      - Fix memory leak in the following code (Dmitry):
      <?php
      $a = array();
      $a .= "x";
      ?>

    * zend_operators.c:
      - Initial commit which allows comparing overloaded objects with native
      - types (only for internal classes and not for user-land classes).

2004-03-11  Andi Gutmans  <andi@zend.com>

    * zend_objects_API.c:
      - Real fix for bug #27535 (Dmitry)

    * zend_objects_API.c:
      - Attempt to fix bug #27535

2004-03-09  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * ZEND_CHANGES:
      Rename hasMore() to valid() as discussed. (Part VI)

    * zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_interfaces.c
      zend_language_parser.y
      zend_reflection_api.c:
      Clearify the different method/class flags (as discussed with Andi).

    * zend.h:
      No longer needed

2004-03-09  Andi Gutmans  <andi@zend.com>

    * zend_constants.c:
      - Fix crash:
      <?php
      class ResourceFormat
      {
           const IMG           = 1;
      }
      
      class Image
      {
           const RESOURCE_FORMAT   = ResourceFormat::IMG;
      }
      
      print_r(constant('Image::RESOURCE_FORMAT'));
      ?>

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
      - Nuke unused code.

2004-03-08  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c
      zend_interfaces.c
      zend_iterators.h:
      Rename hasMore() to valid() as discussed. (Part II)

    * zend_interfaces.c:
      Rename hasMore() to valid() as discussed. (Part I)

    * zend_execute_API.c:
      Check count.

    * zend_reflection_api.c:
      Add another missing conversion

2004-03-05  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Fix some small problems I introduce in last patch.

    * zend_compile.c:
      - Finally fix the following:
      $xml_mem =
      simplexml_load_string('<bookbody><part><chapter><page>1</page></chapter></part></bookbody>');
      /* The following works fine */
      foreach ($xml_mem->part as $part) {
        foreach($part->chapter->page as $page) {
       print $page;
        }
      }
      /* The following segfaults */
      foreach ($xml_mem->part as $part) {
        foreach($part->chapter as $chapter) { // Difference here from previous
      example
       print $chapter;
        }
      }

2004-03-04  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_language_scanner.l:
      - Fix memleak when scanner is called from within tokenizer extension.

2004-03-04  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.h:
      fix the fix

    * zend_execute.h:
      oops, fix cut&paste gone bad

    * zend_execute.h:
      Fix object true value: if we are in compat mode and it's Zend object -
      use PHP4 rules. Otherwise, object is always true.

2004-03-04  Derick Rethans  <php@derickrethans.nl>

    * zend_constants.h
      zend_operators.h:
      - Fixed a 64bit issue (for zend_builtin_functions.c, module_number is an
      int).
      - Change the MAX_LENGTH_OF_LONG constant to 20, as LONG_MAX is 20
      characters.
        (Patches by Ard Biesheuven)

    * tests/zend_operators.phpt:
      - Added instance_of test (patch by Ard Biesheuvel)

2004-03-04  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c:
      Disallow redefining ctors and cleanup

    * zend_mm.c:
      Handle out of memory/bad size situation gracefully, without getting into
      loop

2004-03-03  Andi Gutmans  <andi@zend.com>

    * zend_objects_API.c:
      - Fix crash:
      <?
      class foo {
              function __destruct() {
                      foreach ($this->x as $x);
              }
      }
      new foo();
      echo 'OK';
      ?>

2004-03-02  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_API.h:
      Fix zend_parse_method_parameters_ex() and make it consistant with
      zend_parse_method_parameters().

2004-03-02  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Fix leaks (although there might be still a problem here).

    * zend_execute.c:
      - Fix leak (Dmitry)

    * zend_compile.c:
      - Fix crash in:
      <?php
        class Foo {
          public $attributes=  array();
      
          function export() {
            foreach ($this->attributes as $name => $attr) {
            }
          }
        }
      
        $f= new Foo();
        $f->export();
      ?>

    * zend_objects.c:
      - Improve fix for protecting destructor's from exceptions.
      - I was killing the current exception completely which was wrong.

2004-03-01  Andi Gutmans  <andi@zend.com>

    * zend_objects.c:
      - Fix crash in destructors(). You can't throw an exception in destructors
        as there is no guaranteed time when the destructor will be called.

    * zend_reflection_api.c:
      - Fix leak

    * zend_reflection_api.c:
      - Fix crash in reflection API (pierre)

    * zend.c
      zend_exceptions.c
      zend_execute_API.c:
      - Fix crash in exception handling (zend_exception_error(...) and
        zend_eval_string_ex() were buggy (Dmitry, Andi)

2004-03-01  Derick Rethans  <php@derickrethans.nl>

    * zend_compile.h:
      - Typo fix (by Jan)

    * zend_builtin_functions.c:
      - Fixed bug #27443 (defined() returns wrong type).

2004-02-29  Andi Gutmans  <andi@zend.com>

    * zend_reflection_api.c:
      - Apply fixes by Timm.

    * zend_compile.c:
      - Change prototype isA check not to check the constructor.
      - Only give an E_STRICT for non-isA compliant code as opposed to
        E_COMPILE_ERROR.

2004-02-29  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.h:
      add ZEND_API there too for opcode handlers

2004-02-29  Derick Rethans  <php@derickrethans.nl>

    * zend_execute.c:
      - Initialize memory to \0 so that we can reliable detect whether a specific
        opcode element is in use.

2004-02-29  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      export opcode table

2004-02-27  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_compile.h:
      Add some comments

    * zend_API.c
      zend_compile.c
      zend_execute.c:
      Fixes for abstract classes/methods

2004-02-26  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_language_parser.y
      zend_language_scanner.l:
      Fix __METHOD__ (noticed by Davey Sahfik)

    * zend_reflection_api.c:
      Fix problem with Reflection_Property (patch from Timm slightly modified).

2004-02-25  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects_API.c:
      As Andi found out the dtor may increase the refcount.

2004-02-25  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend_builtin_functions.c:
      ws + cs

2004-02-25  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_execute.c:
      Fix leak in foreach ($o->mthd()->arr)

    * zend_API.c
      zend_API.h
      zend_compile.c
      zend_compile.h
      zend_execute.c:
      - Improve ARG_INFO() macros to support supplying required_num_args
      - Initial fix for foreach($o->mthd()->arr) crash (now leaks)

2004-02-25  Derick Rethans  <php@derickrethans.nl>

    * zend_highlight.c:
      - Use <span> instead of <font> in highlight_string(). (Patch by
      mg@iceni.pl)

2004-02-25  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend_exceptions.c:
      Improve error messages

2004-02-25  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_variables.c:
      - Rename compatiblity mode to zend.ze2_compatibility_mode (it doesn't  
      only affect auto-clone).
      - Perform implementation checks even with simple inheritance (off when
        compatibility mode is enabled).
      - Restore default arguments in interfaces and handle it correctly.
      - Move registration of internal classes later in the startup sequence
        in order to have INI options available.

2004-02-25  Derick Rethans  <php@derickrethans.nl>

    * zend_exceptions.c:
      - Fixed bug #27391 (typo in Fatal Error message).

2004-02-25  Zeev Suraski  <zeev@zend.com>

    * zend_API.c
      zend_compile.c
      zend_compile.h
      zend_opcode.c:
      - Abstract methods cannot have defaults for arguments
      - Make function foo($a, $b=null) satisfy both foo($a) and foo($a, $b)
        prototypes

2004-02-25  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_reflection_api.c:
      Proto fixes.

2004-02-25  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects_API.c:
      Fix object destruction/free in shutdown
      - set destructor_called even when no dtor is given
      - use free_storage even when no dtor hat to be called

    * zend_objects_API.c:
      Checking once for dtor is enough

2004-02-24  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Fix class flags when handling abstract methods

2004-02-23  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
      - Improve precendence:
      
      <?php
      
      $obj->foo = "Blah";
      
      if (!$obj instanceof StdClass) {
          print "No";
      } else {
          print "Yes";
      }

    * zend_language_parser.y:
      - Decrease precedence of instanceof so that the following is true:
      php -r 'var_export((object)1 instanceof stdClass);';
      Patch by Jan Lehnardt

2004-02-22  Derick Rethans  <php@derickrethans.nl>

    * zend_operators.c:
      - Fixed bug #27354 (Modulus operator crashes PHP).

2004-02-22  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * ZEND_CHANGES:
      Add some more obviously needed information

2004-02-20  Hartmut Holzgraefe  <hartmut@php-groupies.de>

    * zend.h
      zend_API.h
      zend_iterators.h
      zend_operators.h
      zend_variables.h:
      more EXTERN_C wrapping of ZEND_API prototypes

2004-02-20  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend_opcode.c:
      ws fix

2004-02-18  Hartmut Holzgraefe  <hartmut@php-groupies.de>

    * zend.h
      zend_builtin_functions.h
      zend_extensions.h
      zend_indent.h
      zend_interfaces.h
      zend_object_handlers.h
      zend_objects.h
      zend_objects_API.h
      zend_ptr_stack.h
      zend_stack.h
      zend_stream.h:
      wrap ZEND_API prototypes into BEGIN_EXTERN_C/END_EXTERN_C
      for C++ extension support

2004-02-18  Zeev Suraski  <zeev@zend.com>

    * zend.c:
      Forward-port fixlet from PHP 4 (thanks to Michael Sisolak)

2004-02-17  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend_list.c:
      MFB: - Fix bug #26753 (zend_fetch_list_dtor_id() does not check NULL
      strings)

2004-02-16  Derick Rethans  <php@derickrethans.nl>

    * ZEND_CHANGES:
      - Clearify clone behavior, fixed clone example (Patch by Jan Lehnardt)

2004-02-16  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Bugfix #27227 Mixed case class names causes Fatal Error in Constructor call

2004-02-14  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_iterators.c:
      dtor's may not be called from free_storage handlers

2004-02-12  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0b4)
      zend_execute.c:
      - Remove old code

2004-02-12  Hartmut Holzgraefe  <hartmut@php-groupies.de>

    * (php_5_0_0b4)
      ZEND_CHANGES:
      making sure that the provided examples actualy work (or at least do not
      generate no parse errors) unless they are really expected to fail

2004-02-12  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0b4)
      zend_object_handlers.c:
      - This was too strict.

2004-02-12  Zeev Suraski  <zeev@zend.com>

    * (php_5_0_0b4)
      zend_API.c
      zend_API.h
      zend_compile.c
      zend_compile.h
      zend_interfaces.c
      zend_object_handlers.c:
      - Check return-by-reference bit when implementing interface prototypes
      - Add infrastructure for built-in functions to hint whether they
        return by reference or not.  It is NOT currently used for anything,
        except for interface prototypes (you can use it to request that the
        function that implements your prototype returns by reference or
        doesn't return by reference).
        For downwards compatibility - by default, interface prototypes are
        agnostic as to whether the function that implements them returns
        by reference or not.  Use ZEND_BEGIN_ARG_INFO_EX() with
        ZEND_RETURN_VALUE/ZEND_RETURN_REFERENCE to change that.
      - Fix ArrayAccess::getOffset() to conduct additional checks.
        If your getOffset() should work with multidimensional arrays - it
        must return by reference.

2004-02-12  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0b4)
      zend_object_handlers.h:
      - Add comments to read/write property/dimension for extension authors

2004-02-12  Zeev Suraski  <zeev@zend.com>

    * zend_default_classes.h:
      zend_default_classes.h -> zend_exceptions.h

2004-02-12  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0b4)
      Makefile.am:
      - Add zend_exceptions.c

2004-02-12  Zeev Suraski  <zeev@zend.com>

    * (php_5_0_0b4)
      ZendTS.dsp
      zend.c
      zend_default_classes.c
      zend_exceptions.c
      zend_exceptions.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_reflection_api.c:
      Centralize exceptions code in zend_exceptions.[ch].
      Remove zend_default_classes.h (use zend_exceptions.h instead)
      
      NOTE:  This currently breaks the build, fixes to php-src and pecl coming
             soon

2004-02-12  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
      - Use zend_throw_exception_object() in throw_handler to make sure it
      - does all the checks

2004-02-12  Zeev Suraski  <zeev@zend.com>

    * zend_default_classes.c
      zend_default_classes.h
      zend_exceptions.c
      zend_exceptions.h
      zend_execute.h
      zend_execute_API.c:
      Exceptions updates:
      
      - Enforce exceptions to be derived from class Exception.  This allows
        users to perform catch-all.  It's not yet complete, so don't get
        comfortable with it just yet :)  Updates are coming soon.
      - Implement zend_throw_exception() using zend_throw_exception_ex()

2004-02-12  Andi Gutmans  <andi@zend.com>

    * zend_execute.h
      zend_execute_API.c:
      - Add API function to throw exception by using an object

2004-02-11  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.c:
      Must be initialized in ZTS mode

    * ZEND_CHANGES
      ZEND_CHANGES:
      Update

    * zend_compile.c
      zend_language_parser.y:
      Fix: <interface> [extends <interface> [, <ineterface>]* ]

2004-02-11  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix leaks in assignments to overloaded objects

    * zend_execute.c:
      Fix leak with overloaded objects, when they're used just "for the hell
      of it" :)

    * zend_execute.c:
      Fixed a bug the caused overloaded array indices to be converted to strings

    * zend_execute.c:
      Turn off bogus warnings with overloaded dimensions and += (and friends)

    * zend_execute.c:
      Improve the implementation of unset() on array dimensions to be more
      consistent with that of regular variables and string offsets

    * zend_execute_API.c:
      Fix bug #25038

    * zend_reflection_api.c:
      Fix crash (patch by Rob Richards)

    * zend.c
      zend_execute_API.c:
      Fix exceptions thrown without a stack frame
      Always enable set_exception_handler()

    * zend_list.h:
      Change FETCH_RESOURCE to return false on error instead of null, for
      consistency with other error situations

    * zend_compile.c:
      Fix bug #26802 (the right aspects of it found by Marcus, anyway :)

    * tests/bug26802.phpt:
      Fix and clarify the test case

    * zend_execute_API.c:
      Complete the fix for handling of exceptions happening during the
      argument passing phase of function calls (fixes bug #26866)

    * zend_execute_API.c:
      whitespace

2004-02-10  Zeev Suraski  <zeev@zend.com>

    * tests/bug26698.phpt:
      Ignore the memleak in this test

    * zend_execute.c:
      Fix bug #26698 (exceptions handled properly during argument passing to
      functions)

    * zend_default_classes.c:
      Fix bug #27186

    * zend_execute_API.c:
      Fix bug #26869

    * zend_execute.c:
      Fix refcounting of ++/+= overloading (fix leak in __get()/__set()
      based classes)

2004-02-10  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Nuke more unused code

2004-02-10  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix handling in assignment using multidimensional array syntax to string
      offset ($s = "FUBAR"; $s[0][0] = 1;)

2004-02-10  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES:
      - We will go with PHP 4 behavior. With the new object model assigning by
        reference has lost a lot of its importance.

    * zend_compile.c:
      - Remove junk

2004-02-10  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix exception handling in opcodes spanned across multiple oplines (fixes
      the crash in __set())

    * zend_execute.c:
      - Fix pre/post increment for overloaded objects
      - Fix binary-assign-op for overloaded objects
      
      NOTE:  This requires the implementation of the 'get' callback!

2004-02-10  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * tests/bug22836.phpt:
      - Correcting test.

2004-02-08  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h:
      Fix write-mode of overloaded objects when using array dimensions

2004-02-08  Andi Gutmans  <andi@zend.com>

    * zend_objects_API.c:
      - Check if free_storage exists

2004-02-05  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      Committing for Jan.

2004-02-05  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_compile.c
      tests/bug27145.phpt:
      Fixed bug #27145 (Unmangle private/protected property names before printing
      then inside error messages).

2004-02-04  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c:
      Fix exceptions happening inside internal functions called through
      zend_user_function()

    * zend_execute_API.c:
      Remove double initialization

2004-02-04  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects.h:
      Add new prototype

    * zend_reflection_api.c:
      Fix reflection

    * zend_iterators.c:
      Fix warnings

2004-02-04  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fixlet

    * zend_compile.c:
      Fix handling of $this in some cases

    * zend_compile.c:
      Handle additional cases

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_language_parser.y:
      Reinstate early-binding for classes.
      
      Note that this is available for downwards compatibility only - and it
      doesn't
      work if you use new features (namely, interfaces).  Generally, people
      should
      declare their classes before using them, but we just didn't want hell to
      break
      loose (c)

    * zend_opcode.c:
      Optimize

    * zend_compile.c:
      - Improve $this assignment detection and generalize some code in
      zend_compile.c

    * zend_compile.c:
      -Error out when trying to re-assign $this

    * zend_objects_API.c
      zend_objects_API.h:
      The valid bit was necessary after all - restored

    * zend_objects_API.c:
      Fixlets

    * zend_compile.c
      zend_objects.c:
      - Small fixes

    * zend_execute.c:
      - Improve wording

    * zend_execute_API.c
      zend_iterators.c
      zend_objects.c
      zend_objects_API.c
      zend_objects_API.h
      zend_reflection_api.c:
      Change destructor implementation (details will follow on internals@)

2004-02-03  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * tests/bug24884.phpt:
      Update tests

    * zend_objects.c:
      Nuke unused variable

    * zend_compile.c:
      Fix Warning

2004-02-03  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      clone/__clone() related changes.

2004-02-03  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Remove unused variable

    * zend_objects_API.c
      zend_objects_API.h:
      Remove more garbage - valid bit was not really necessary

    * zend_execute_API.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects_API.c
      zend_objects_API.h:
      - Clean garbage (delete was nuked a long time ago)

2004-02-03  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute.c:
      More unneeded code removed.

2004-02-03  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_language_scanner.l:
      Abort on parse error in an include file (patch by Ilia)

    * zend_compile.c:
      Remove redundant code

    * zend_execute.c:
      Fix try/catch block logic

    * zend_compile.c
      zend_objects.c:
      Perform a bitwise copy of the object even when __clone() is defined.
      __clone() is back to not requiring any arguments, as $that is no longer
      needed ($this already contains a copy of the original object, by the time
      we __clone() is executed).
      Calling the parent clone is done using parent::__clone()

    * zend_compile.c
      zend_compile.h
      zend_default_classes.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l
      zend_opcode.c:
      Rewrote exception support.  Fixes a few limitations and bugs in the old
      implementation, and allows exceptions to 'fire' much earlier than before.
      
      Instructions on how to use the new mechanism will follow on internals@
      shortly...
      
      Note - this (most probably) breaks the current implementation of
      set_exception_handler()

2004-02-02  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y
      zend_language_scanner.l
      zend_objects.c:
      Redesign the clone() feature to fix some fundamental flaws in the previous
      implementation.
      
      Using clone directly is now done using
      $replica = clone $src;
      
      Clone methods must now be declared as follows:
      function __clone($that)
      {
      }
      
      Clone methods in derived classes can call the __clone method of their
      parent
      classes using parent::__clone($that)

2004-01-31  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Throw an exception in case a reflection object cannot be found and do not
      override the exception from constructors in static method calls.

2004-01-30  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute.c:
      Apply the same parse error handling to (include|require)_once as the one
      for
      their non-once counterparts.

2004-01-28  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Tweak checks to detect some additional cases.
      Reorder checks to make more sense.

    * zend_compile.c:
      - Error message fix
      - Prevent inheritance of the same constant from two interfaces

    * zend_compile.c:
      Fixlets

    * zend_compile.c
      zend_compile.h:
      Prevent classes from implementing interfaces that have the same function

    * zend_execute.c:
      Whitespace

    * zend_compile.c:
      Code relayout

    * zend_execute_API.c:
      Forward-port fix for timeouts under Windows

2004-01-26  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_interfaces.c
      zend_interfaces.h:
      - Export struct zend_user_iterator
      - Ad 'it' to function prefix to prevent naming clashes
      - Export zend_user_it_free_current

2004-01-25  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute.c:
      Fixed bug #26814 (On parse error include included file, terminate
      execution script).

2004-01-25  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c
      zend_iterators.c
      zend_iterators.h:
      Respect proeprty visibility in foreach

    * tests/bug26696.phpt:
      Update test

2004-01-24  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c:
      Switch from ZEND_ACC_DYNAMIC to ZEND_ACC_ALLOW_STATIC and disallow calling
      internal non-static methods statically.

2004-01-24  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_execute.c
      zend_execute_API.c:
      Change message as proposed by Jon.

2004-01-23  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c:
      Simplify detection of methods that must be called dynamic (with object)

    * zend_execute.c
      zend_execute_API.c:
      Disallow calling __clone/__construct/__destruct static
      Send an E_STRICT when calling a non static method static

    * zend_API.c
      zend_compile.c
      zend_compile.h:
      Disallow static declaration of clone

2004-01-23  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend_constants.h
      zend_ini.h:
      Silence some compile warnings

2004-01-22  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c:
      Fix internal access to exception properties

2004-01-19  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_execute.h:
      - Hopefully fix bug #26696.
      - Please let me know if hell-breaks loose

2004-01-19  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_API.h:
      Add zend_get_module_started() to quickly check whether a module is present
      and its MINIT function has been called.

2004-01-18  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.h
      zend_execute_API.c:
      Improove debug capabilities

    * zend_reflection_api.c:
      Fix some casing issues

2004-01-17  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_interfaces.c:
      

    * zend_interfaces.c:
      Fix inheritance rule for interface Traversable

2004-01-17  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * tests/bug26802.phpt:
      - Renamed all *php4* files to *php5*, changed all php4/PHP4 to php5/PHP5

2004-01-17  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_object_handlers.c
      zend_object_handlers.h:
      Expose zend_std_call_user_call(), needed for implementation of things like
      __call handlers.

2004-01-17  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend_compile.c
      zend_language_scanner.h
      zend_language_scanner.l:
      Nuke compile warning by using the LANG_SCNG macro instead

2004-01-16  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend_reflection_api.c:
      - Fixed bug #26640 (__autoload() not invoked by Reflection classes)
      

2004-01-15  Zeev Suraski  <zeev@zend.com>

    * zend.c:
      Nice patch Christian, but it wasn't at all enabled? :)
      
      Fix bug #26883

2004-01-14  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Don't allow interfaces to implement anything

2004-01-14  Andi Gutmans  <andi@zend.com>

    * zend_operators.h:
      - Remove bogus macros

2004-01-13  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_ini_parser.y:
      Don't treat strings containing : as potential constant names in
      the .ini parser.
      This fixes Bug #26893

2004-01-12  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Return the PHP 4 behavior of not allowing class declerations within
      - class declerations. This happened when declaring a class within a
      - method.
      class A {
      	function foo() {
      		class B {
      		}
      	}
      }

2004-01-12  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.h:
      Add missing macro

2004-01-11  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_compile.c
      zend_language_scanner.h
      zend_language_scanner.l:
      TSRMLS fix

2004-01-11  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
      - Re-allow conditional class declerations. Needless to say that I also
      - think it's not great coding.. Use polymorphism instead :)

    * zend_compile.c
      zend_language_scanner.h
      zend_language_scanner.l:
      - This should fix the problem of conditional function decleration on the
      - same line of code not to work. You should re-evaluate your coding style
      - if you really code this way :)

2004-01-10  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
      Remove conflict

    * zend_builtin_functions.c
      zend_execute_API.c
      zend_globals.h
      zend_operators.c:
      Added error mask to set_error_handler()
      Patch by Christian Schneider <cschneid@cschneid.com>

2004-01-09  Wez Furlong  <wez.php@thebrainroom.net>

    * acconfig.h:
      support for building asm in the unix buildsys.
      Also, when ZEND_ACCONFIG_H_NO_C_PROTOS is defined,
      omit the C prototypes from the configuration header
      so that it can be included into asm files.

2004-01-09  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * RFCs/002.txt:
      this one is declined

2004-01-09  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_object_handlers.h:
      must be extern to avoid problems with some compilers

2004-01-09  Stanislav Malyshev  <stas@zend.com>

    * tests/bug26077.phpt:
      fix expect

    * zend_compile.c:
      Bug #25816 - disallow arrays in class constants

    * tests/bug26077.phpt:
      add test

    * zend_compile.c
      zend_execute.c:
      Fix Bug #26077 - memory leak when new() result is not assigned
      and no constructor defined

2004-01-08  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * acconfig.h
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.c
      zend_compile.h
      zend_config.nw.h
      zend_config.w32.h
      zend_constants.c
      zend_constants.h
      zend_default_classes.c
      zend_default_classes.h
      zend_dynamic_array.c
      zend_dynamic_array.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_ini.c
      zend_ini.h
      zend_ini_scanner.h
      zend_interfaces.c
      zend_interfaces.h
      zend_istdiostream.h
      zend_iterators.c
      zend_iterators.h
      zend_language_scanner.h
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_mm.c
      zend_mm.h
      zend_modules.h
      zend_multibyte.c
      zend_multibyte.h
      zend_multiply.h
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects.c
      zend_objects.h
      zend_objects_API.c
      zend_objects_API.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_qsort.c
      zend_qsort.h
      zend_reflection_api.c
      zend_reflection_api.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_static_allocator.c
      zend_static_allocator.h
      zend_stream.c
      zend_stream.h
      zend_ts_hash.c
      zend_ts_hash.h
      zend_types.h
      zend_variables.c
      zend_variables.h:
      - Happy new year and PHP 5 for rest of the files too..

2004-01-08  Andi Gutmans  <andi@zend.com>

    * zend_ini_parser.y
      zend_ini_scanner.l
      zend_language_parser.y
      zend_language_scanner.l:
      -   - A belated happy holidays (by two years)

2004-01-07  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Reimplement part of Bug #24608 that was reverted too

    * zend_execute.c:
      Revert patch that allowed to call sttaic methods via $method()

2004-01-06  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_mm.c:
      Check if realloc() succeeds or not. (Noticed by Andrey)

2004-01-06  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * tests/bug26802.phpt:
      Update

2004-01-05  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c
      tests/bug26802.phpt:
      Fixed bug #26802

    * tests/bug26802.phpt:
      Fix test

    * tests/bug26801.phpt
      tests/bug26802.phpt:
      Add new test

    * tests/bug26696.phpt:
      Update test

2004-01-05  Stanislav Malyshev  <stas@zend.com>

    * zend_API.c:
      Fix bug #26543 - check parent:: and self:: in class names

    * zend_execute.c
      zend_object_handlers.c:
      Bug #24608 - fix interaction between __accessors and get_property_ptr

2004-01-03  Derick Rethans  <php@derickrethans.nl>

    * zend.c
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_object_handlers.c
      zend_reflection_api.c:
      - Fixed var_export() to show public, protected and private modifiers
      properly.
      - Exported (un)mangle_property_name.

2004-01-02  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_default_classes.c:
      Do not show exception message if it's empty.
      

2003-12-31  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_default_classes.c:
      Make default message look better.

2003-12-30  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES:
      - Fix typos

2003-12-30  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * ZEND_CHANGES:
      Update

2003-12-30  Ilia Alshanetsky  <ilia@prohost.org>

    * tests/bug26696.phpt:
      Added test case for bug #26696.

2003-12-29  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Fix (string) conversion

    * zend.c:
      Add missing notice

    * zend_execute_API.c:
      Fix __autoload() with derived classes

2003-12-28  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      WS

    * zend_API.h
      zend_compile.c:
      Fix order of class_entry member initialization (needed for example for DOM)

2003-12-27  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_language_parser.y:
      Fixed bug #26065 (Crash when nesting classes)

    * tests/bug26698.phpt:
      Add new test

    * zend_objects.c:
      Simplify

    * zend_object_handlers.c:
      Fix __tostring() and concatenation

2003-12-25  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c
      zend_execute.c:
      Fix warning

2003-12-25  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_highlight.c:
      Fixed Bug #26703 (Certain characters inside strings incorrectly treated as
      keywords). Original patch by vrana@php.net.

2003-12-23  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.c
      zend_execute_API.c
      zend_globals.h
      tests/bug26697.phpt:
      Fixed bug #26697 (calling class_exists on a nonexistent class in __autoload
      results in segfault).

2003-12-22  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * tests/bug26229.phpt
      tests/bug26695.phpt:
      Add more tests

    * tests/bug24884.phpt
      tests/bug26166.phpt:
      Fix tests now that class names are shown in correct casing

    * zend_compile.c:
      Preserve class name casing.

    * zend_reflection_api.c:
      Fixed bug #26695 (Reflection API does not recognize mixed-case class hints)

    * zend_object_handlers.c:
      Fixed bug #26675 (Segfault on ArrayAccess use)
      Update NEWS

2003-12-22  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_API.c
      zend_API.h
      zend_object_handlers.c
      zend_object_handlers.h:
      export these symbols for use by SPL as a shared extension

2003-12-19  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0b3RC2)
      zend_language_parser.y:
      - Nuke another rule (thanks to Jan for noticing this)

2003-12-19  Dmitry Stogov  <dmitry@zend.com>

    * (php_5_0_0b3RC2)
      zend.c:
      Bug #25547 (error_handler and array index with function call) was fixed
      tests/lang/bug25547.phpt

2003-12-19  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
      - Nuke unused code

2003-12-19  Dmitry Stogov  <dmitry@zend.com>

    * (php_5_0_0b3RC2)
      zend_execute.c:
      Error reporting on unset string offset was added (Bug #24773
      Zend/tests/bug24773.phpt)

    * zend_execute.c:
      Assign_op operators (+=) were fixed for elements of overloaded objects

2003-12-18  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
      - Nuke C++ comment

    * zend_execute.c:
      - Revert patch 1.566

2003-12-18  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h:
      Fixed bug #24837 Incorrect behaviour of PPP using foreach.

2003-12-17  Zeev Suraski  <zeev@zend.com>

    * (php_5_0_0b3RC1)
      zend_execute.c:
      This part of the if was necessary after all.
      Refix bug #22510

2003-12-17  Dmitry Stogov  <dmitry@zend.com>

    * (php_5_0_0b3RC1)
      zend_execute_API.c:
      -** empty log message ***

    * (php_5_0_0b3RC1)
      zend_compile.c:
      Dynamic function call from object's property was fixed
      (See "tests/lang/bug24926.phpt" and "tests/lang/bug25652.phpt")

    * zend_execute_API.c:
      Access to globals/autoglobals from class __destructor was fixed.
      (see "tests/lang/bug24908.phpt" and
      "tests/classes/destructor_and_globals.phpt")

2003-12-16  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_compile.h
      zend_object_handlers.h
      zend_stream.h:
      Sync: Export externally used functions.

2003-12-16  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c:
      export class initialization function

    * zend_object_handlers.c:
      export externally used functions

    * zend_stream.c:
      export function

2003-12-15  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.c
      zend_object_handlers.c
      zend_object_handlers.h:
      Reenable __tostring() magic for print,echo,concatenation,function naming...
      but not for other internal things.

2003-12-15  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend_execute.c:
      ws + cs (no c++ comments in c code)

2003-12-15  Dmitry Stogov  <dmitry@zend.com>

    * zend_execute.c:
      Bug #24773 was fixed (Zend/tests/bug24773.phpt)
      Assign_op operators (+=) were fixed for elements of overloaded objects
      Memory leaks during accessing ptoperies/elements of overloaded objects
      were fixed

    * zend_execute_API.c
      zend_reflection_api.c:
      Memory corruptions were fixed in zend_str_tolower_copy()

2003-12-14  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h:
      Fix behavior of return-by-reference functions.  Remove erroneous warnings,
      add E_STRICT warnings in case you return something by reference that
      you're
      not supposed to (anything that's not a variable, or a return-value of a
      function that returned by reference).

    * zend.h
      zend_execute.c
      zend_execute.h:
      Some cleanup

2003-12-13  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_operators.c:
      Fixes for POSIX compliancy.

2003-12-12  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.c:
      Free is needed in non ZTS too

    * zend.c:
      Fix memleaks in ZTS mode

    * zend.c:
      Fix memleaks

2003-12-12  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_constants.c:
      Do not copy extra byte.

2003-12-11  Ilia Alshanetsky  <ilia@prohost.org>

    * zend.h:
      Fixed extra byte allocation for TRUE/FALSE/ZEND_THREAD_SAFE/NULL constants.

2003-12-11  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute_API.c:
      Bugfix: #26591 [NEW]: "__autoload threw an exception" during an uncaught
      Exception

2003-12-11  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
      - Refix bug #24773

2003-12-11  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_object_handlers.c:
      Handle getter failure and allow to bypass thrown exceptions.

    * zend_execute.c:
      read_dimension() handler might return 0, handle this.

2003-12-10  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute_API.c:
      Do not double copy the string

2003-12-09  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * zend_operators.c
      zend_operators.h:
      - Brought ext/bcmath to the new millennium

2003-12-09  Andi Gutmans  <andi@zend.com>

    * zend_constants.c:
      - Fix overallocation (thanks to Ilia)

2003-12-08  Derick Rethans  <php@derickrethans.nl>

    * zend_builtin_functions.c:
      - Make it compile again

2003-12-07  Stanislav Malyshev  <stas@zend.com>

    * zend_builtin_functions.c:
      Apply Andrey Hristov's patch adding get_declared_interfaces()

2003-12-06  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      This test is against interfaces not abstract classes.

    * zend_default_classes.c:
      Show the exception message again after __toString() magic has been dropped.

2003-12-05  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.c:
      - Remove two unneeded convert_to_string() (found by Marcus)
      - Change illegal use of string offset to E_ERROR

2003-12-05  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_default_classes.c:
      Fixed crash demonstrated with ext/dom/tests/dom003.phpt test case.

2003-12-04  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_execute.c:
      Revert crap.

    * zend_execute.c:
      Raise error in case dereference is performed on a scalar value.

2003-12-03  Ilia Alshanetsky  <ilia@prohost.org>

    * tests/bug24773.phpt:
      Test case for bug #24773.

2003-12-03  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_execute.c:
      This kind of error should be caught. (suggested by Andi, thanks)

    * zend_execute.c:
      Fix bug #24773 (unset()ing string offsets crashes PHP)

2003-12-03  Derick Rethans  <php@derickrethans.nl>

    * zend_execute.c:
      - Remove newline from error message

2003-12-02  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_object_handlers.c:
      Remove automatic call to __toString() since it is supposed to cause too
      much trouble. See discussion on the mailing list.

2003-12-02  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_operators.c:
      - Revert the revert of these patches. This overloading can only be used
      - by C extensions such as SimpleXML and *NOT* PHP code. Reasons given
      - on the mailing list and problem with reentrancy inside the opcodes.

    * zend_compile.c:
      - Fix for bug #26182

    * zend_errors.h:
      - Don't include E_STRICT in E_ALL.

2003-12-02  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.h:
      Free the zval container only if it should be freed and was not copied.

2003-12-01  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
      - Change to E_STRICT so as not to break existing scripts.
      - Thanks Edin

    * zend_builtin_functions.c:
      - Nuke property_exists(). We need to fix isset() and this is already
      - supported in reflection API. In any case, it's best not to add new
      - functions in the general namespace except for keeping engine consistency
      (which would have been true in this case)

    * zend_API.c:
      - Revert auto-conversion in parameter API

    * zend_operators.c:
      - Don't automatically call __toString() in convert_to_string_ex().
      - use __toString() in your code.
      - Keep the auto-case in make_printable_zval.

2003-11-30  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c:
      Check return value of exception::__tostring()

    * tests/bug20240.phpt:
      Fix test

2003-11-29  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c
      zend_iterators.c:
      Fix memleak

2003-11-29  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_highlight.c
      zend_language_scanner.l:
      Fixed bug #26463 (Incorrect handling of semicolons after heredoc)

2003-11-29  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.h:
      This takes the address of a zval ptr

    * zend_API.h:
      Add macros to return values of other zvals.
      This is needed because one cannot use REPLACE_ZVAL_VALUE with
      return_value.

2003-11-29  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute.c:
      Restore original patch for bug #26281.
      

2003-11-29  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Revert accidential commit until decision

    * zend_compile.c
      zend_default_classes.c:
      Make exception code more robust:
      - Fix error in calculation of trace-string length
      - Allow to overload __strostring() and make it work for uncaught
      exceptions
      - Show exception thrown while displaying exceptions

2003-11-28  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_API.c:
      Add removed lcname, it is still needed.

2003-11-27  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Convert objects to string if string is required by newer parameter parsing
      since we do this for older parameter parsing does so too.

    * zend_object_handlers.c:
      The macro REPLACE_ZVAL_VALUE cannot be used since we only have zval *
      writeobj. to allow it the api needs to be changed to zval **writeobj.

    * zend_builtin_functions.c:
      Add a support function to check for property existance which is different
      from checking a property from being empty/set.
      Update test #26182.

2003-11-24  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c
      zend_interfaces.c
      zend_interfaces.h
      zend_object_handlers.c
      zend_operators.c
      zend_operators.h:
      Add new interface ArrayAccess to use objects as Arrays

2003-11-24  Andi Gutmans  <andi@zend.com>

    * zend_constants.c:
      - Fix newly introduced bug which stopped class constants from working.
      - Thanks to Jan Lehnardt for reporting it.

2003-11-24  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * RFCs/004.txt:
      No longer needed.

2003-11-24  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_execute.c
      zend_execute_API.c
      zend_reflection_api.c:
      - Fix __autoload() to preserve class case.
      - Heads up, this patch might break stuff so please let me know if you
      - bump into any problems.

2003-11-23  Andi Gutmans  <andi@zend.com>

    * zend_reflection_api.c:
      - Allocation optimizations by Timm Friebe

2003-11-21  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute.c:
      Cleaner patch for bug #26281.

2003-11-19  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute.c
      tests/bug26281.phpt:
      Possible fix for bug #26281 & test case.

2003-11-18  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.h:
      Add method alias macro

2003-11-18  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_builtin_functions.c
      zend_constants.c
      zend_errors.h
      zend_language_parser.y:
      - Add E_STRICT, to be used to warn purists (like Jani :)

2003-11-18  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Backpatch the correct opcode for list(), property overloading needs more
      opcodes (Bugfix #26257).

    * zend_interfaces.c:
      Use correct order

    * zend_interfaces.c:
      Use correct macro/function

2003-11-17  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_interfaces.c:
      Correct destruction

2003-11-13  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_operators.c:
      Bugfix #26156 (REPLACE_ZVAL_VALUE works on uninit stack-based zvals)

2003-11-13  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * ZEND_CHANGES
      zend_interfaces.c:
      IteratorAggregate::getIterator() cannot return anythingy else than objects

2003-11-13  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Make sure internal clasess are malloced

2003-11-10  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_iterators.c:
      Don't use zend_class_entry indirection

    * zend_builtin_functions.c:
      Bugfix #26010 (Bug on get_object_vars() function)

    * zend_object_handlers.c:
      Correct default handlers

    * zend_iterators.c:
      Need to update iterators handler table too.

    * zend_execute.c
      zend_object_handlers.c:
      Fix those warnings

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects_API.c:
      Split isset/isempty for object property and object dimension hooking.

    * zend_interfaces.c:
      Little iterator improvement: ability to store index in iterator

2003-11-08  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Add method reflection_class::implementsInterface()
      Allow string & reflection_class in isSubclassOf()

    * zend_reflection_api.c:
      Fix reflection_class::isSubclassOf()

    * zend.c
      zend_object_handlers.c
      zend_operators.c
      tests/bug26166.phpt:
      Handle exceptions in casting more gracefully.
      This fixes bug #26166

2003-11-07  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute_API.c:
      Make __autoload() faster

    * zend_execute.c
      zend_iterators.h:
      Update Iterators: Call next at the correct point in time.

    * zend_compile.c:
      Add missing initialization.

    * zend_interfaces.h:
      Make these class entries available for inheriting classes

2003-11-06  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_operators.c:
      Fixed bug #26148 (Print the notice before modifying variable on type
      mismatch).
      
      
      Patch by: morten-bugs dot php dot net at afdelingp dot dk

2003-11-04  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c
      zend_interfaces.c:
      Prevent some SEGV's when Exceptions are thorown inside iterators.

    * zend_builtin_functions.c:
      Removedouble efree call

2003-11-04  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_object_handlers.c:
      __tostring() handler should be binary-safe

    * tests/bug26010.phpt:
      Fix one more test

2003-11-04  Stanislav Malyshev  <stas@zend.com>

    * Makefile.am:
      add zend_iterators.c zend_interfaces.c to make

2003-10-31  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * tests/bug26010.phpt:
      Add test case for bug #26010

2003-10-30  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c:
      make CATCH opcode use "class" T like other opcodes do - via IS_CONST

2003-10-30  Andi Gutmans  <andi@zend.com>

    * (php_5_0_0b2)
      ZEND_CHANGES:
      - Beta 2

2003-10-29  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_operators.h:
      Use pretty macro instead.

2003-10-28  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
      - Head up! I'm reverting the patch which allows for expressions in constant
      - declerations. Allowing the access of other constants in this code is
      - flawed. We are reverting back to PHP 4's static scalars.
      - Don't worry if you get the following msg when compiling:
      - "zend_language_parser.y contains 3 useless nonterminals and 22 useless
      rules"
      - I didn't nuke the code in case we have some brilliant ideas after beta 2

2003-10-28  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_interfaces.c:
      Give some freedon to c iterators but not in userspace.

2003-10-28  Shane Caraveo  <shane@caraveo.com>

    * zend_compile.c:
      fix crash in do_implement_interface when compiling
      pear/PHPUnit/Framework/TestCase.php line 63
      while only interface_gets_implemented is the issue in this instance, both
      these vars were unitialized, causing potential other issues

2003-10-25  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_API.h:
      Add zend_make_callable() which allows to make zval's callable zval's.
      At the moment this function only converts strings of the form
      class::method
      to an array(class,method).

    * zend_default_classes.c
      zend_reflection_api.c:
      This forces a better error message for non working clone calls.

    * zend_default_classes.c:
      And use things to throw an exception here

    * zend_default_classes.c:
      You shall not clone Exception instances

    * zend_reflection_api.c:
      You shall not clone reflection_xx instances

    * ZEND_CHANGES
      ZEND_CHANGES:
      Update

2003-10-25  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      Fugbix typo.

    * ZEND_CHANGES:
      s/Throwable/Printable: Exception has become an internal class since I
      initially documented interfaces.

2003-10-24  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES:
      - Fix typo

2003-10-24  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_execute_API.c:
      Revert accidental commit

    * ZEND_CHANGES
      zend_API.c
      zend_execute_API.c:
      Zend/ZEND_CHANGES

2003-10-23  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * Zend.dsp
      ZendTS.dsp:
      Add zend_interfaces.{c|h}.

2003-10-22  Ilia Alshanetsky  <ilia@prohost.org>

    * zend.c:
      Fixed bug #25922 (Crash in error handler when 5th argument is modified).

2003-10-22  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c
      zend_interfaces.c
      zend_interfaces.h:
      Impement userspace iterator interfaces and tests. See tests for details
      on the names.

    * zend.h
      zend_API.c
      zend_API.h
      zend_compile.c
      zend_compile.h
      zend_execute.c:
      Expand Interface C API.
      In short: zend_class_entry->interface_gets_implemented()  allows to modify
      the class entry of a class when an interface gets implemented.

    * zend_default_classes.c:
      The string conversion method should be named __toString()

2003-10-21  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * ZEND_CHANGES:
      Make this clear

2003-10-20  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES:
      - Add comment from Timm

2003-10-20  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * ZEND_CHANGES
      ZEND_CHANGES:
      Update

2003-10-19  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
      - Nuke const in function parameters. I just can't remember why this exists
      - and it seems no one else remembers either. It has no semantic meaning.

2003-10-18  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.h
      zend_API.h
      zend_compile.c
      zend_iterators.h:
      Fix class/iterator relationship & handling

    * zend_iterators.c:
      Fallback to old behavior until we have a default iterator that respects
      visibility we do the array trick.

    * zend_iterators.h:
      Change order: Optional rewind() to end of structure

2003-10-17  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * ZendTS.dsp:
      WS

    * zend_reflection_api.c:
      Show if a class/object is iterateable

    * ZendTS.dsp
      zend.h
      zend_API.h
      zend_default_classes.c
      zend_execute.c
      zend_iterators.c
      zend_iterators.h:
      Added c-api for iterators

    * zend_reflection_api.c:
      Fix showing final/abstract for classes

2003-10-17  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_ini_parser.y:
      Fixed formatting issue.

    * zend_alloc.c:
      Fixed if() condition.

2003-10-15  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_API.h:
      Add oo support function zend_class_implements()

    * zend_default_classes.c:
      Fix cast function

2003-10-14  Andi Gutmans  <andi@zend.com>

    * zend_mm.c:
      - Argh, the suffering copy&paste can cause

    * zend_alloc.c:
      - Fix compile problem.

    * zend_mm.c:
      - Fix the fix by making sure the new block is in the right free list.

2003-10-14  Stanislav Malyshev  <stas@zend.com>

    * zend_execute_API.c:
      The freed one is a hashtable - may matter if Hashtables are allocated
      differently

2003-10-14  Andi Gutmans  <andi@zend.com>

    * zend_mm.c:
      - Support merging free block which was created by reallocing to smaller
      - size. This should fix some performance issues. This code is still not
      - thoroughly tested.

2003-10-09  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_execute.c
      zend_language_parser.y:
      Allow foo::$bar()

2003-10-07  Rasmus Lerdorf  <rasmus@lerdorf.com>

    * Zend.m4:
      MFB bison configure test fix

2003-10-07  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix bug #17997 (Warning when switch & reference are combined)

    * zend_ini_parser.y:
      Fix the fix :)
      Not thoroughly tested, but appears to work fine

2003-10-07  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_ini_parser.y:
      Bugfix #25770 Segfault with PHP and bison 1.875

2003-10-05  Zeev Suraski  <zeev@zend.com>

    * zend_object_handlers.c:
      Remove unused callback

    * zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects_API.c:
      Remove redundant callback, simplify API

2003-10-05  Shane Caraveo  <shane@caraveo.com>

    * (BEFORE_HANDLERS_RESHUFFLE)
      zend_API.h:
      this little piggy broke lots of things...eg. _function_check_flag in
      reflection api.

2003-10-03  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_API.c:
      Fixed bug #24766 (strange result array from unpack())

    * zend.h:
      Bug #25738 (alloca() related problems on the Darwin platform)

    * zend_API.h:
      Ensure lval to have a *boolean* value.

2003-10-03  Jani Taskinen  <jani.taskinen@kolumbus.fi>

    * Zend.m4:
      Aligned configure help texts.

2003-09-30  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_compile.c:
      Remove redundant '\n'

2003-09-26  Hartmut Holzgraefe  <hartmut@php-groupies.de>

    * zend_alloc.c:
      signed/unsigned compiler warning fixes

2003-09-25  Georg Richter  <phpinfo@t-online.de>

    * zend_alloc.c:
      fixed compiler warning
      removed dead code

    * zend_hash.h:
      changed ulong to long to avoid compiler warnings (comparison between signed
      and unsigned)

2003-09-22  Ilia Alshanetsky  <ilia@prohost.org>

    * zend.c
      zend_language_scanner.l:
      Added missing format.

2003-09-20  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Add public array Reflection_Class::getDefaultProperties()

2003-09-18  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_builtin_functions.c:
      Nuke vars no longer needed

    * zend_builtin_functions.c
      zend_reflection_api.c:
      Go with studlyCaps

    * zend_reflection_api.c:
      Change tostring() into __toString() to match method name used in casting.

    * zend.c
      zend_operators.c:
      Fallback to default behaviour for unsupported object type conversions

    * zend_object_handlers.c
      zend_object_handlers.h
      zend_operators.c:
      - Allow partial type conversion support for objects.
      - Add support for object to string conversion from userspace by method
        __toString() and add a test.

    * zend_API.c:
      Add missing check

2003-09-17  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c
      zend_execute.c:
      Show name of missing function as typed

    * zend_default_classes.c:
      Use studlyCaps in exception class

    * zend_compile.c:
      Go with studlyCaps in error messages/backtrace/reflection output

2003-09-16  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      - Make it clear whether it is an interface or a class
      - Fix static properties

2003-09-15  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Revert - need to look for a better solution

    * zend_execute.c:
      Bugfix #25547

2003-09-15  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
      Simplify / fix

2003-09-14  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.c:
      Bugfix #25335

2003-09-14  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
      Commit 64-bit fixes to the standard operators
      by Ard Biesheuvel (abies@php.net)

2003-09-14  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.h:
      Bugfix #25528 (by Ard Biesheuvel)

2003-09-13  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_alloc.c:
      Fix warnings

2003-09-11  Stanislav Malyshev  <stas@zend.com>

    * tests/dtor_scope.phpt:
      add test

    * zend_execute_API.c:
      ws

    * zend_execute_API.c:
      Use scope from method, not from object

2003-09-11  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c:
      Use type instead of constant

2003-09-08  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Fix property inheritance where a derived class inherits a public property
      and owns it as an implicit public property already (noticed by Brad).

    * zend.c:
      Fix registering/derigistering of stdClass in ZTS and NON ZTS mode

2003-09-07  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Fix foreach() called with non array

2003-09-07  Stanislav Malyshev  <stas@zend.com>

    * Zend.m4:
      check for mach-o/dyld.h - needed for non-PHP ZE build

2003-09-06  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c:
      Disallow to changing the backtrace

    * zend_reflection_api.c:
      Add missing newline if no static methods are available

    * zend_reflection_api.c:
      - Internal functions shall be static
      - Fix more nesting

    * zend_reflection_api.c:
      Fix logic

    * zend_reflection_api.c:
      - Fix CS: {{{ / }}}
      - Fix static reflection_*::export()
      - Add class reflection_object which allows to show dynamic properties

    * zend_reflection_api.c:
      Use %s where it makes more sense

2003-09-05  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Simplify reflection_property::__constructor() and fix property factory

    * zend_reflection_api.c:
      - Don't use resorved words as variable names.
      - Improve several exception messages.
      - Fix Reflection_Property::_construct() / getDeclaringClass()

    * zend_reflection_api.c:
      Fix reflection_api::__construct() (noticed by Andrey)

    * zend_default_classes.c:
      Provide string casting for exceptions by calling toString()

2003-09-04  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_execute.c
      zend_object_handlers.c:
      Tests show updating consts must happen once at runtime (revert
      optimization).
      Add tests for static properties.

    * zend_reflection_api.c:
      Add reflection_class::getstaticproerties()

2003-09-03  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Partly revert and reintroduce hash table entries for the ctor.

    * zend_compile.c:
      Nuke unused variable, too

    * zend_compile.c:
      - Inheritance applies to __clone() too.
      - No need to add additional functions for the constructor.
        The handler uses the pointer as intended and doesn't look the the name.

    * zend_compile.c:
      Cannot turn a static property into a non static one and vice versa

    * zend_API.c
      zend_API.h
      zend_compile.c
      zend_default_classes.c:
      Fix handling of static properties initialized to arrays

    * zend_compile.c:
      Add missing error messages when violating static property inheritance
      rules.

    * zend_API.c
      zend_compile.c
      zend_execute.c
      zend_object_handlers.c:
      Fix static properties.

    * zend_compile.c:
      Allow redeclareing a protected property as public.

2003-09-03  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Revert bogus patch
      One must *never* use E_CORE_* error levels!

2003-09-03  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Clearly distinguish between Const, Static and Other members.

2003-09-02  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Fix error messages

    * zend_API.c:
      Allow redeclaring of protected properties as public (for internal classes).

    * zend_reflection_api.c:
      Use appropriate function for property name unmangling.

    * zend_reflection_api.c:
      Make these static as noticed by Andrey

    * zend_execute.c
      zend_object_handlers.c
      zend_objects.c:
      Synch/Unify error messages related to function/method calls

    * zend_compile.c:
      Fix error level

    * zend_API.c
      zend_compile.c:
      Currently we cannot support static ctor/dtor

    * zend_reflection_api.c:
      These are implicit properties as denoted by the flag. Dynamic properties
      only
      exist in one single object and currently reflection api is not capable of
      showing those.

2003-08-31  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Don't repeat first const count(consts) time

    * zend_reflection_api.c:
      Beautify output

    * zend_reflection_api.c:
      Add reflection_parameters, patch by Timm Friebe

    * zend_default_classes.c:
      Excluded chars < 32 when displaying string parameters that would obliterate
      output.

2003-08-31  Zeev Suraski  <zeev@zend.com>

    * zend_arg_defs.c
      zend_builtin_functions.c
      zend_modules.h:
      Attempt at fixing the linkage problem in Win32

2003-08-31  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Synch error message with other one to fix tests

    * zend_reflection_api.c:
      Check whether we may access tat union

    * zend.c:
      Revisited: Replace the non portable code by spprintf

    * zend_reflection_api.c:
      Using zend_spprintf should be faster here

    * zend.c
      zend.h
      zend_default_classes.c:
      Make vspprintf available as zend utility function. Use it in exception
      output.

2003-08-30  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c:
      Actually fetch the parameter

    * zend_default_classes.c
      zend_default_classes.h
      zend_execute.c
      zend_reflection_api.c:
      - Calling abstract methods should be a error for consistency reason.
      - So in reflection_api we use the reflection_exception again.

2003-08-30  Andi Gutmans  <andi@zend.com>

    * zend_default_classes.c:
      - PLEASE stop commiting ^M's

2003-08-30  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c:
      Even though it is ignored this should be correct

    * zend_default_classes.c:
      Add frame numer and finally display stack trace in the message.

    * zend_default_classes.c:
      Add exception::traceAsString() and exception::toString()

    * zend_reflection_api.c:
      fci.function_table & fci.function_name are not needed since we use
      zend_fcall_info_cache

    * zend_reflection_api.c:
      Be precise

    * zend_reflection_api.c:
      Actually using fcc would be a good idea

    * zend_default_classes.c
      zend_default_classes.h
      zend_execute.c:
      - The compiler can't detect all abstract function calls so we need to
      check.

    * zend_default_classes.c:
      Make those final (see comment)

2003-08-29  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_API.h:
      - Add zend_merge_properties() which is designed to serve *_fetch_object().
      - Explain drawbacks of object_and_properties_init and
      zend_merge_properties.

    * zend_reflection_api.c:
      - Use zend_fcall_info_cache in invoke() to improve speed.

2003-08-29  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix a problem in implicit public properties and inheritance

2003-08-29  Sascha Schumann  <sascha@schumann.cx>

    * zend_hash.c:
      improve a number of zend_debug format strings

2003-08-29  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_builtin_functions.c
      zend_builtin_functions.h
      zend_default_classes.c:
      Need to tell zend_fetch_debug_backtrace() whether to skip top function or
      not.

2003-08-28  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c:
      Add public read access to protected

    * zend_default_classes.c
      zend_default_classes.h:
      Add zend_throw_exception_ex() which allows to format exception messages.

    * zend.c:
      Classe tables work this way

    * zend_builtin_functions.c
      zend_builtin_functions.h
      zend_default_classes.c:
      - Split debug_backtrace() into lowlevel c function and php function wrapper
      - Add trace property to default method based on new
      zend_fetch_debug_backtrace

2003-08-28  Sascha Schumann  <sascha@schumann.cx>

    * zend.h:
      older gccs don't understand attribute((format)) on function pointers

    * zend.h:
      ZEND_GCC_VERSION should always be defined to a number so we can use
      simple comparisons all the time.

    * zend.h
      zend_alloc.c
      zend_builtin_functions.c
      zend_compile.c
      zend_execute.c:
      Add format attribute to a number of functions
      
      Kill a few warnings

    * zend.h
      zend_alloc.h:
      cleanup & centralize ZEND_GCC_VERSION and ZEND_ATTRIBUTE_MALLOC so that
      they can be used by downstream applications

    * zend_alloc.h:
      Enable attribute((malloc)) for GCC 2.96

    * zend_alloc.h:
      GCC 2 does not know about malloc yet.

    * zend_alloc.h:
      provide attribute((malloc)) where appropiate

2003-08-27  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Nuke unused variable

    * zend_reflection_api.c:
      Fix reflection_class::newInstance()

2003-08-25  Jani Taskinen  <sniper@iki.fi>

    * zend.h:
      - Fixed bug #25240 (spaces before pre-processor directives)

2003-08-24  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Add missing check

    * zend_API.c:
      Fix memory source of string duplication for non internal properties

    * zend_API.c
      zend_API.h
      zend_compile.c
      zend_default_classes.c
      zend_execute_API.c
      zend_variables.c
      zend_variables.h:
      - Provide appropriate way to destroy internal zval's.
      - Allow internal zval's of type string and disallow complex types.
      - Define the default string for extensions at class level instead of ctor.

    * zend_API.h
      zend_compile.h
      zend_reflection_api.c:
      Don't identify alias'ed functions

2003-08-24  Zeev Suraski  <zeev@zend.com>

    * zend_API.c:
      Use ""'s if you want empty strings.  We want to crash on errors.

    * zend_compile.c:
      Use pemalloc()

2003-08-24  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Allow NULL, too

2003-08-24  Zeev Suraski  <zeev@zend.com>

    * zend_API.c:
      Get rid of more ^M's - Marcus, please check your CVS client!

    * zend_default_classes.c:
      Get rid of more ^M's

    * zend_compile.c:
      line endings fix

    * zend_execute.c:
      Never, ever, overwrite the refcount element of a connected zval!

2003-08-24  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Add dedicated reflection_exception

    * zend_default_classes.c
      zend_default_classes.h:
      Allow to throw instances of classes derived from exception

    * zend.c
      zend_default_classes.c
      zend_default_classes.h
      zend_execute.h
      zend_execute_API.c:
      - Provide a unified way to display uncaught exceptions, which shows
        file/line/message info if possible.
      - Add zend_eval_string_ex() to be able to handle exceptions in eval'd
      code.
      - Use above function to fix memleaks in CLI.

    * zend_reflection_api.c:
      Make invoke() work

    * zend_reflection_api.c:
      zend_parse_parameters 'O' works the way we need here

    * zend_reflection_api.c:
      Not needed

    * zend_default_classes.c:
      Make use method macros

    * zend_API.h:
      One of PPP is needed, too

    * zend_reflection_api.c:
      - Add Reflection_Function::isAlias
      - Use ZEND_ME/ZEND_METHOD
      - Fix static entries

    * zend_API.h
      zend_compile.h:
      - Add fn_flag ZEND_ACC_ALIAS
      - Unify way of function_entry generation by new macro ZEND_FENTRY

    * zend_API.c:
      Fix fn_flags handling

    * zend_API.c
      zend_API.h
      zend_default_classes.c:
      Add property read code and use that in default exception class

2003-08-23  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c
      zend_default_classes.h
      zend_reflection_api.c:
      Allow zend_throw_exception() to also set the exception code

    * zend_default_classes.c:
      Exception has 4 protected default properties (message,code,file,line).
      They are all initialized at c-level constructor correctly.

    * zend_API.c
      zend_API.h
      zend_compile.c
      zend_compile.h:
      Internal classes can now have default properties.

    * zend_reflection_api.c:
      Show ctor/dtor information and those don't return anything

    * zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c:
      - Flag ctor/dtor methods
      - Use this to prevent memleaks when an exception gets thrown in ctors.

    * zend_default_classes.c:
      Make exception code more robust

2003-08-22  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_builtin_functions.c
      zend_constants.h:
      Replace *magic number* with a much nicer define.

    * zend_builtin_functions.c:
      Set 2147483647 as the module number of user defined constants
      Fixed a few bugs and cleaned up get_defined_constants().

2003-08-21  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_default_classes.c
      zend_default_classes.h
      zend_reflection_api.c:
      Add function 'zend_throw_exception(char *message, int duplicate
      TSRMLS_DC);'
      to provide an easy way to throw exceptions for extension developers.

    * zend_API.c:
      If ce not given than any object would do

    * zend_API.c:
      Paramspec 'O' / zend_parse_method_params(): only if given check the class
      type

2003-08-20  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c:
      adhere to silence

2003-08-20  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_alloc.c:
      Fix counting number of leaks

2003-08-19  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_execute.c:
      fix build

2003-08-18  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_ini.h:
      linkage for C++

2003-08-18  Zeev Suraski  <zeev@zend.com>

    * ZendTS.dsp
      zend_execute.c
      zend_execute_locks.h:
      Prevent access to internal engine functionality

    * zend.h
      zend_alloc.c
      zend_compile.h
      zend_execute.c:
      - Improve tracking
      - Fix several overloading issues

    * zend_API.c
      zend_alloc.h
      zend_hash.c
      zend_hash.h
      zend_ts_hash.c
      zend_ts_hash.c
      zend_ts_hash.h
      zend_ts_hash.h:
      Improve tracking

    * zend_compile.c:
      ws

2003-08-17  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.h
      zend_builtin_functions.c
      zend_execute.c
      zend_object_handlers.c
      zend_operators.c
      zend_reflection_api.c:
      Fix warnings

2003-08-17  Sascha Schumann  <sascha@schumann.cx>

    * zend.h:
      One bit fields need to be unsigned, otherwise there is no storage for
      the sign bit
      
      "A signed bit field has a length of 1 bit."

    * zend_API.h:
      explicitly cast size_t to zend_uint to avoid warnings on 64 bit platforms.

2003-08-17  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Remove unnecessary if

    * zend_execute.c:
      Put the code where it belongs - fixes a warning and confusion

    * zend_compile.c
      zend_execute.c:
      Implement a TBD: JMP to the end of foreach

    * zend_compile.c:
      WS

    * zend_API.c:
      - Show class names in error messages when dealing with methods
      - Mark class as abstract if it gets an abstract method

2003-08-16  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_API.h
      zend_reflection_api.c:
      Simplify abstract method declaration

    * zend_object_handlers.h:
      WS

2003-08-15  Sascha Schumann  <sascha@schumann.cx>

    * zend_execute.c
      zend_object_handlers.c:
      Restrict scope of inline functions to compile unit
      
      Submitted by: Jason Greene <jason@inetgurus.net>

2003-08-13  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects_API.c:
      Add missing entry

    * zend_API.c:
      - Show classes in case of methods
      - Using sprintf here was a bad idea

2003-08-12  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c:
      Remove bogus patch - the number of elements is unrelated

2003-08-12  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c:
      Remove bogus patch - the number of elements is unrelated

2003-08-12  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c:
      Remove bogus patch - the number of elements is unrelated

2003-08-12  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c:
      Remove bogus patch - the number of elements is unrelated

2003-08-12  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c:
      Remove bogus patch - the number of elements is unrelated

2003-08-11  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_hash.c
      zend_hash.h:
      Bugfix 21918

2003-08-11  Masaki Fujimoto  <masaki-f@fides.dti.ne.jp>

    * Zend.m4
      flex.skl
      zend_compile.c
      zend_globals.h
      zend_highlight.c
      zend_language_scanner.h
      zend_language_scanner.l
      zend_multibyte.c
      zend_multibyte.h:
      - added script encoding support to Zend Engine 2.
        this enables ZE2 to gracefully parse scripts written in UTF-8 (with
      BOM),
        UTF-16, UTF-32, Shift_JIS, ISO-2022-JP etc... (when configured with
        '--enable-zend-multibyte' and '--enable-mbstring')

2003-08-10  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Bugfix #24637 __destruct not called

2003-08-09  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * zend_compile.c:
      Fix segfault when a referenced parameter is specified with typehint.
      Result of the node will never be used because verify_instanceof handler
      has
      been eliminated.

2003-08-09  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects.c:
      Precise destructor errors

2003-08-07  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * tests/bug21478.phpt:
      Add missing right parensis

2003-08-07  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c:
      Clarify use of original_function_state_ptr

2003-08-07  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute_API.c:
      - Fix warnings
      - Fix code

2003-08-06  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c:
      clarify :)

2003-08-05  Jani Taskinen  <sniper@iki.fi>

    * zend_execute_API.c:
      Fix the build

2003-08-05  Zeev Suraski  <zeev@zend.com>

    * zend_API.h
      zend_execute_API.c
      zend_reflection_api.c:
      Try to put an end to the endless number of call_user_function variants.
      zend_call_function() now takes a structure that should contain all of the
      necessary information.  If further information is necessary in the future,
      then we'll be able to add it without having to introduce a new function.
      
      As for caching - the 2nd, optional argument is a struct that can hold all
      of the information that's necessary to invoke the function, including its
      handler, scope and object it operates on (if any).  Note that you may only
      use a cache if the arguments you provide to zend_call_function() are
      identical to the ones of the last call, except for the argument and return
      value information.
      
      
      The recently introduced fast_call_user_function() was removed
      
      I fixed most of the places that used fast_call_user_function() to use
      caching
      but there are still some that need to be fixed (XML and reflection)

2003-08-05  Stanislav Malyshev  <stas@zend.com>

    * tests/bug24699.phpt:
      fix syntax

    * zend_execute_API.c:
      remove stack clean - it makes trouble

2003-08-04  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Fix ZTS

    * zend_execute_API.c:
      Nuke unused variables

    * zend_reflection_api.c:
      Add function/method parameter reflection

2003-08-04  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute_API.c
      tests/bug23104.phpt:
      Fixed bug #23104 (hash position of static arrays not being reset)

2003-08-04  Stanislav Malyshev  <stas@zend.com>

    * zend_execute_API.c:
      oops. forgot function

    * zend_execute_API.c:
      fix crash #24842

    * zend_compile.c:
      fix leaks: bug #24831

    * zend_execute.c:
      use get_obj_zval_ptr

    * tests/bug24884.phpt:
      add test

    * zend_execute.c:
      Fix #24884 - clone $this

2003-08-04  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Simplify code using XOR

    * zend.h:
      Add logical XOR, proves to be quite useful lately

    * zend_opcode.c:
      This check shouldn't be necessary

2003-08-03  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_opcode.c:
      Fix crash

    * zend_compile.c:
      Fix test and add missing initialization

2003-08-03  Zeev Suraski  <zeev@zend.com>

    * zend_API.c:
      Ensure functions have a valid access level

    * zend_API.c:
      Default to public

2003-08-03  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Not needed, will be copied from ptr->flags later

    * zend_builtin_functions.c:
      Add missing arg info

2003-08-03  Moriyoshi Koizumi  <moriyoshi@at.wakwak.com>

    * tests/bug24635.phpt
      tests/bug24699.phpt:
      Style & WS fixes

2003-08-03  Zeev Suraski  <zeev@zend.com>

    * (BEFORE_ARG_INFO)
      zend_API.c:
      No need for this initialization - this function initializes all of the
      elements of zend_internal_function

    * (BEFORE_ARG_INFO)
      zend_execute.c:
      Clean up.  extended_value can only contain either ZEND_UNSET_DIM or
      ZEND_UNSET_OBJ.

    * (BEFORE_ARG_INFO)
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c:
      Generalize fetch_class

2003-08-02  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Initialize all struct members: Necessary for reflection

    * zend_reflection_api.c:
      Show interfaces

2003-08-02  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_API.c:
      fix usage of instanceof here too

2003-08-02  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Fix warning

2003-08-01  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_API.c:
      better fix...

    * zend_API.c:
      Fix "O" format for zend_parse_parameters

2003-07-31  Zeev Suraski  <zeev@zend.com>

    * zend_API.c:
      Use instanceof_function()

    * zend_compile.c
      zend_execute.c:
      Finish the array overloading patch

    * zend_execute.c:
      Cleanup

2003-07-31  Andi Gutmans  <andi@zend.com>

    * zend_hash.c:
      - Fix logic. It was the wrong way around.

2003-07-30  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_hash.c:
      - Fix problem with hash when updating same bucket with data of different
        sizes one after another.
      - Fix number of arguments to read_dimension.

2003-07-30  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
      Get rid of an opcode

    * zend_compile.c
      zend_execute.c:
      Support overloading of $foo["bar"] += "baz"

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h:
      Improve array overloading - support unset($foo["bar"])

    * zend_compile.h:
      Remove garbage

    * zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_compile.h
      zend_modules.h:
      Add exec_finished() callback for modules - this is the last place where the
      modules may touch the symbol table reliably

2003-07-29  Ilia Alshanetsky  <ilia@prohost.org>

    * tests/bug22836.phpt:
      Test case for bug #22836.

2003-07-29  Jani Taskinen  <sniper@iki.fi>

    * zend.c:
      Remove the obfuscation caused by the double "#ifdef ZTS"

2003-07-27  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c:
      fix compare

    * zend_compile.c:
      use zend_binary_strncasecmp

    * zend_execute_API.c:
      change shutdown order so that dtors would coexist with object error
      handlers

    * zend_execute.c:
      clean the right one

    * zend_execute_API.c:
      make shutdown more granular so in case some dtor goes ape we still
      can shut down cleanly

    * zend_compile.c
      zend_execute.c
      zend_objects.c:
      make clone and throw coexist peacefully

    * tests/bug24635.phpt
      tests/bug24699.phpt:
      add test

    * zend_execute.c:
      fix #24635: clean hash before putting into cache

    * zend_language_scanner.l:
      fix crash #24550

    * zend_compile.c
      zend_constants.c:
      fix leaks with class constants (bug #24699)

    * zend_compile.c:
      make __clone call case insensitive, just as other calls are

2003-07-24  Jani Taskinen  <sniper@iki.fi>

    * tests/bug19859.phpt
      tests/bug20240.phpt
      tests/bug20242.phpt
      tests/bug21478.phpt
      tests/bug21888.phpt
      tests/bug22725.phpt
      tests/bug24436.phpt:
      cleanup (CS+ws)

2003-07-24  Zeev Suraski  <zeev@zend.com>

    * tests/bug24436.phpt:
      Fix expectations :)

    * zend_execute.c:
      Fix logic and comments in ASSIGN_DIM

    * zend_compile.c:
      Fix another HANDLE_NUMERIC bug.  Looks like you opened Pandora's box,
      Sterling ;)

    * zend_builtin_functions.c:
      Fix each() binary safety for keys

    * zend_execute.c:
      Fix assignments to numeric array indices

    * zend_compile.c:
      Remove useless code

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y:
      Support references in foreach()
      Syntax:
        foreach ($arr as &$val)
        foreach ($arr as $key => &$val)

    * zend_execute.c:
      Fix binary safety in foreach() keys (fixes bug #24783)

    * zend.c:
      Make print_r() binary safe with keys

2003-07-23  Stanislav Malyshev  <stas@zend.com>

    * zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_globals.h
      zend_opcode.c:
      Remove namespace leftovers

2003-07-23  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c
      zend_hash.h:
      Go back to ZE1-like code

2003-07-23  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_reflection_api.c:
      Fix segfault. Patch by Timm Friebe <thekid@thekid.de>.

2003-07-22  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_hash.h:
      Fix for the moment

2003-07-22  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_hash.c
      zend_hash.h
      zend_operators.c
      zend_operators.h:
      Improve infrastructure of numeric handling of elements in symbol tables.
      
      When you want to work with a symbol table, and you don't know whether you
      have a numeric ("string that looks like a number") or a string element in
      your hands, use zend_symtable_*() functions, in place of zend_hash_*()
      functions.

    * zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects_API.c:
      Fix isset()/empty() for non-trivial object elements
      (API change - read_property now accepts an extra element)
      Fixes bug #24436

2003-07-21  Zeev Suraski  <zeev@zend.com>

    * zend_object_handlers.c:
      Fix bug #24499

    * zend_execute.c:
      Revert fix for #24729, and refix

2003-07-21  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Go with a better fix for #24729

2003-07-21  George Schlossnagle  <george@omniti.com>

    * zend_API.h:
      reverted at Andi's request.  replaced with more generic wrapper.

2003-07-20  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Bugfix #24729  = new ; causes crash when  is not set

2003-07-20  George Schlossnagle  <george@omniti.com>

    * zend_reflection_api.c:
      should nt here

2003-07-20  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_reflection_api.c:
      Fix warnings and whitespace in output

    * zend_reflection_api.c:
      Add support for instances in Reflection_Class.

2003-07-20  George Schlossnagle  <george@omniti.com>

    * zend_reflection_api.c:
      removed references to smart_str, replaced with private string management
      function.  When snprintf is integrated into the engine, string_printf
      should be altered to use that.

2003-07-20  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects_API.c:
      More informative errors here and these are real core errors

    * zend_execute.c:
      Fix uncloneable objetcs

2003-07-20  George Schlossnagle  <george@omniti.com>

    * zend_reflection_api.c:
      more of Timm's implementation.

2003-07-20  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_hash.c
      zend_hash.h:
      Make it a macro

2003-07-19  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_hash.c:
      This is meant to be used in for(;has_more;next)

    * zend_hash.c
      zend_hash.h:
      Add missing function to ease implementations

2003-07-19  Jani Taskinen  <sniper@iki.fi>

    * zend.h:
      Fix the HPUX alloca fix as suggested by Sascha

2003-07-19  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects.c
      zend_objects.h:
      Shuffle code to ease writing clone handlers

2003-07-19  Andi Gutmans  <andi@zend.com>

    * zend.h:
      - Don't use alloca on HP-UX (Moriyoshi Koizumi <moriyoshi@at.wakwak.com>)

2003-07-16  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix bug in the verification of interface-function implementation

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
      More cleanup for assign-op handling of objects

    * zend_alloc.c:
      Fix warning

2003-07-12  Andi Gutmans  <andi@zend.com>

    * zend_API.c:
      - WS

2003-07-11  Andi Gutmans  <andi@zend.com>

    * zend_API.c:
      - Add support for Z in zend_parse_parameters(). It will allow the extension
      - to retreive the zval **, thus allowing it to use the convert_to_*_ex()
      - family of functions to do type conversions without effecting the value
      in
      - the engine itself. (Josh Fuhs <fuhs@purdue.edu>)

2003-07-08  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      initial refactoring for assign-op handling of objects

2003-07-07  Zeev Suraski  <zeev@zend.com>

    * zend_API.c
      zend_API.h
      zend_compile.c
      zend_compile.h:
      Rework zend_do_declare_property and related code into one code base

    * zend_API.c:
      Fix bug

    * zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects_API.c:
      Add get_dim callback

    * zend_execute.c:
      Fix naming convention

2003-07-07  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_execute.c:
      - Help Zeev fixing ghosts :)

2003-07-07  Zeev Suraski  <zeev@zend.com>

    * zend_object_handlers.c
      zend_object_handlers.h:
      whitespace

    * zend_objects_API.c:
      Fix & whitespace

    * zend_object_handlers.c:
      fixlet

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h:
      Initial support for overloading of array syntax for objects (very initial)

2003-07-06  George Schlossnagle  <george@omniti.com>

    * zend_API.c
      zend_API.h:
      add convenience functions or adding class properties.  Ok'd for commit by
      Andi.

2003-07-04  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c
      zend_mm.c
      zend_mm.h:
      - Add heap to memory manager. This should improve performance.
      - Enabling it by default so that it gets tested. We should decide before
      beta 2 if we want to revert back to malloc or not.
      - Thanks to Sebastian for benchmarking it

2003-07-04  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_reflection_api.c:
      2 * TSRMLS_FETCH() -> 1 * TSRMLS_DC

2003-07-04  George Schlossnagle  <george@omniti.com>

    * zend_reflection_api.c:
      ws fix

2003-07-03  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Allow final private methods

2003-07-03  George Schlossnagle  <george@omniti.com>

    * zend_reflection_api.c:
      win build fixes  (Rob Richards)

    * zend_reflection_api.c:
      can't forget Andrei

2003-07-03  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c
      zend_execute.c:
      enable Classname() constructor to be called via parent::__constructor()

    * tests/bug19859.phpt:
      add test for Bug #19859

    * zend_API.c
      zend_execute_API.c:
      Fix bug #19859 - allow fast_call_user_function to support __call

    * zend_builtin_functions.c:
      fix the get_parent_class fix

2003-07-03  George Schlossnagle  <george@omniti.com>

    * zend_reflection_api.c:
      more of Timm's patches, and mod authors line to give credit where credit is
      due.

2003-07-02  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects.c:
      Temporairy solution to overcome shutdown propbelms with objects that have
      hidden destructors.

    * zend_objects.c:
      Reorganize this a bit to ensure the object memory is destructed before
      showing the error.

    * zend_builtin_functions.c:
      Bug #24399: is_subclass_of(): fix memleak, too

2003-07-02  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Throughly fix scoping change.  Fixes, among other things, bug #24403

2003-07-02  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_globals.h:
      - Nuke CG(in_clone_method)

2003-07-02  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix for bug #22367.
      Heads up - this will break syntactical compatiblity, return($foo) will
      not work with functions that return references - return $foo should be
      used
      instead.  It never worked well before, and caused all sorts of odd bugs.
      It *might* be possible to support this specifically, albeit unlikely

2003-07-02  Sterling Hughes  <sterling@bumblebury.com>

    * zend_execute_API.c:
      optimize the case where the object is really a class name, as we don't need
      to set EX(object) here.

    * zend_execute_API.c:
      Timm Friebe points out that object detection should be done regardless of
      the function pointer

2003-07-02  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects.c:
      Finally fix property cloning and fix the tests accordingly.
      

2003-07-02  Sterling Hughes  <sterling@bumblebury.com>

    * zend_builtin_functions.c:
      Fix bug #24445

2003-07-01  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_objects.c:
      Fix __clone().
      

    * tests/bug20240.phpt:
      Use both destructor and shutdown

    * zend_execute_API.c:
      small bugfix

    * tests/bug24436.php
      tests/bug24436.phpt:
      Rename  test to correct  extension

    * zend_execute.c:
      __clone might not be defined

    * zend_execute.c:
      Fix __clone visibility

    * zend_object_handlers.c
      zend_object_handlers.h
      zend_objects.c:
      Fix destructor visibility

2003-07-01  Derick Rethans  <d.rethans@jdimedia.nl>

    * tests/bug24436.php:
      - Added test for bug #24436

2003-07-01  George Schlossnagle  <george@omniti.com>

    * zend_reflection_api.c:
      Timm Friebe's patches for code celanup and additional functions.

2003-07-01  Jani Taskinen  <sniper@iki.fi>

    * tests/.cvsignore
      tests/bug21478.phpt
      tests/zend2.php
      tests/zend2.php.txt:
      Missing .cvsignore, broken test, renamed zend2.php -> zend2.php.txt

2003-07-01  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_reflection_api.c:
      ZTS fixes.

2003-07-01  George Schlossnagle  <george@omniti.com>

    * zend_reflection_api.c:
      more incremental changes.  add anything that needs a class factory.

    * zend_reflection_api.c:
      all the easy parts of Reflection_Class

2003-06-30  Shane Caraveo  <shane@caraveo.com>

    * zend_operators.h:
      this fixes including this header in a c++ file (vs6)

2003-06-30  Sterling Hughes  <sterling@bumblebury.com>

    * zend_compile.c:
      nuke "main" as a reserved keyword

2003-06-30  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_API.c
      zend_compile.c
      zend_constants.c
      zend_execute.c
      zend_execute_API.c
      zend_mm.c
      zend_opcode.c
      zend_reflection_api.c:
      - ZE coding style requires if ( instead of if(

2003-06-30  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_reflection_api.c:
      ZTS fixes. Remove unused local variables.

2003-06-30  George Schlossnagle  <george@omniti.com>

    * Makefile.am
      Zend.dsp
      ZendTS.dsp
      zend_default_classes.c
      zend_reflection_api.c
      zend_reflection_api.h:
      added support for Reflection_Function, the first part of
      the reflection api

2003-06-30  Sterling Hughes  <sterling@bumblebury.com>

    * zend_builtin_functions.c:
      move the check down a little so it catches all cases

    * zend_builtin_functions.c:
      Fix bug #24399 from an excellent test case by edin

2003-06-30  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Semantically it's a refcount increase, not a lock...

    * zend_execute.c:
      Fix 'global' implementation (fixes, at least, bug #24396

2003-06-30  Sterling Hughes  <sterling@bumblebury.com>

    * zend_operators.c:
      revert back the optimization for now.

2003-06-29  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_object_handlers.c:
      Fixed bug #24279 (__get() crash when no value is returned)

2003-06-29  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      Remove namespace references.

2003-06-29  Sterling Hughes  <sterling@bumblebury.com>

    * zend_operators.c:
      Very simple, but very effective optimization.  Provides a signifigant speed
      improvement to matches done via '=='.  This checks that the lengths of two
      strings are equal before performing a memcmp() on them.

2003-06-23  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix crash :)

2003-06-23  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      FIx leak

2003-06-22  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_language_parser.y:
      Fix complex expressions for class names in NEW

    * zend_language_parser.y:
      Simplify

2003-06-21  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_language_parser.y:
      WS

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      Add final classes

2003-06-16  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      no need to init zval - assignment will init

    * zend_execute.c:
      Fix bug #22592 - cascading assignments to string offsets

    * zend_constants.c:
      support for self:: and parent:: constants

    * zend_builtin_functions.c:
      fix lambda function static vars (related to #17115)

2003-06-15  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_constants.c:
      Fix ZTS build.

2003-06-15  Stanislav Malyshev  <stas@zend.com>

    * zend.c:
      Fix bug #23279 - exception handler exits after first function call

    * zend_execute_API.c:
      No need to duplicate code - zend_get_constant() knows to
      handle class constants now

    * zend_execute_API.c:
      Fix bug #18872 - Improper handling of class constants used as default
      function argument values

    * zend_constants.c:
      set ending \0 for string

    * zend_compile.c
      zend_constants.c
      zend_language_parser.y:
      Fix bug #23384 - static class::constant constants should now
      work in static & array expressions.

    * zend_execute_API.c:
      Fix bug #21800 - initialize opcode handlers in interactive mode

2003-06-14  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_hash.c:
      ecalloc doesn't return NULL

    * zend.c:
      Bugfix #24182: va_arg macro error in Zend/zend.c

2003-06-10  Jani Taskinen  <sniper@iki.fi>

    * zend_multiply.h:
      - Missing $Id$ tag

2003-06-10  James Cox  <james@imajes.info>

    * acconfig.h
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.c
      zend_compile.h
      zend_config.nw.h
      zend_config.w32.h
      zend_constants.c
      zend_constants.h
      zend_default_classes.c
      zend_default_classes.h
      zend_dynamic_array.c
      zend_dynamic_array.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_execute_locks.h
      zend_extensions.c
      zend_extensions.h
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_ini.c
      zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.h
      zend_ini_scanner.l
      zend_istdiostream.h
      zend_language_parser.y
      zend_language_scanner.h
      zend_language_scanner.l
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_mm.c
      zend_mm.h
      zend_modules.h
      zend_multiply.h
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects.c
      zend_objects.h
      zend_objects_API.c
      zend_objects_API.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_qsort.c
      zend_qsort.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_static_allocator.c
      zend_static_allocator.h
      zend_stream.c
      zend_stream.h
      zend_ts_hash.c
      zend_ts_hash.h
      zend_types.h
      zend_variables.c
      zend_variables.h:
      updating license information in the headers.

2003-06-09  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_execute_API.c:
      Fix for Bug #23951

2003-06-09  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      remove NS leftover

2003-06-09  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      Fix bogus implicit declarations of properties (squash bug #23671)

2003-06-09  Stanislav Malyshev  <stas@zend.com>

    * zend_API.c
      zend_execute_API.c:
      Support 'self' and 'parent' in call_user_func()

2003-06-09  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix indirect reference calls to bogus function names

2003-06-09  Jani Taskinen  <sniper@iki.fi>

    * zend_builtin_functions.c:
      ws

2003-06-08  Zeev Suraski  <zeev@zend.com>

    * zend_object_handlers.c:
      Fix casing issues in access level checks

    * zend.c
      zend_compile.c
      zend_compile.h:
      Nicer handling of protected/private members in print_r()

    * zend_execute.c:
      Fix handling of object property assignments in switch expressions
      (bug #23925)

    * zend_builtin_functions.c:
      Fix set_error_handler()

2003-06-06  Sascha Schumann  <sascha@schumann.cx>

    * zend_multiply.h:
      mfb #24025 fix

2003-06-04  Stanislav Malyshev  <stas@zend.com>

    * zend.c:
      fix non-ZTS build

2003-06-04  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend.c:
      Fix segfault. Again.

2003-06-04  Stanislav Malyshev  <stas@zend.com>

    * zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_object_handlers.c:
      rm namespace leftovers

2003-06-04  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend.c:
      Fix segfault. #Hopefully not a Voodoo Fix[TM].

2003-06-02  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend.c
      zend_execute.h:
      Leftover.

2003-06-02  Stanislav Malyshev  <stas@zend.com>

    * zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l
      zend_object_handlers.c
      zend_opcode.c:
      MEGA-patch: namespaces are R.I.P.

2003-06-01  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * tests/zend2.php:
      No nested classes

    * tests/bug20240.phpt
      tests/bug20242.phpt
      tests/bug21478.phpt
      tests/bug21888.phpt
      tests/bug22725.phpt:
      Add some ZE2 bug tests

    * zend_opcode.c:
      Bugfix #23670: implements and extends cause Apache 2 crash

    * zend_constants.c:
      Do it correct always

    * zend_compile.h:
      Defining it once is enough

2003-05-31  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend.c:
      Fix init shutdown

2003-05-31  Sterling Hughes  <sterling@bumblebury.com>

    * zend_compile.c
      zend_execute.c:
      revert the function call caching patch until a new solution is decided
      upon.

2003-05-31  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_constants.c:
      Fix constants (noticed by David Brown <dave@codewhore.org>)

    * zend_constants.c:
      c->name_len already contains the '\0'

2003-05-30  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      fix crash on exceptions when return value of the inside function is used

2003-05-29  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c
      zend_language_parser.y:
      Fix ~ operator in class constants.

    * zend_compile.c
      zend_compile.h
      zend_operators.c:
      Faster interface inheritance & faster inheritance checks

    * zend_language_scanner.l:
      CS

2003-05-29  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_compile.c:
      Fix Bug #23285 (Potential Stack Overflow in zendlex).

2003-05-28  Sterling Hughes  <sterling@bumblebury.com>

    * zend_alloc.c:
      no reason to do this at runtime

    * zend_compile.c
      zend_execute.c:
      Cache function call lookups with loops (store in a temporary variable on
      the
      result opline).
      Assuming lazy concensus on message that GeorgeS sent to the list last week

2003-05-27  Sterling Hughes  <sterling@bumblebury.com>

    * zend.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_operators.c:
      Assume lazy consensus regarding the cast_object() patch.  *Only*
      implemented
      from a internals perspective.  This callback has been very useful for both
      ext/mono and ext/simplexml

2003-05-26  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_language_scanner.l:
      Add pseudo constant __METHOD__ to easily report namespace::class::method.
      

2003-05-23  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.h:
      Revert to sizeof()

2003-05-23  Sterling Hughes  <sterling@bumblebury.com>

    * zend_execute.c
      zend_hash.c
      zend_operators.c
      zend_operators.h:
      move HANDLE_NUMERIC() from the hash table implementation upstream to the
      places that actually need to use it.

2003-05-22  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      No need to copy here unless implicit_clone is active (noticed by rob)

2003-05-21  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c
      zend_builtin_functions.c
      zend_constants.c
      zend_object_handlers.c:
      Make use optimized string lowering

    * zend_operators.c
      zend_operators.h:
      Use same parameter order as strcpy()

    * zend_API.c
      zend_execute.c
      zend_execute_API.c
      zend_operators.c
      zend_operators.h:
      Make zend_str_tolower_copy() a copy function (like stccpy).
      Supply a dup version (like estrdup).
      Fix tolower() handling.

2003-05-21  Jani Taskinen  <sniper@iki.fi>

    * zend_builtin_functions.c:
      Fixed bug #23619 (set_error_handler() registered handler not called for
      object instances). (Jani, waboring@qualys.com)

2003-05-21  Sterling Hughes  <sterling@bumblebury.com>

    * zend_operators.c:
      optimize loops.  The check only exists for integers because that's the more
      common optimization, and you actually lose performance if you check for
      a double too (wierd but true).

    * zend_mm.h:
      add some logic to detect zend_mm, which is really only useful when thread
      safety support is enabled.

    * zend_mm.h:
      leave this off until its more ready/stable
      php5 actually beats php4.3.* in my benchmarks now
      

    * zend_API.c:
      use zend_str_tolower_copy()

    * zend_execute.c:
      Bottom drawer optimization to avoid this comparison, but this OP is
      executed
      quite often (all of the fetch_* ops)

2003-05-20  Sterling Hughes  <sterling@bumblebury.com>

    * zend_operators.c:
      bah humbug, use the pointer based version, which turns out to be an
      instruction
      faster

    * zend_operators.c:
      use pointer arithmetic for the normal zend_str_tolower()

2003-05-20  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      No need to copy the zval unless __clone() is called

2003-05-20  Sterling Hughes  <sterling@bumblebury.com>

    * zend_operators.c:
      make this faster and sexier

    * zend_execute.c:
      use the new zend_str_tolower_copy() function

    * zend_operators.c:
      doesn't need to be register

    * zend_execute_API.c
      zend_operators.c
      zend_operators.h:
      optimize the lookups by avoiding a copy and then another pass
      
      Naked Dancing Girls should be given to: Myself, Zeev, Marcus,
      and George Schlossnagle (in no particular order)

    * zend_API.h
      zend_execute_API.c:
      add fast_call_user_function()

2003-05-20  Hartmut Holzgraefe  <hartmut@php-groupies.de>

    * zend_API.h
      zend_constants.h
      zend_operators.h:
      C++ compile fixes

2003-05-19  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute.c:
      Fix exception memleak

2003-05-19  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c
      zend_execute.c:
      fix __clone

2003-05-12  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_execute_API.c:
      One function  call is enough

2003-05-08  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Inheritance fix

2003-05-07  Edin Kadribasic  <edink@proventum.net>

    * zend_compile.c:
      Reverting Marcus' incomplete patch which broke the build.

2003-05-07  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_compile.c:
      Inheritance fixes

2003-05-04  Marcus Boerger  <marcus.boerger@post.rwth-aachen.de>

    * zend_API.c:
      Fix namespace issue: Only CG is needed here

    * zend_API.c
      zend_API.h:
      Allow functions in internal namespaces (for example factories)

    * zend_execute.c:
      Modify the abstract error message so that it shows up to three methods not
      implemented.

    * zend_execute.c:
      Fix warnings

    * zend_compile.c:
      Don't inherit twice what is needed only once

    * zend.c:
      Fix bug #23162 user_error() crashs if  > 1024 bytes (Marcus, Moriyoshi)

2003-05-04  Sterling Hughes  <sterling@bumblebury.com>

    * zend_default_classes.h:
      semicolon

2003-05-03  Sterling Hughes  <sterling@bumblebury.com>

    * zend_default_classes.h:
      proto

    * zend_default_classes.c:
      add an accessor for the default exception

2003-04-29  Sascha Schumann  <sascha@schumann.cx>

    * zend_multiply.h:
      Fix the *= operator
      
      Slightly modified patch by Wez Furlong

2003-04-25  Jani Taskinen  <sniper@iki.fi>

    * zend_language_scanner.l:
      Fixed bug #21820 ("$arr[foo]" generates bogus E_NOTICE, should be E_PARSE)

2003-04-24  Sascha Schumann  <sascha@schumann.cx>

    * zend_alloc.c
      zend_alloc.h
      zend_multiply.h:
      add safe_emalloc

2003-04-21  Stanislav Malyshev  <stas@zend.com>

    * zend.c
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_object_handlers.c:
      Change get_class() so that it returns qualified names for namespaced
      classes.
      
      *HEADS UP*: get_class_name() handler interface is changed, now it should
      allocate the space it returns with emalloc, and the users free it. If
      anyone has problems with it or has suggestions how to do it without this -
      please tell.
      
      Also: make function_exists() understand namespaces.

    * zend_execute.c:
      make import * fail if such classes or functions already there

2003-04-20  Sterling Hughes  <sterling@bumblebury.com>

    * zend_compile.c:
      Add check for final properties

2003-04-20  Stanislav Malyshev  <stas@zend.com>

    * zend_execute_API.c:
      Check name before '::' so that it would be a namespace in
      zend_lookup_ns_class

    * zend_builtin_functions.c:
      refine the set_error_handler fix

    * zend_builtin_functions.c:
      Fix for bug #21094 (set_error_handler can not accept methods),
      by Timm Friebe

2003-04-19  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend.c:
      Corrected patch by Marcus Brger <helly@php.net>.

2003-04-18  Sterling Hughes  <sterling@bumblebury.com>

    * zend.c
      zend_opcode.c:
      Patch by Marcus Brger to fix some memleaks

2003-04-18  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend.h
      zend_extensions.c:
      - Revert my symbol fix patch, and merge in Stas' fixes to Zend Engine 1.

    * zend.h:
      - MacOSX also prepends the _ before symbols in bundles

2003-04-17  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend.c:
      Patch by Marcus Brger <helly@php.net>.

2003-04-11  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_compile.c
      zend_compile.h:
      Fix warnings.

2003-04-10  Sterling Hughes  <sterling@bumblebury.com>

    * zend_compile.c:
      satisfy andi's switch fetish ;-)

2003-04-10  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_compile.c:
      Fix ZTS build. Fix warning.

    * ZEND_CHANGES:
      Document 'const' keyword.

2003-04-10  Sterling Hughes  <sterling@bumblebury.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      allow expressions within constants, so the following is possible
      
      class foo {
      	const a = 1<<0;
      	const b = 1<<1;
      	const c = a | b;
      }
      
      this makes const a compile-time expression.  all other operators are
      unaffected.

2003-04-10  Zeev Suraski  <zeev@zend.com>

    * zend_language_parser.y
      zend_language_scanner.l:
      Revert Harald's commit

2003-04-10  George Schlossnagle  <george@omniti.com>

    * zend_language_parser.y:
      One line fix so that it will compile

2003-04-09  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_language_parser.y
      zend_language_scanner.l:
      removing the *syntactical sugar* again
      

2003-04-08  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_builtin_functions.c:
      Switch some functions to use new zend_lookup_ns_class() methods. This
      means that they will accept both simple and fully qualified class names.

    * zend_API.c
      zend_API.h:
      Rename zend_register_internal_class_in_ns() to a better, less filling,
      but with the same great taste zend_register_internal_ns_class().

    * zend_execute.h
      zend_execute_API.c:
      Add zend_lookup_ns_class() function.

    * zend_operators.h:
      Move memnstr into Zend and make an alias for BC in PHP.

2003-04-07  Jani Taskinen  <sniper@iki.fi>

    * zend_language_scanner.l:
      Fixed bug #23093 (highlight_string() crashed with __FUNCTION__)

2003-04-07  Sterling Hughes  <sterling@bumblebury.com>

    * zend_compile.h:
      add markers that make this file easy to parse for external sources

2003-04-04  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_API.h:
      Introduce ZEND_ME() and ZEND_METHOD() macros. Use these for declaring
      class methods to avoid name collisions.

2003-04-04  Stanislav Malyshev  <stas@zend.com>

    * zend_API.c
      zend_API.h:
      Fix namespace issues

2003-04-03  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_API.c:
      Patch from Timm Friede for when EG(active_namespace) is NULL initially.

    * zend.c
      zend_API.c
      zend_compile.c:
      Initialize all relevant zend_class_entry fields to avoid accidental
      crashes.

2003-04-03  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_list.c:
      Leftover.

2003-04-03  Sterling Hughes  <sterling@bumblebury.com>

    * zend_list.c
      zend_list.h:
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00
      i will not commit before 12:00

2003-04-02  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_API.c
      zend_API.h:
      - Add zend_register_internal_namespace() API function.
      - Add zend_register_internal_class_in_ns() API function.

    * zend_compile.h:
      Simplify.

2003-04-02  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_list.c:
      - Fix whitespace

2003-04-02  Sterling Hughes  <sterling@bumblebury.com>

    * zend_list.c
      zend_list.h:
      add the ability for curl_multi_info to introspect the handles.
      

2003-04-02  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_compile.c
      zend_compile.h
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l:
      Implement a different way to catch documentation comments.

    * zend_compile.c
      zend_compile.h
      zend_highlight.c
      zend_language_parser.y
      zend_language_scanner.l:
      Revert portions of the doc comment patch. There should be no parser
      errors now.

2003-04-02  Stanislav Malyshev  <stas@zend.com>

    * zend_builtin_functions.c
      zend_compile.h
      zend_execute.c:
      allow class_exists() to work with namespaces too.
      add CLASS_IS_NAMESPACE macro

    * zend_builtin_functions.c:
      fix typo

    * zend_builtin_functions.c:
      fix parameterless get_declared_classes call

2003-04-01  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_execute.c:
      Stas's patch on zend_execute.c (1.448 -> 1.449) resulted in a bug where
      the namespaced member accesses didn't work. This should hopefully
      correct it.

    * zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_object_handlers.c
      zend_opcode.c:
      Split ZEND_NAMESPACE into user and internal namespaces. Hope this is
      okay with engine folks.

2003-04-01  Stanislav Malyshev  <stas@zend.com>

    * zend_builtin_functions.c:
      improve namespace name hanfling

    * zend_builtin_functions.c:
      fix get_declared_classes()

    * zend_language_parser.y
      zend_language_scanner.l:
      Add __NAMESPACE__ auto-constant.

    * zend_builtin_functions.c:
      make get_declared_classes() work with namespaces (based on Tal Peer's
      patch)

2003-03-31  Andrei Zmievski  <andrei@gravitonic.com>

    * zend.h
      zend_compile.c
      zend_compile.h
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l
      zend_opcode.c:
      Multi-purpose patch:
       - The fields of zend_namespace were not completely initialized which
         led to a variety of problems.
       - The occurrence of class/interface/namespace definition is now
         captured.
       - Functions/classes/interfaces/namespaces can be preceded by doc
         comments which are stored for use by extensions.

2003-03-31  Stanislav Malyshev  <stas@zend.com>

    * zend.c:
      Use strncpy instead of sprintf

2003-03-30  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_language_parser.y:
      Since zend_do_begin_class_member_function_call assumes the previous
      opcode is FETCH_CONSTANT, swap the calls around.

2003-03-30  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_execute.c:
      ZTS fix.

2003-03-30  Stanislav Malyshev  <stas@zend.com>

    * zend.c:
      Try to report class name of the exception

    * zend_execute.c:
      Fix namespace switch

2003-03-29  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Add missing initialization

    * zend_compile.c:
      Fix crash

    * zend_API.c
      zend_compile.c
      zend_compile.h:
      Initial support for enforcing prototype of abstract/interface method
      implementations

2003-03-29  Sterling Hughes  <sterling@bumblebury.com>

    * zend.c:
      remove unused variable

2003-03-27  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      fix fetch_class buglet

2003-03-26  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c
      zend_language_parser.y:
      Un-nest namespaces - now namespace X { namespace Y {} } is a parse error
      Also refine namespaced includes

2003-03-26  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_compile.c:
      Fixed bug #22900 (declaration of namespaces with same name results in
      leaks).

2003-03-26  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend.c
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_opcode.c
      zend_operators.h:
      Eliminate TSRMLS_FETCH() calls in destroy_op_array() and
      zend_get_class_entry().

    * zend_API.c
      zend_object_handlers.c
      zend_objects.c
      zend_objects.h:
      Eliminate TSRMLS_FETCH() calls in zend_objects_new() and
      zend_objects_get_address().

2003-03-25  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Temporarily fix problem with inheriting from an internal class. This
      might
      - need some rework in the future (thanks to Marcus)

2003-03-24  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      Fix {include|require}_once error message - if open
      fails, don't use tream, use original name.

2003-03-23  Andi Gutmans  <andi@zend.com>

    * zend.c:
      - Fix win32 build

2003-03-23  Stanislav Malyshev  <stas@zend.com>

    * zend.c:
      resore namespace on shutdown - since some functions use
      EG() and CG() pointers

2003-03-23  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_default_classes.c:
      ZTS fix.

2003-03-23  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Another fix for implicit public, perhaps it was not such a good idea :I

2003-03-23  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * Zend.dsp
      ZendTS.dsp
      zend_default_classes.c:
      Add new files to ZendTS.dsp. Sync list of files in Zend.dsp with
      ZendTS.dsp. ZTS fixes.

2003-03-23  Sterling Hughes  <sterling@bumblebury.com>

    * zend_default_classes.h:
      DEFAULT_CLASSES_H not DEFAULT_INTERFACES_H

    * Makefile.am
      zend.c
      zend_default_classes.c
      zend_default_classes.h:
      add a standard Exception class.

2003-03-22  Shane Caraveo  <shane@caraveo.com>

    * zend_compile.h:
      export functions needed by cli

    * zend_language_scanner.l:
      fix crash in win32 debug build

2003-03-20  Stanislav Malyshev  <stas@zend.com>

    * Zend.m4:
      Add stdlib.h too - it is needed fot strto{ld}

2003-03-19  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_compile.c
      zend_compile.h
      zend_globals.h
      zend_highlight.c
      zend_language_parser.y
      zend_language_scanner.l:
      - Keep track of starting/ending line numbers for user functions.
      - Store last parsed doc comment in a compiler global for future use.

    * zend_API.c:
      Lowercase the function name when used as key in the function name. The
      original case is still preserved in zend_function structure.

2003-03-18  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_object_handlers.c:
      - Fix situation where a derived class declares a public (or implicit
      public)
        with the same name as a private in the parent
      - Optimize 'static binding' of private properties a bit

2003-03-18  Stig Bakken  <ssb@fast.no>

    * RFCs/002.txt:
      - email address change

2003-03-17  Stanislav Malyshev  <stas@zend.com>

    * zend_extensions.c:
      MFZE1

2003-03-17  Jani Taskinen  <sniper@iki.fi>

    * Makefile.am:
      Added missing zend_mm.c file and renamed zend_object_API.c ->
      zend_objects_API.c

2003-03-13  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_API.c:
      Fix warning in va_start().

2003-03-12  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_API.c:
      Initialize the namespace when registering functions.

2003-03-12  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix a crash bug in the implicit public declaration

2003-03-11  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_object_handlers.c:
      Fix handling of ::func()

2003-03-10  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Clean redundant code

2003-03-10  Jani Taskinen  <sniper@iki.fi>

    * zend_compile.c:
      Fixed some leaks. Patch by Moriyoshi

2003-03-10  Shane Caraveo  <shane@caraveo.com>

    * zend_config.w32.h:
      fix isinf for win32

2003-03-09  Zeev Suraski  <zeev@zend.com>

    * zend_language_parser.y:
      Optimize

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      Fix handling of ::foo

    * zend_compile.c:
      Cleanup

2003-03-09  Andi Gutmans  <andi@zend.com>

    * zend_language_scanner.l:
      - Nuke junk

2003-03-09  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      Fix parsing rules of namespaces/classes

    * zend_language_parser.y:
      Add ability to use ::interface_name in implements

    * zend_compile.c:
      Fix :: handling

2003-03-07  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      Dedicated to Greg Beaver <greg@chiaraquartet.net>.

    * ZEND_CHANGES:
      Document 'final'.

    * ZEND_CHANGES:
      Fix class type hints example.

    * ZEND_CHANGES:
      Update 'abstract' section.

2003-03-07  Jani Taskinen  <sniper@iki.fi>

    * zend_ini.c
      zend_ini.h:
      Renamed OnUpdateInt -> OnUpdateLong to prevent further misunderstandings.

    * zend_execute.c:
      Better fix for the memleaks (bug 19943) by Moriyoshi

2003-03-06  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_execute.c:
      Fix warnings

    * zend_execute.c:
      Fix error message

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y:
      Require abstract classes to be explicitly declared 'abstract', in order to
      avoid making developers traverse the entire class/interface hierarchy
      before they can figure out whether a class is instantiable
      (ok, so it makes sense :)

2003-03-06  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      -german+english+.

    * ZEND_CHANGES:
      D some TBDs

2003-03-06  Jani Taskinen  <sniper@iki.fi>

    * zend_execute.c:
      Fixed bug #19943 (the memleaks)

2003-03-06  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_highlight.c:
      More cleanup of the zend_strip() function.
      No longer strip __LINE__, since while it may become useless it could break
      code where __LINE__ is passed as a function parameter.

    * zend_highlight.c:
      Fixed in zend_strip() that corrupted heredoc.
      Optimized the writing routine by moving from putchar() to fwrite().
      Changed hardcoded opcode # to it's defined name.

2003-03-06  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
      Change opcode name

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y:
      Add class type hints

2003-03-05  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix auto globals

    * zend_compile.c
      zend_execute.c
      zend_language_parser.y:
      Implement $obj::static_func()

    * zend.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l
      zend_opcode.c
      zend_operators.c
      zend_operators.h:
      Add support for interfaces

2003-03-04  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_language_parser.y:
      Remove legacy code

    * zend_compile.c:
      Remove redundant code

2003-03-03  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_API.c:
      add missing strtolower

    * zend_API.c
      zend_API.h:
      commiting zend_disable_class patch for George:
      disabled classes will be replaced by dummy classes
      that print a warning upon instanciation

2003-03-02  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c:
      Fix destructors some more

    * zend_compile.c
      zend_compile.h:
      Improve infrastructure

    * zend.c
      zend_compile.c
      zend_compile.h:
      Add infrastructure for JIT initialization of auto globals

2003-03-01  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix mem leak

2003-03-01  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Make __construct() have higher priority than class name functions
      - for constructors.
      - Fix problem with the engine allowing final/abstract for the same method.
      - Both patches are by Marcus Brger.

2003-02-27  Rasmus Lerdorf  <rasmus@lerdorf.com>

    * zend_ini_scanner.l:
      MFB: We know ini file scanning will never be interactive, so speed it up a
      bit.  Need a dynamic check for the language scanner.

2003-02-26  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      Syntactic sugar is sweet.

2003-02-25  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Get the bits right - final/private fix

2003-02-25  Jani Taskinen  <sniper@iki.fi>

    * acconfig.h:
      Do not redefine zend_isnan if it is already defined.

    * Zend.m4:
      - Fixed bug #14245 ('make install' fails on AIX when using --with-apxs).

2003-02-24  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c:
      fix exception handling

2003-02-24  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y
      zend_language_scanner.l:
      Add 'final'

2003-02-24  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      Remove obsolete not on redeclaring protected members.

    * ZEND_CHANGES:
      Leftover.

    * ZEND_CHANGES:
      Initial documentation of namespace {}.

2003-02-23  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Move abstract inheritance logic to the right spot

    * zend_compile.c:
      Fixed abstract handling in inheritence

2003-02-20  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_stream.c:
      -cough*
      Fix another stupid mistake.

2003-02-20  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y
      zend_opcode.c:
      Allow namespaces to have a number of parts. I.e., now you can do:
      namespace foo {
      	function abc() {}
      }
      ...
      namespace foo {
      	functio def() {}
      }

2003-02-19  Wez Furlong  <wez.php@thebrainroom.net>

    * zend_stream.c:
      Fix stupid mistake that only affected interactive mode.

2003-02-18  Rasmus Lerdorf  <rasmus@lerdorf.com>

    * zend_stream.c:
      fileno() needs a FILE * here, and at least on FreeBSD with gcc-2.95.3
      it is unable to figure out that this is indeed a FILE * and hence it
      won't compile without this cast.

2003-02-18  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_scanner.l
      zend_opcode.c:
      Avoid using a C++ reserved word

2003-02-18  Wez Furlong  <wez.php@thebrainroom.net>

    * ZendTS.dsp
      flex.skl:
      Fixup build for win32

    * Makefile.am
      flex.skl
      zend.c
      zend.h
      zend_compile.h
      zend_execute.c
      zend_globals.h
      zend_ini_scanner.l
      zend_language_scanner.h
      zend_language_scanner.l
      zend_stream.c
      zend_stream.h:
      Implement simple stream support in the ZE scanners.

2003-02-17  Zeev Suraski  <zeev@zend.com>

    * zend_language_parser.y:
      Whitespace & minor renames

    * zend_language_parser.y:
      whitespace

    * zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h:
      Improve handling of static member variables

    * zend_config.w32.h
      zend_ini_parser.y:
      Improve Win32 build performance

2003-02-16  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix complex cases of self-assignments (bugs #21600, #22231)

    * zend_execute.c:
      Make EG(This) and EG(scope) available to internal methods

    * zend_execute.c:
      Revert patches - they weren't ready yet!

    * zend.c:
      Fix initialization

2003-02-16  Georg Richter  <georg.richter@phpev.de>

    * zend_execute.c:
      fixed compiler warning

    * zend_execute.c:
      tested patch from Zeev (fixes oo-bug in ext/mysqli)

2003-02-16  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c
      zend_language_parser.y:
      add support for ::foo syntax meaning "global one"

    * zend_compile.c:
      remove debug prints

2003-02-16  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend.c
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c:
      ZTS fixes

2003-02-16  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.c:
      namespace patch - static variable access

    * zend.c
      zend.h
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l
      zend_opcode.c:
      Namespace patch. Big changes:
      1. Nested classes are gone.
      2. New syntax for namespaces:
      namespace foo {
      	class X { ... }
      	function bar { ... }
      	var x = 1;
      	const ZZ = 2;
      }
      3. Namespaced symbol access: $x = new foo::X; - etc.
      For now, namespaces are case insensitive, just like classes.
      Also, there can be no global class and namespace with the same name
      (to avoid ambiguities in :: resolution).

2003-02-15  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_ini_scanner.l:
      Added feature #19645 (ini parser can now handle quoted multi-line values).

2003-02-14  Thies C. Arntzen  <thies@thieso.net>

    * zend_execute_API.c:
      init current_execute_data befor we start executing

    * Makefile.am:
      ups

    * Makefile.am:
      add really nice dump_bt function for debugging in gdb

2003-02-13  Zeev Suraski  <zeev@zend.com>

    * zend_object_handlers.c:
      Fix error handling in illegal property access

2003-02-13  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_language_scanner.l:
      MFB PHP_4_3

2003-02-12  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_API.c
      zend_API.h:
      Removed zend_get_module(), this function is not used by anything and more
      importantly. it does not work. It tries to find data based on numeric keys
      in hash table using string keys.

2003-02-12  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix declaration of class members that don't have an explicit access
      modifier

2003-02-11  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix require() handling - that's an old bug!

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      Improve parser handling of 'abstract'

2003-02-10  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix zend_initialize_class_data()

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_compile.h:
      Centralize class initialization

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      - Treat $this->foo inside class X as an implicit 'public $foo' if X::$foo
        is not explicitly declared
      - Forbid multiple declaration of the same variable

    * zend_execute.c:
      whitespace

    * zend_API.c
      zend_compile.c:
      Add missing destructors

2003-02-10  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.c:
      update static constants too

2003-02-10  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c:
      Fix get_parent_class()

    * zend_object_handlers.c:
      Restore missing check

    * zend_execute.c
      zend_execute_API.c:
      Add ability to reference self:: and parent:: in constant initializers
      (bug #21849)

    * zend_execute.c:
      Remove redundant code

2003-02-09  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix the array() problem (and probably some other problems too)

2003-02-08  Georg Richter  <georg.richter@phpev.de>

    * zend_API.c
      zend_API.h:
      fixed zend_parse_method_param

2003-02-08  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_builtin_functions.c:
      zend_config.h (and its Win32 version) is already included by zend.h

2003-02-08  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_builtin_functions.c:
      The string.h is already avaliable through zend.h, so the manual inclusion
      is not necessary.

2003-02-07  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_builtin_functions.c:
      Added a check to ensure that string.h is avaliable before trying to use it.
      
      Thanks Andi.

    * zend_builtin_functions.c:
      Added missing header.

2003-02-07  Zeev Suraski  <zeev@zend.com>

    * zend_globals.h
      zend_object_handlers.c:
      Improve PPP handling of properties

    * zend_config.w32.h:
      Better fix

    * zend_config.w32.h:
      Fix Windows build

2003-02-07  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_builtin_functions.c:
      Fixed bug #15734 (Added an optional parameter to get_defined_constants(),
      which if passed, will include information regarding who created the
      constant).

2003-02-06  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_builtin_functions.c:
      Fixed bug #19506 (get_extension_funcs() can now retrieve a list of built-in
      Zend Engine functions, if "zend" is specified as the module name).
      Made get_extension_funcs() on failure.

2003-02-06  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix the 2nd buglet in the error message :)

    * zend_object_handlers.c:
      Fix check

    * zend_hash.c
      zend_hash.h:
      Fix prototype (may have caused stack corruption)

2003-02-05  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects_API.c:
      - read_property cleanup
      - Implement unset/isset/empty for PPP

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_opcode.c:
      Rework static class properties - now supports access restrictions

    * zend_hash.c
      zend_hash.h:
      Add quick_exists()

    * zend_object_handlers.c:
      Add PPP support for arrays

    * zend_compile.c:
      Fix buglet in error message

2003-02-04  Zeev Suraski  <zeev@zend.com>

    * zend_object_handlers.c:
      Missing update

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_globals.h
      zend_hash.c
      zend_hash.h
      zend_object_handlers.c
      zend_opcode.c
      zend_ts_hash.c
      zend_ts_hash.h:
      Reimplement PPP properties

2003-02-03  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_API.h:
      Build fix.

2003-02-02  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_API.c
      zend_API.h:
      extend the parameter parsing API by two functions
      for parsing method parameters with automatic
      detection if the function was called as such or as
      a class method (with a valid this ptr).
      if called as a function the first parameter has to be
      the object it is operating on, if called as a method
      this is used.
      

2003-02-02  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_operators.h:
      whitespace

    * zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h:
      Core rearrangements - move Zend Objects specific code to their
      specific implementation file

2003-02-02  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Fix warning

2003-02-01  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_ini_scanner.l
      zend_language_scanner.l:
      Fix build.

2003-02-01  Jani Taskinen  <sniper@iki.fi>

    * acconfig.h
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.c
      zend_compile.h
      zend_config.nw.h
      zend_config.w32.h
      zend_constants.c
      zend_constants.h
      zend_dynamic_array.c
      zend_dynamic_array.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_execute_locks.h
      zend_extensions.c
      zend_extensions.h
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_ini.c
      zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.h
      zend_ini_scanner.l
      zend_istdiostream.h
      zend_language_parser.y
      zend_language_scanner.h
      zend_language_scanner.l
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_mm.c
      zend_mm.h
      zend_modules.h
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects.c
      zend_objects.h
      zend_objects_API.c
      zend_objects_API.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_qsort.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_static_allocator.c
      zend_static_allocator.h
      zend_ts_hash.c
      zend_ts_hash.h
      zend_types.h
      zend_variables.c
      zend_variables.h:
      - Added some missing CVS $Id$ tags, headers and footers.

2003-01-30  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_operators.c:
      Fixed compiler warning regarding signed/unsigned int comparisons.

2003-01-30  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_ts_hash.c
      zend_ts_hash.h:
      fix non-zts build for wez

2003-01-30  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute_API.c:
      Fix ZTS build.

2003-01-29  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.h
      zend_execute_API.c
      zend_opcode.c:
      Add additional stage to post-session cleanup.
      We need separate cleanup stage because of the following problem:
      Suppose we destroy class X, which destroys function table,
      and in function table we have function foo() that has static $bar. Now if
      object of class X was assigned to $bar, its destructor will be called and
      will
      fail since X's function table is in mid-destruction.
      So we want first of all to clean up all data and then move to tables
      destruction.
      Note that only run-time accessed data need to be cleaned up, pre-defined
      data can not contain objects and thus are not probelmatic.

2003-01-29  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_object_handlers.c:
      Code rearrangements

2003-01-29  Stanislav Malyshev  <stas@zend.com>

    * zend_execute_API.c:
      Fix object destructors:
      zend_objects_store_call_destructors is not used anymore, we rely on
      symbol tables cleaners to destroy all objects.

    * zend_objects_API.c:
      extra safety

    * zend_compile.c:
      fix memory leak

2003-01-29  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_object_handlers.c:
      Fix assignments to $this.
      Fixes the 'make install' problem reported on php-dev

2003-01-28  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix a ticks related crash

    * (PHP_5_0_dev_before_13561_fix)
      zend_execute.c:
      Allow methods in parent classes to call protected methods in derived
      classes

2003-01-27  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
      Replace MAKE_VAR opcode with special 'data' opcode
      This opcode is not executeable but only holds data for opcodes
      that need more than two arguments (presently only ASSIGN_OBJ and the ilk
      but
      in the future also ASSIGN_DIM)

2003-01-26  Sascha Schumann  <sascha@schumann.cx>

    * zend_API.c:
      Replace snprintf() call using zend_error's capabilities

2003-01-23  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Let the scope propagate to internal functions

2003-01-23  Jani Taskinen  <sniper@iki.fi>

    * zend_execute_API.c:
      Fixed bug: #14542, register_shutdown_function() timeout problem

2003-01-22  Stanislav Malyshev  <stas@zend.com>

    * OBJECTS2_HOWTO:
      some small refinements for get_class_*

2003-01-22  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute.c:
      Fixed bug #21814 (Allow booleans to be used as array keys).

2003-01-21  Sterling Hughes  <sterling@bumblebury.com>

    * zend_objects_API.c:
      fix by phanto to the cloning

2003-01-19  Zeev Suraski  <zeev@zend.com>

    * Zend.m4:
      relabel

2003-01-19  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c:
      Restore for now old statics behaviour (so that indirect $$var references
      would work again). Comprehensive fix will follow later.

2003-01-19  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.l:
      ini patch to allow 'entry[] = value' entries

2003-01-17  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_objects.c
      zend_objects.h:
      export zend_objects_destroy_object()
      static inline was meaningless anyways as the function
      was only used as a callback handler and was never
      called directly

    * zend_objects_API.c
      zend_objects_API.h:
      make std_object_handlers struct available for shared modules

2003-01-16  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_execute.c:
      Fixed bug #20933 (isset/empty didn't work when used on string offsets).

2003-01-15  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Revert int -> unsigned int change for str.len

2003-01-15  Sascha Schumann  <sascha@schumann.cx>

    * zend.h:
      Revert commit which turned the lengths of strings into zend_uint.

2003-01-14  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y
      zend_language_scanner.l
      zend_operators.c
      zend_operators.h:
      - Change "is" to "instanceof" as it explains better what the operator
      means.
      - "is_a" was also appropriate but ugly.

2003-01-14  Stanislav Malyshev  <stas@zend.com>

    * zend_API.c:
      fix memory leaks and key size

2003-01-14  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_ini_parser.y:
      MFZE2

2003-01-14  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c:
      fix warning

    * zend_API.c
      zend_API.h:
      Make add_property_ functions work via write_property handler

    * zend.c
      zend_object_handlers.c:
      ws

2003-01-14  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_ini_parser.y:
      Reverting previous patch.

2003-01-13  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_ini_parser.y:
      MFZE2

2003-01-13  Andi Gutmans  <andi@zend.com>

    * zend_objects_API.c:
      - Don't check if the handle is bogus. We should crash.

2003-01-12  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_modules.h:
      fix wrong dereferenciation

2003-01-12  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c:
      fix inheritance

    * zend_API.h:
      Remove handle_property from here too

    * zend.c
      zend.h
      zend_compile.c:
      RIP handle_* functions. ZE2 will use __ handlers instead.

    * zend_object_handlers.c:
      Move Z_OBJ_P here.

    * zend_operators.h:
      Remove Z_OBJ - it's internal to Zend objects, no generic function except
      those in zend_object_handlers.c should use it.
      Add Z_OBJ_HANDLER macro for easy access to handlers

2003-01-12  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend.c
      zend.h
      zend_builtin_functions.c:
      ZTS fixes.

2003-01-12  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.c:
      add get_class_name handler

    * zend.c:
      Use generic handlers instead of Z_OBJ

2003-01-12  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_modules.h:
      

    * zend_ini.h
      zend_ini_entry.h
      zend_modules.h:
      partially revert previous commit and
      change zend_modules.h to include
      a forward declaration to zend_ini_entry

    * zend_ini.h
      zend_ini_entry.h
      zend_modules.h:
      added zend_ini_entry to zend_modules_entry as
      discussed with zeev

    * zend_builtin_functions.c:
      fix 'use of uninitialized variable' warning

2003-01-12  Stanislav Malyshev  <stas@zend.com>

    * zend_objects_API.c:
      validate handle

2003-01-12  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_ini.c
      zend_ini.h
      zend_variables.c:
      Implemented compatibility mode
      To enable - zend2.implicit_clone = on in php.ini or using ini_set()

2003-01-11  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
      - Fix typo and whitespace

2003-01-11  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c:
      - Ported the zend_execute_internal hook to ZendEngine2.

2003-01-11  Harald Radi  <harald.radi+coding.php@nme.at>

    * zend_ts_hash.c:
      freed reader twice instead of writer and reader

2003-01-10  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_alloc.c:
      MFZE2

2003-01-10  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_API.c:
      Automatically register constructor, destructor, and clone function when
      class methods are registered.

2003-01-09  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Found some more occurences of that elusive bug...

    * zend_compile.c:
      Fix one lousy, annoying lurking bug (memory corruption)
      Sebastian - try coWiki again please...

    * zend_API.h:
      Unify and make it easy to add code into the broken-string error handler

    * zend_language_parser.y:
      Fix writability checks

    * zend.c:
      Fix leak

2003-01-08  James Cox  <james@imajes.info>

    * zend.h:
      cvs is dev not alpha.

2003-01-08  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_builtin_functions.c:
      MFZE2

2003-01-05  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_globals.h
      zend_language_scanner.l:
      MFZE1 - lineno fix

2003-01-02  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
      Fix incorrect linkage of access-levels, when using private methods

2003-01-01  Zeev Suraski  <zeev@zend.com>

    * zend_API.c
      zend_operators.h:
      Win32 build fix

2003-01-01  Stanislav Malyshev  <stas@zend.com>

    * zend_operators.h:
      use handler for  Z_OBJPROP

2003-01-01  Zeev Suraski  <zeev@zend.com>

    * zend_API.c:
      Fix Wez's problem

2002-12-31  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * LICENSE
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.c
      zend_compile.h
      zend_config.nw.h
      zend_config.w32.h
      zend_constants.c
      zend_constants.h
      zend_dynamic_array.c
      zend_dynamic_array.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_ini.c
      zend_ini.h
      zend_language_scanner.h
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_mm.c
      zend_mm.h
      zend_modules.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_qsort.c
      zend_qsort.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_static_allocator.c
      zend_static_allocator.h
      zend_ts_hash.c
      zend_ts_hash.h
      zend_types.h
      zend_variables.c
      zend_variables.h:
      Bump year.

2002-12-31  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.h:
      fix level of indirection

2002-12-30  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_execute_API.c:
      Adjust the error message.

2002-12-30  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.h:
      Oops, fix it indeed

    * zend_object_handlers.h:
      Better check

2002-12-26  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_compile.c:
      do_inherit_method_check() is supposed to return 0 or 1, not SUCCESS or
      FAILURE.

2002-12-14  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_language_scanner.l:
      MFZE2

2002-12-10  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Fix check to allow for static+access level modifiers

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      - Allow variables to have both 'static' modifier and an access level.
        NOTE:  This only works at the syntax level right now (parser).  It
               doesn't actually work as of yet - all statics are considered
               public for now
      - Prevent users from putting more restrictions on methods in derived
      classes
        (i.e., you cannot make a public method private in a derived class, etc.)

2002-12-09  Andi Gutmans  <andi@zend.com>

    * zend_mm.c:
      - Fix a bug which I just introduced.

    * zend_mm.c:
      - Fix typo

    * zend_mm.c:
      - Improvements

    * zend_mm.c
      zend_mm.h:
      - First attempt to improve memory manager during realloc()'s

2002-12-08  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
      Remove comment

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      Treat the absence of an access type just as if 'public' was supplied

    * zend_compile.c:
      Simplify/fix inheritance checks

    * zend_execute.c:
      Support private/protected constructors

2002-12-07  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
      Update.

2002-12-07  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
      Fix error messages

    * zend_language_parser.y
      zend_language_scanner.l:
      Remove unintentional code

2002-12-07  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - Dissallow using parent, self and main as class names

2002-12-06  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_globals.h
      zend_hash.h
      zend_language_parser.y
      zend_language_scanner.l:
      - Implement public/protected/private methods.
      - Prevent instantiation of classes with abstract methods.
      Based in part on Marcus's patch.

2002-12-01  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c:
      - Allow enabling of memory cache with zend_mm

    * zend.c
      zend.c
      zend.h
      zend.h
      zend_builtin_functions.c
      zend_builtin_functions.c:
      - MFZE1

    * zend.c
      zend.h
      zend_builtin_functions.c:
      - Revert as the patch doesn't compile

    * zend.c
      zend_API.c
      zend_builtin_functions.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_indent.c
      zend_object_handlers.c
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_variables.c:
      h WHitespace

    * zend.c:
      - Initialize constants_updated (by Marcus)

    * zend_builtin_functions.c:
      - Nuke use of deprecated macro

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y:
      - FN_IS_STATIC -> FN_STATIC

    * zend.c:
      - Fix crash

    * zend_compile.c
      zend_compile.h:
      - My personal cleanups

    * zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_language_parser.y
      zend_object_handlers.c:
      - Commit Marcus' cleanup of abstract and static inheritance and improve
      - error messages

2002-11-22  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_API.c:
      - Initialize all functions to non-static (patch by Marcus Brger
        <marcus.boerger@t-online.de>.

2002-11-22  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_execute.c:
      Show class name as well. Patch by Marcus Brger.

    * zend_execute.c:
      Show the name of the abstract method in the error.

    * zend_compile.h:
      Fix prototype.

2002-11-20  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_builtin_functions.c:
      - MFZE1: Disable leak() and crash() when not using debug mode

2002-11-20  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES:
      - Add abstract methods

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y
      zend_language_scanner.l:
      - Fix build (thanks Marcus)
      - Implement abstract methods, syntax:
      -    abstract function foo($vars);
      - I don't see any reason why modifiers such as static/public need to be
      - used with abstract. PHP is weakly typed and there would be no meaning to
      - this anyway. People who want a strictly typed compiled language are
      - looking in the wrong place.

2002-11-19  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_builtin_functions.c
      zend_execute.c
      zend_execute_API.c:
      MFZE1 - error_reporting fix

2002-11-18  Andi Gutmans  <andi@zend.com>

    * zend_language_scanner.l:
      - MFZE1

2002-11-17  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      fix the leak

2002-11-16  Andi Gutmans  <andi@zend.com>

    * zend_language_scanner.l
      zend_language_scanner.l:
      - MFZE1

    * Zend.m4
      configure.in:
      - MFZE1

    * zend_hash.c:
      - Commit fix for bug #19566 (I think it's by Marcus :)

2002-11-14  Andrei Zmievski  <andrei@gravitonic.com>

    * zend_llist.h:
      MFZE1

2002-11-13  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      semi-fix string offsets crash - now it doesn't crash, but still leaks

    * zend_object_handlers.c:
      fix static

2002-11-11  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES:
      - Update with statics

2002-11-11  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_execute.c:
      Fugbix typo.

2002-11-11  Ilia Alshanetsky  <ilia@prohost.org>

    * zend.h:
      MFZE1

2002-11-10  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
      - MFZE1

2002-11-10  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
      fix statics - make it behave like $this (fetch type "static")
      Side effect: indirect references to statics won't work.

2002-11-06  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_execute.c:
      Fix ZTS build.

2002-11-06  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
      fix zend_assign_to_object_op

2002-11-05  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_language_scanner.l:
      MFZE1

2002-11-05  Andi Gutmans  <andi@zend.com>

    * zend_compile.h:
      - Shift around zend_op members

    * ZEND_CHANGES:
      - A couple of updates

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y:
      - Add support for static methods. Basically methods which are defined as
      - static don't have $this. That's the whole difference.

    * tests/zend2.php:
      - $clone -> $that

    * zend_execute_API.c:
      - Fix bug introduced with type change of free_op1/2

    * zend_language_parser.y
      zend_language_scanner.l:
      - ATTENTION: Finally nuke old_function and cfunction. I think it is time
      - to get rid of these BC notations. This is from the days of the move from
      - PHP/FI 2 -> PHP 3

2002-11-05  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_hash.c:
      Revert of previous patch.

2002-11-05  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_objects.c:
      - Change the automatically created variable $clone in __clone() to
      - $that as discussed at the PHP Conference. If there are any objections
      - alternative names please let me know. The reason for changing it from
      - $clone is because $clone sounds as if it's the newly cloned object and
      - not the old one.

2002-11-05  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c
      zend_compile.h:
      avoid using 'class' in exported functions - it annoys c++

2002-11-05  Stig Bakken  <ssb@fast.no>

    * zend.c:
      Fixed some special cases that were crashing for the exception default
      handler.

2002-11-04  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_compile.c:
      Silence compiler warnings.

    * zend_hash.c:
      If ordered is not set a random compiler assigned value of *p2 would be
      used,
      this patch fixes the problem by initializing *p2 to NULL.

    * zend_operators.c:
      Silence compile warning, ctype.h is needed for tolower() function.

    * zend_language_scanner.l:
      MFZE1

2002-11-02  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_language_scanner.l:
      - Fix segfault when __CLASS__ was used outside a class definition

    * zend.c:
      - MFZE1

2002-11-02  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_language_scanner.l:
      MFZE1 (20214).

2002-11-01  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Fix unset($this->foo)

2002-10-24  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_opcode.c: - Also tune jmpz_ex

    * zend_execute.c
      zend_opcode.c
      zend_compile.h:
    - Improve performance of part of the jmps. More to follow.

2002-10-23  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_compile.c:
    - This might improve performance. Commiting it so that I can check it on
    - Linux

    * zend_execute.c:
    - Make Ts access a macro. I need this for my next patch which should
    - improve performance but not sure yet if it will.

2002-10-22  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Nuke unused get_incdec_op()
    - Nuke old comment

    * zend_compile.h
      zend_execute.c
      zend_globals.h: - Improve overall engine performance

    * zend_execute.c: - Fix bug reported by Daniel T. Gorski

2002-10-21  Thies C. Arntzen  <thies@thieso.net>

    * zend_builtin_functions.c: MFZE1

2002-10-20  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.c: looks like this message should go

    * zend_compile.c: Fix private handling

2002-10-20  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_highlight.c
      zend_highlight.h: Sync zend_html_puts parameter list with Zend Engine 1.

2002-10-19  Andi Gutmans  <andi@zend.com>

    * zend_compile.h: - Fix compile warning.

    * zend_opcode.c
      zend_compile.h
      zend_execute.c: - Improve opcode dispatching

2002-10-18  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_compile.c
      zend_execute.c:
    - Change opcode dispatch mechanism to use a function per opcode and use
    - a lookup table using the opcode # to call the correct function.
    - Still have lots of tuning to do.

    * zend_execute.c: - Cleanup

2002-10-16  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_execute.c: Fix ZTS build.

2002-10-16  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c
      zend_execute.c: Fix class static members: now the following code works:
    <?php

    class Foo {
             static $c = "Parent";
    }

    class Child extends Foo {
    }

    Foo::$c = "Hello";

    var_dump(Child::$c);
    ?>
    and returns "Hello" (class statics are not copied anymore, but looked up in
    runtime)

    * zend_compile.c
      zend_compile.h
      zend_execute.c: Fix and generalize $this handling.
    ZEND_FETCH_FROM_THIS is removed, IS_UNUSED type on class variables will be
    used instead as the sign that it's a fetch from $this

2002-10-14  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_ini_parser.y
      zend_ini_scanner.l
      zend_globals.h: MFZE1

2002-10-14  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_language_parser.y: - Support new classname::$class_name, e.g.:
    <?

    	class foo::bar {
    		public $hello = "Hello, World\n";
    	}

    	$name = "bar";
    	$obj = new foo::$name;
    	print $obj->hello;
    ?>

2002-10-13  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_extensions.h: Increased the API number. (re: floats patch)

2002-10-12  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_operators.c
      zend_operators.h
      zend.c
      zend_execute_API.c
      zend_globals.h: MFZE1 (floats & locale issue)

2002-10-10  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Fugbix typo.

2002-10-10  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.c: add comment

    * zend_object_handlers.c: fix memory leaks

2002-10-09  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.c: Fix object write handler behaviour:
    * If this value is already set to given value, don't try to set it again.
    * If we have reference, we should not move it.
    * If we are assigning referenced variable, we should separate it.

2002-10-09  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_API.c
      zend_builtin_functions.c
      zend_compile.c
      zend_constants.c
      zend_execute.c
      zend_execute_API.c
      zend_language_parser.y
      zend_object_handlers.c
      zend_operators.c
      zend_operators.h: MFZE1 zend_str_tolower issue.

2002-10-07  Andi Gutmans  <andi@zend.com>

    * tests/zend2.php: - Fix test

    * zend_execute.c:
    - Require $this-> when calling a methods. This whole automatic lookup
    - first in the class and then in the global scope is confusing, slow and
    - not quite BC compatible.

    * zend.c
      zend_compile.c
      zend_globals.h:
    - Allow access to private/protected variables of $clone inside the __clone()
    - method

2002-10-06  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Fix problem with unsetting object members.

2002-10-01  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
    - Fix problem when crashing on illegal tokens in class name during class
    - definition.

2002-09-30  Derick Rethans  <d.rethans@jdimedia.nl>

    * ZEND_CHANGES: - No tabs :)

2002-09-28  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_builtin_functions.c: - Fix for defines...

    * zend_builtin_functions.c: - Fix build in non-ZTS mode

2002-09-26  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_API.c
      zend_builtin_functions.c
      zend_compile.c
      zend_constants.c
      zend_execute.c
      zend_execute_API.c
      zend_language_parser.y
      zend_object_handlers.c
      zend_operators.c
      zend_operators.h: MFZE1

2002-09-25  Stanislav Malyshev  <stas@zend.com>

    * zend_extensions.h:
    Propmote API NO year, so that it will never be the same as ZE1 API NO

2002-09-24  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Fix leak

    * zend_language_parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c:
    - Megapatch to try and support inheritance from sub-classes. Things might
    - be *very* buggy now so don't get too upset if that happens.
    - I still need to improve some stuff but it's a good step (hopefully).

2002-09-23  Andi Gutmans  <andi@zend.com>

    * zend_globals.h
      zend_ini.c
      zend_language_parser.y: - MFZE1.

2002-09-21  Andi Gutmans  <andi@zend.com>

    * zend_extensions.h: - Someone screwed this up.

2002-09-19  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_ini.c: - Make Colin happy

2002-09-19  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_execute_API.c: MFZE1 - connection_status() fix

    * zend.c: Fix non ZTS build

    * zend.c: Fix that obscure crash in Debug_TS mode

2002-09-18  Zeev Suraski  <zeev@zend.com>

    * zend.c:
    Fix the thread-safe initialization of the ZE2.  This should solve some
    sporadic crashes, as well as the problem with the built-in constants.

    * zend_constants.c: Remove dead code

    * zend_builtin_functions.c: Add useful debugging function

2002-09-17  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c
      zend_hash.h: Add tracking for hashtable allocation

    * zend.c: ZE2 fix

    * zend_compile.c: whitespace

    * zend.c
      zend.h: MFZE1 - threading fix

2002-09-16  Andrei Zmievski  <andrei@php.net>

    * zend_API.h
      zend_builtin_functions.c
      zend_API.c
      zend_execute_API.c: MFZE1

2002-09-15  Ilia Alshanetsky  <ilia@prohost.org>

    * zend_highlight.c: Make zend actually strip comments. Bug #18151

    * zend.c:
    Make zend return a proper exit error code when it encounters a parse error.

2002-09-15  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
    - Hopefully fix problem with __autoload not working well with inherited classes.
    - There might still be some weird situations I haven't thought of.

    * zend_list.c
      zend_execute.c: - WS fix - "while (" instead of "while("

    * zend_execute_API.c
      zend_ini.c
      zend_list.c
      zend_object_handlers.c
      zend_objects_API.c
      zend_operators.c
      zend_API.c
      zend_builtin_functions.c
      zend_compile.c
      zend_execute.c: - WS - Always use "if (" and not "if("

    * zend_execute_API.c: - WS

2002-09-10  Stanislav Malyshev  <stas@zend.com>

    * zend_execute_API.c
      zend_variables.c: MFZE1

2002-09-09  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.c: remove comment

2002-09-08  Andi Gutmans  <andi@zend.com>

    * zend.h: - Prepare for alpha 3

2002-09-05  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c: quick-n-dirty inheritance support for __handlers

2002-09-04  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Whitespace fixes.

2002-09-04  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.c: remove dead code

    * ZEND_CHANGES
      zend_object_handlers.c: Fix __call and add some docs

2002-09-04  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_object_handlers.c: Fix ZTS build.

    * ZEND_CHANGES: TBD: __call(), __get(), __set().

2002-09-04  Stanislav Malyshev  <stas@zend.com>

    * zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_extensions.h
      zend_object_handlers.c
      zend_objects.c: Support for __get, __set and __call in classes.
    This should work as follows: if class hasn't member with given name,
    __get/__set is called. If class has no method with given name, __call is called.
    __get/__set are not recursive, __call can be.

2002-09-04  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Workaround for superfluous comma in var_export() result.

    * ZEND_CHANGES:
    Let debug_backtrace() example print out the class name, if applicable, and the function/method arguments.

2002-09-03  Thies C. Arntzen  <thies@thieso.net>

    * zend_builtin_functions.c: nuke warning

    * zend_builtin_functions.c: nuke unneeded stuff

2002-09-03  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_ini.c: MFZE1

2002-09-03  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_ini.c: - Revert

    * zend_ini.c:
    - MFH for: Apply rest of html errors fix (Patch by Jan Lehnardt <jan@php.net>)

2002-09-03  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend.h:
    Add html_errors to zend_utility_values. Patch by Jan Lehnardt <jan@php.net>.

2002-09-03  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c: - Fix typo

2002-09-02  Thies C. Arntzen  <thies@thieso.net>

    * zend_builtin_functions.c:
    refine last patch. if the argument-stack is not consistent don't try to show
    arguments. no call to zend_error is made as we might end up in an infinite
    recursion if called from an error_handler.
    so: if the arguments to functions aren't shown in debug_backtrace this is 'cause
    the arument stack was not consistent when debug_backtrace was called.

    * zend_builtin_functions.c:
    debug_backtrace() now checks the complete argument-stack for consistency.

2002-09-02  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c: MFZE1

2002-09-01  Andi Gutmans  <andi@zend.com>

    * zend_llist.c: - Fix leak reported by "l0t3k" <cshmoove@hotmail.com>

2002-09-01  Stanislav Malyshev  <stas@zend.com>

    * zend_operators.c: MFZE1

2002-08-28  Thies Arntzen  <thies@pb1.pair.com>

    * zend_builtin_functions.c
      zend_execute_API.c: debug_backtrace()
    - make args passed to functions called vy call_user_function available again.

    * zend_builtin_functions.c: debug_backtrace():
    - make args work if called from the error_handler
    - fix refcount for args

    * zend.c:
    clear current_execute_data on bailout as it would point into some freed area
    on the stack.

2002-08-28  derick  <derick@pb1.pair.com>

    * zend.c: - MFZE1

2002-08-26  Thies Arntzen  <thies@pb1.pair.com>

    * zend_builtin_functions.c:
    debug_backtrace(): show name of included file for include and require calls
    plus some small fixes suggested by andi.

2002-08-24  Andi Gutmans  <andi@pb1.pair.com>

    * zend_builtin_functions.c: - Whitespace

    * zend_builtin_functions.c: - Whitespace and better variable name

2002-08-24  Thies Arntzen  <thies@pb1.pair.com>

    * zend_builtin_functions.c: fix warning

2002-08-23  Andi Gutmans  <andi@pb1.pair.com>

    * Zend.m4: - Add \n to configure fprintf

    * zend_extensions.c: - dlerror -> DL_ERROR

2002-08-23  Thies Arntzen  <thies@pb1.pair.com>

    * zend_builtin_functions.c:
    debug_backtrace: show include/require/eval as normal functions on the stack

2002-08-23  derick  <derick@pb1.pair.com>

    * zend_builtin_functions.c: - No spaces :)

2002-08-23  Thies Arntzen  <thies@pb1.pair.com>

    * zend_builtin_functions.c:
    - debug_backtrace now also returns an array containing the arguments of the
      called function.

    zeev, andi - is knowing the structure of the stack considered a bad thing in
    zend_builtin_function? if yes i would have to create a new function in
    zend_ptr_stack.c (but i think we are save this way)

    * zend_builtin_functions.c
      zend_execute_API.c: - debug_backtrace:
    	added "type" ('->' or '::') for object calls.
    	made calls done thru call_user_func show-up correct in backtraces.

    andi,
    does this look correct to you?

    * zend_execute.c: those are set by RETURN_FROM_EXECUTE

2002-08-21  Thies Arntzen  <thies@pb1.pair.com>

    * zend_execute.c:
    zend_execute: make sure that current_execute_data points to the right thing
    after coming back from recursion.

2002-08-19  Zeev Suraski  <zeev@pb1.pair.com>

    * zend_operators.c: MFZE1

2002-08-17  Andi Gutmans  <andi@pb1.pair.com>

    * zend_execute.c: MFZE1

2002-08-17  Zeev Suraski  <zeev@pb1.pair.com>

    * zend_execute.c
      zend_hash.c: MFZE1

2002-08-16  Stig Bakken  <ssb@pb1.pair.com>

    * zend.c: * append emacs footer

    * zend.c: * remove builtin exception class

2002-08-16  Andi Gutmans  <andi@pb1.pair.com>

    * zend.c: - Fix whitespace

2002-08-16  Stig Bakken  <ssb@pb1.pair.com>

    * zend_execute_API.c
      zend_globals.h
      zend.c
      zend_builtin_functions.c:
    - Added set_exception_handler() function for registering a global,
      catch-all exception handling function 
    - Added set_exception_handler() function for registering a global,
      catch-all exception handling function (Stig)

2002-08-15  Zeev Suraski  <zeev@pb1.pair.com>

    * flex.skl
      zend.c
      zend_globals.h
      zend_language_scanner.l: MFZE1

2002-08-14  jason  <jason@pb1.pair.com>

    * zend_compile.c
      zend_compile.h
      zend_globals.h
      zend_language_parser.y:
    MFZE1 (use token instead of global for opcode counting)

2002-08-13  Andi Gutmans  <andi@pb1.pair.com>

    * zend_execute_API.c:
    - Fix crash when exception is raised in __autoload function

2002-08-13  Zeev Suraski  <zeev@pb1.pair.com>

    * zend.h: MFZE1

2002-08-08  sebastian  <sebastian@pb1.pair.com>

    * zend_objects.c: Fix warning.

2002-08-08  stas  <stas@pb1.pair.com>

    * zend_objects.c
      zend_objects.h
      zend_objects_API.c
      zend_objects_API.h: Add ZEND_API to functions

2002-08-08  Andi Gutmans  <andi@pb1.pair.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y
      zend_language_scanner.l
      zend_operators.c
      zend_operators.h:
    - Make new 'is' operator work with classes only and return false when
    - the object isn't of the said class or the value isn't an object.

    * zend_static_allocator.c: - Bad Harald! :)

2002-08-08  Zeev Suraski  <zeev@pb1.pair.com>

    * zend_alloc.c: MFZE1

2002-08-07  phanto  <phanto@pb1.pair.com>

    * zend_static_allocator.c
      zend_alloc.c
      zend_config.w32.h
      zend_hash.c
      zend_ini.c
      zend_llist.h
      zend_mm.c
      zend_operators.c: make win32 debug output more verbose

2002-08-03  Andi Gutmans  <andi@pb1.pair.com>

    * tests/zend2.php: - Small fix

2002-08-03  Zeev Suraski  <zeev@pb1.pair.com>

    * zend_execute.c: MFZE1

2002-08-01  stas  <stas@pb1.pair.com>

    * zend_execute.c
      zend_hash.c: MFZE1

2002-07-30  jason  <jason@pb1.pair.com>

    * zend_compile.c
      zend_execute.c
      zend_globals.h: MFZE1 global declare

    * zend_compile.c: Fix segfault

2002-07-30  Andrei Zmievski  <andrei@pb1.pair.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y
      zend_language_scanner.l
      zend_operators.c
      zend_operators.h:
    - Adding 'is' operator that can be used to check the type of a variable,
      or its class. 

2002-07-28  phanto  <phanto@pb1.pair.com>

    * OBJECTS2_HOWTO: update the handlers struct

2002-07-27  Andi Gutmans  <andi@pb1.pair.com>

    * zend_compile.c
      zend_execute_API.c:
    - Make sure classes are first looked for in the current scope.
    - Make sure that during inheritance the global scope is searched if the
    - current one doesn't work.

2002-07-26  Andi Gutmans  <andi@pb1.pair.com>

    * zend_execute.c
      zend.c
      zend_builtin_functions.c
      zend_compile.h:
    - Fix problem with debug_backtrace() reported by Stig. We weren't reporting
    - global function information because it wasn't available. We have to do
    - an additional assignment per-function call so that it'll be available.
    - Also don't define the global scope as function name _main_ but leave it
    - empty so that frameworks like Pear can decide what they want to do.

2002-07-25  sniper  <sniper@pb1.pair.com>

    * Zend.m4: Fixed 3 major failures in this test:

      1. Tests work better when they are actually run..
      2. When file is opened, it should be closed sometime too.
      3. AC_TRY_RUN cleans after itself (rm -f conftest.*), so it's
         good idea to read the values while the file still exists.


2002-07-24  Andi Gutmans  <andi@pb1.pair.com>

    * zend_mm.c: - Fix some compile problems with the new configure checks.

2002-07-24  James Cox  <imajes@pb1.pair.com>

    * Zend.m4
      zend_mm.c: move testing for the alignment values into configure.

    * Zend.m4: ws fixes.

2002-07-23  Andi Gutmans  <andi@pb1.pair.com>

    * zend_hash.c: - Fix WS.

2002-07-21  Andi Gutmans  <andi@pb1.pair.com>

    * zend_compile.c:
    - Fix bug reported by Sebastian where old constructors didn't work in
    - nested classes.

2002-07-18  derick  <derick@pb1.pair.com>

    * zend.h
      zend_extensions.c: - MFZE1 - MacOSX fixes by Marko Karppinen

2002-07-17  Andi Gutmans  <andi@pb1.pair.com>

    * zend_compile.c:
    - Remove code which wasn't supposed to go into the patch.

    * zend_compile.c
      zend_language_parser.y: - Rejuggle some code.

2002-07-17  sniper  <sniper@pb1.pair.com>

    * ZEND_CHANGES: This was mentioned already above (with an example too :)

2002-07-16  Andi Gutmans  <andi@pb1.pair.com>

    * ZEND_CHANGES: - Before I forget to list it, this was also added.

    * zend_language_scanner.l:
    - Syntactic sugar - Add "public" as a synonym for "var".
    - Now we have the three P's.
    You can do:

    <?
    	class MyClass {
    		public $a;
    		private $b;
    		protected $c;
    	}

    ?>

2002-07-15  derick  <derick@pb1.pair.com>

    * zend_operators.c: - MFH of the crap removal

2002-07-15  Andi Gutmans  <andi@pb1.pair.com>

    * ZEND_CHANGES
      zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_language_parser.y
      zend_language_scanner.l
      zend_opcode.c:
    - Commit patch to support protected member variables (by Timm Friebe w/
    - some fixes by me).
    - You can't access protected variables from outside the object. If you want
    - to see a protected member from your ancestors you need to declare the
    - member as protected in the class you want to use it in. You can't
    - redeclare a protected variable as private nor the other way around.

    * zend_operators.c:
    - Really implement bool increment/decrement as flip-flop.

2002-07-14  Andi Gutmans  <andi@pb1.pair.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y
      zend_language_scanner.l
      ZEND_CHANGES:
    - Nuke delete(). It was a big mistake to introduce it and I finally
    - understand why Java didn't do so.
    - If you still want to control destruction of your object then either make
    - sure you kill all references or create a destruction method which you
    - call yourself.

    * zend_execute.c: - Nuke some unused code

2002-07-14  derick  <derick@pb1.pair.com>

    * zend_operators.c: MFZE1

    * zend_operators.c: - MFZE1

2002-07-07  Andi Gutmans  <andi@zend.com>

    * zend_objects_API.c: - Path which should improve previous fix.

    * zend_objects_API.c:
    - First try at solving problem with different objects being allocated the
    - same id.

2002-07-07  Stanislav Malyshev  <stas@zend.com>

    * zend_object_handlers.c: name length should be strlen+1

2002-07-07  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_language_parser.y:
    Allow for 'class Namespace::Bar extends Foo' syntax. Patch by Timm Friebe <thekid@thekid.de>.

2002-07-06  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fix problem where scope was lost in nested function calls.
    - Thanks to Timm Friebe for diving into this one.

2002-07-06  Zeev Suraski  <zeev@zend.com>

    * zend_language_parser.y: spelling fix

2002-07-05  Stig Bakken  <ssb@fast.no>

    * zend_builtin_functions.c: * folding fixes

2002-07-01  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Fix bug when acccessing $this not in class scope.

    * zend_objects.h
      zend_objects.c: - Export zend_object_get_address()

2002-06-30  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES: - Remember to document autoload when I have time.

2002-06-30  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_modules.h: - MFZE1

2002-06-29  Andi Gutmans  <andi@zend.com>

    * zend.h: - Get ready for alpha2

    * zend_execute_API.c: - Invalid -> Undefined

    * zend_language_parser.y: - Add missing semi-colon.

    * zend_execute_API.c
      zend_execute.c: - Improve some error messages.

    * zend_compile.c: - Revert previous fix.

    * zend_compile.c: - Change E_ERROR -> E_COMPILE_ERROR where needed.

    * zend_compile.c:
    - Fix for bug #17882. We complain if the same method is declared twice.

    * zend.h
      zend_operators.c: - Fix bug 15037
    - Bump version to alpha2-dev

2002-06-28  Andi Gutmans  <andi@zend.com>

    * zend_operators.c: - WS fix

2002-06-26  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c:
    - Autoloading support based on patch from Ivan Ristic.
    - Again I hope this feature ends up working well because if it doesn't we
    - might need to nuke it. This only works for global scoped classes and it
    - will never work for sub-classes so don't even ask!!!!!
    - Just define an __autoload() function in the global scope and it will be
    - called with the class name as the parameter if it doesn't manage to find
    - the class.

    * zend_API.c
      zend_builtin_functions.c
      zend_mm.h: - Centralize global class fetch

    * zend_alloc.c
      zend_execute.c:
    - Fix problem with scope's not changing correctly during method calls.
    - Reapply a tiny optimization to the allocator so that in non-debug mode
    - we clean memory without detecting leaks.

2002-06-24  Andi Gutmans  <andi@zend.com>

    * zend_fast_cache.h:
    - MFZE1 (Turn off fast cache until we make sure it performs well.)

    * zend_alloc.c: - More fixes (warnings, bug fixes etc.)

    * zend_execute.c:
    - Revert patch which checks at run-time if you're allowed to assign
    - certain values by reference.
    - We still need to find a solution for cases when this shouldn't be allowed
    - as it might cause leaks.

    * zend_alloc.c: - Fix crash bug and clean up a bit.

2002-06-24  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * Zend.m4: IMHO, ZTS should no longer be labeled experimental.

2002-06-24  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c: - MFZE1

    * zend_alloc.c: - Don't use cache if we're using ZEND_MM

    * zend_mm.c:
    - Hardcode alignment to 8. We might need a configure check for this.

    * zend_mm.c
      zend_mm.h: - Improve memory manager to allocate small blocks quickly.

    * zend_alloc.h
      zend_mm.h
      zend_alloc.c:
    - Don't keep allocated blocks in a linked list if we're in non-debug mode
    - as now the memory manager takes care to nuke all leaking blocks.

    * zend.h
      zend_types.h: - MFZE1

2002-06-23  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.c:
    - Fix problem with constructor not being inherited and called correctly.

    * zend_mm.c: - Fix small bug

    * zend_mm.c:
    - Almost completely implement realloc(). It now resizes in place when
    - possible.

2002-06-22  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c
      zend_mm.c: - Fix crash when zend_mm_shutdown is called more than once.

    * zend_alloc.c
      zend_alloc.h
      zend_globals.h
      zend_language_parser.y: - MFZE1

    * zend_constants.h
      zend_objects.c
      zend_variables.c
      zend_variables.h
      zend_constants.c
      zend_alloc.c
      zend_alloc.h: - Nuke persist_alloc().

2002-06-19  Andi Gutmans  <andi@zend.com>

    * zend_globals.h:
    - This was also supposed to be part of the previous ZEND_MM commit :)

    * zend_alloc.c:
    - Oops, this was supposed to be part of the previous #ifdef ZEND_MM change

    * zend_mm.h: - Use #ifdef for ZEND_MM

    * zend_mm.c: - Make sure MAX is defined

    * zend_constants.c:
    - Fix problem where you couldn't define constants with different cases but
    - the same name.

2002-06-18  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend.c: - MFZE1

2002-06-17  Andi Gutmans  <andi@zend.com>

    * zend_mm.c: - Improve speed of alignment calculation

    * zend_mm.c
      zend_mm.h
      zend_alloc.c:
    - Fix a bug and add code which frees actual allocated segments at the end
    - of execution (this still doesn't work because some blocks remain
    - referenced after the memory manager is killed.

    * zend_mm.c
      zend_mm.h: - Save space per-allocated block.

2002-06-16  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_execute.h
      zend_execute_API.c: - Fix bug in class constants
    - Start centralizing main class lookups. This will help implement
    - __autload()

    * zend_mm.c
      zend_mm.h:
    - Remove debug code which doesn't work anymore and add headers.

    * zend_globals.h
      zend_mm.c
      zend_mm.h
      zend_alloc.c
      ZendTS.dsp: - Commit an initial version of a home made memory manager.
    - It's just for seeing if this would be an advantage to PHP in MT
    - environments. If this is to become production material there is still
    - a long way to go.

2002-06-15  Andi Gutmans  <andi@zend.com>

    * zend_objects.h
      zend_objects_API.c:
    - Fix copy&paste problem where we allocated according to an old structure
    - decleration and not the new one.

2002-06-11  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c:
    - Don't show debug_backtrace() in the trace itself.
    - This patch is a bit ugly because the whole code itself is pretty complex
    - and hard to re-order.

    * zend_execute.c
      zend_language_parser.y:
    - Fix problem with assigning functions by reference.

2002-06-11  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * RFCs/004.txt: Add __delegate().

2002-06-10  Harald Radi  <harald.radi@nme.at>

    * zend_ts_hash.h
      zend_ts_hash.c: added TS_HASH macro

2002-06-10  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c: Fix leak

2002-06-09  Harald Radi  <harald.radi@nme.at>

    * zend_API.h
      zend_builtin_functions.c
      zend_object_handlers.h:
    only check for an available class entry instead of
    the std_object_handlers on some places


2002-06-08  Andi Gutmans  <andi@zend.com>

    * zend_hash.h
      zend.h: - This should improve performance on Windows

    * zend_hash.h:
    - Add a loop unrolled version of the hash function and a bit of an
    - explanation about our hash function (Ralf S. Engelschall)

2002-06-06  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * RFCs/004.txt: Add RFC on delegation.

2002-06-05  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_execute.c: Remove unused local variable.

2002-06-05  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.c
      zend_object_handlers.c:
    - Allow overloaded objects to receive the method name in its original
    - case.

2002-06-05  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_llist.c: - Fix memleak (patch by Stefan Sesser)

2002-06-04  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_ini_scanner.l: - Fix for bug #17462 (Patch by Edin Kadribasic)

2002-05-31  Andi Gutmans  <andi@zend.com>

    * ZendTS.dsp: - Add zend_objects_API.* to dsp

    * zend_objects_API.c: - Fix build (one more coming up)

    * zend_objects.c: - Fix build

2002-05-31  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * Zend.dsp: Add zend_objects_API.c to project.

2002-05-31  Stanislav Malyshev  <stas@zend.com>

    * Makefile.am
      zend_execute_API.c
      zend_globals.h
      zend_object_handlers.c
      zend_objects.c
      zend_objects.h
      zend_objects_API.c
      zend_objects_API.h: Generalize object storage and reference bookkeeping

2002-05-30  Venkat Raghavan S  <rvenkat@novell.com>

    * zend.h
      zend_config.nw.h
      acconfig.h: NetWare changes

2002-05-26  Andi Gutmans  <andi@zend.com>

    * zend_multibyte.c:
    - Add empty zend_multibyte.c to allow build with 4.3.0-dev.

2002-05-24  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Fugbix typo.

2002-05-24  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES: - Add a bit of information.

2002-05-20  Zeev Suraski  <zeev@zend.com>

    * zend_API.h
      zend_execute.h
      zend_list.h: MFZE1 (Expose more C++ APIs)

2002-05-14  Andi Gutmans  <andi@zend.com>

    * zend_objects.c
      zend_objects.h: - constructor_called is supposed to be destructor_called

2002-05-13  Sterling Hughes  <sterling@bumblebury.com>

    * zend_qsort.c: MFZE1

2002-05-13  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_builtin_functions.c: - MFZE1

2002-05-12  Zeev Suraski  <zeev@zend.com>

    * zend_highlight.c: MFZE1

2002-05-12  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Rephrase.

    * ZEND_CHANGES: Beautify.

    * ZEND_CHANGES: Start documenting the debug backtracing.

    * ZEND_CHANGES: Whitespace fixes.

2002-05-11  Zeev Suraski  <zeev@zend.com>

    * zend_highlight.c
      zend_highlight.h: MFZE1

2002-05-10  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c: - Nuke C++ comment

    * zend_builtin_functions.c:
    - Make debug_backtrace() return an array. Still not finished because I
    might want to differentiate between method calls and static methods.

    Example:
    $bt = debug_backtrace();
    foreach ($bt as $frame) {
    	if (isset($frame['class'])) {
    		print $frame['class'];
    		print "::";
    	}
    	print $frame['function'];
    	print "   [";
    	print $frame['file'];
    	print ":";
    	print $frame['line'];
    	print "]\n";
    }

2002-05-08  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_builtin_functions.c:
    - Hopefully fix problems with debug_backtrace()

2002-05-08  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_builtin_functions.c: - MFZE1

2002-05-07  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_builtin_functions.c
      zend_compile.h
      zend_execute.c:
    - More debug backtrace work. It still doesn't work very well...

2002-05-02  Andi Gutmans  <andi@zend.com>

    * zend.h
      zend_builtin_functions.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h: Initial support for built-in backtracing.
    There are still a few problems such as includes and calling other functions
    from internal functions which aren't seen (will have to think if and how to
    fix this).
    Also the main scripts filename isn't available. Need to think about that.

2002-04-30  Stanislav Malyshev  <stas@zend.com>

    * zend_API.h
      zend_builtin_functions.c
      zend_object_handlers.c
      zend_object_handlers.h
      zend_operators.h
      zend_API.c: Make OBJCE return zend_class_entry*, also some cleanups

2002-04-28  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_alloc.c
      zend_alloc.h: Revert.

2002-04-27  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_alloc.c
      zend_alloc.h:
    MFZE1: If the size-operands of memset are constants, the compiler can turn them into fast inline code. So, instead of using ecalloc, we use emalloc + memset in macro form now. emalloc will not return NULL, so the chosen macro form is safe. This is not true for malloc(3). An inline function accomodates our needs here. Suggested by: http://www.mail-archive.com/dev%40httpd.apache.org/msg02492.html (Sascha)

2002-04-25  Harald Radi  <h.radi@nme.at>

    * zend_config.w32.h: unbreak the win32 build

2002-04-24  Harald Radi  <h.radi@nme.at>

    * zend_API.c: MFZE1 saschas 'Avoid exceeding buffer limits' patch

2002-04-23  Harald Radi  <h.radi@nme.at>

    * zend_hash.c
      zend_hash.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ts_hash.c
      zend_ts_hash.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_API.c
      zend_API.h
      zend.h: some type cleanup work

2002-04-22  Harald Radi  <h.radi@nme.at>

    * zend_object_handlers.c
      zend_object_handlers.h
      zend_objects.h
      zend_operators.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c: added get_class_entry callback handler to the
    object handlers structure

2002-04-22  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * Zend.m4: MFZE1: Change default value of inline-opt to yes (Sascha).

2002-04-22  Harald Radi  <h.radi@nme.at>

    * zend_config.w32.h
      acconfig.h
      flex.skl: fixed linkage warning under win32

2002-04-20  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c: MFZE1

2002-04-19  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_list.c
      zend_hash.c
      zend_hash.h:
    MFZE1: make sure the resource-list is always consistent during shutdown (Thies).

    * zend_hash.c: MFZE1: Fix imbalance bug (Zeev).

2002-04-10  Jani Taskinen  <sniper@iki.fi>

    * zend_language_scanner.l
      zend_language_parser.y: MFZE1

2002-04-07  Stanislav Malyshev  <stas@zend.com>

    * zend.h: make compatible with current PHP

    * zend_compile.c: sync

2002-03-29  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_compile.c: - revert patch

2002-03-25  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_compile.c: - MFZE1

2002-03-23  Andi Gutmans  <andi@zend.com>

    * zend_ts_hash.c
      zend_ts_hash.h:
    - Fix build without ZTS. If someone has a nicer fix let me know.

2002-03-21  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
    - No idea how this slipped in. Fix delete $obj statement.

2002-03-20  Harald Radi  <h.radi@nme.at>

    * ZendTS.dsp
      zend.h
      zend_ts_hash.c
      zend_ts_hash.h: added thread safe hashtable which allows concurrent
    reads but only exclusive writes

2002-03-19  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y
      zend.h:
    - Finish covering all parsed methods to check for validity in parser.
    - Change zval's refcount to zend_uint (If it doesn't slow down the Engine
    - too much it should probably stay this way). If anyone has time to test
    - the difference in speed between zend_ushort & zend_uint in zend.h of
    - the struct _zval_struct (one line change) I'd be glad to get some
    - figures.

2002-03-18  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_language_parser.y:
    - More fixes to check for member/function call legality.

2002-03-17  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y
      zend_compile.c:
    - Start putting error handling where method calls are being used in a
    - context where only writable variables should be used.

2002-03-15  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_object_handlers.h
      zend_objects.c
      zend_objects.h
      zend_variables.c: - Pass TSRMLS to callbacks.

    * zend_execute.c:
    - Scope fix. When calling an imported function the scope will change
    - correctly to the scope of the functions class.
    <?php

    	function Hello()
    	{
    		print "Wrong one\n";
    	}

    	class MyClass {
    		static $hello = "Hello, World\n";

    		function Hello()
    		{
    			print self::$hello;
    		}

    		function Trampoline()
    		{
    			Hello();
    		}
    	}

    	import function Trampoline from MyClass;

    	Trampoline();
    ?>

    * zend_opcode.c
      zend_execute.c
      zend_compile.h
      zend_compile.c:
    - Fix issues with $this when using it by itself without indirection such as
    - $this->foo.

2002-03-14  Stanislav Malyshev  <stas@zend.com>

    * OBJECTS2_HOWTO: more cleanup

    * OBJECTS2_HOWTO: Update howto

    * zend_execute.c: fix for delete $this and unset $this

    * zend_execute_API.c: Fix call_user_function

2002-03-12  Andi Gutmans  <andi@zend.com>

    * zend.h: - Forgot to close comment.

    * zend.h: - Macro for duality between Engine 1 and 2

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_opcode.c
      zend_operators.c: - Another couple of indirection fixes.
    - Make class_entry->refcount be part of the structure and not allocated.

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_opcode.c: - Fix bug introduced with latest class hash table change.

2002-03-12  Stanislav Malyshev  <stas@zend.com>

    * zend_API.c: Fix standard object creation

    * zend_API.c
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_opcode.c
      zend.c
      zend.h: - make class tables contain class_entry *, not class_entry
    - fix isset($this)

2002-03-10  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Fix build in ZTS mode.

2002-03-10  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_object_handlers.c
      zend_object_handlers.h: New stuff for objects API:
    - Better assignment handling
    - More flexible operations with zval-containing objects

2002-03-09  Andi Gutmans  <andi@zend.com>

    * tests/zend2.php:
    - Add the original example script to the CVS so that it's always available.

2002-03-08  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Add 'import const' example.

2002-03-08  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Support importing constants. e.g.:
    <?php

    	class MyOuterClass {
    		const Hello = "Hello, World\n";
    	}

    	import const Hello from MyOuterClass;
    	print Hello;

2002-03-07  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
    Add another 'import' example and merge 'import' section into 'Namespaces' section.

2002-03-06  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Add function * and class * functionality. Only constants are left.
    <?php

    	class MyOuterClass {
    		class MyInnerClass {
    			function func1()
    			{
    				print "func1()\n";
    			}

    			function func2()
    			{
    				print "func2()\n";
    			}
    		}
    	}

    	import class * from MyOuterClass;
    	import function func2 from MyOuterClass::MyInnerClass;

    	MyInnerClass::func1();
    	func2();

2002-03-02  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Consistency.

    * ZEND_CHANGES: Add 'import statement' section.

2002-03-02  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l:
    - Initial patch to support importing from class scopes (for Stig).
    - It isn't complete yet but I want to work on it from another machine. It
    - shouldn't break anything else so just don't try and use it.
    - The following is a teaser of something that already works:
    <?php

    	class MyClass
    	{
    		function hello()
    		{
    			print "Hello, World\n";
    		}
    		class MyClass2
    		{
    			function hello()
    			{
    				print "Hello, World in MyClass2\n";
    			}
    		}
    	}

    	import function hello, class MyClass2 from MyClass;

    	MyClass2::hello();
    	hello();
    ?>

2002-03-02  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_builtin_functions.c: - MFZE1

2002-03-01  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c: MFZE1

2002-03-01  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l:
    - Remove use of C++ reserved words namespace/this

    * zend_opcode.c
      zend_language_parser.y
      zend_compile.h
      zend_compile.c
      zend_API.c: - Fix bug in nested try/catch's
    - Infrastructure for implementing imports of methods.

    * zend_objects.c:
    - Fix crash reported by Sebastian when destructor function causes a fatal
    - error. I hope this does it and we don't find any other problems.

2002-02-26  Andi Gutmans  <andi@zend.com>

    * zend_alloc.h
      zend_alloc.c
      zend.c: - MFZE1

2002-02-21  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES:
    Maintain ZEND_CHANGES to account for the addition of private member variables.

2002-02-21  Andi Gutmans  <andi@zend.com>

    * zend_object_handlers.c
      zend_opcode.c
      zend_language_parser.y
      zend_language_scanner.l
      zend_compile.c
      zend.c
      zend.h
      zend_API.c: - Experimental support for private members.
    <?
    	class MyClass {
    		private $Hello = "Hello, World!\n";

    		function printHello()
    		{
    			print $this->Hello;
    		}
    	}

    	class MyClass2 extends MyClass {
    		function printHello()
    		{
    			MyClass::printHello(); /* Should print */
    			print $this->Hello; /* Shouldn't print out anything */
    		}
    	}

    	$obj = new MyClass();
    	print $obj->Hello; /* Shouldn't print out anything */
    	$obj->printHello(); /* Should print */

    	$obj = new MyClass2();
    	print $obj->Hello; /* Shouldn't print out anything */
    	$obj->printHello();
    ?>

2002-02-14  Stanislav Malyshev  <stas@zend.com>

    * zend.h
      zend_API.c: Pass TSRM to create_object

2002-02-14  Andrei Zmievski  <andrei@ispi.net>

    * zend_compile.c:
    Fix the bug where the declared properties without init values were not
    entered into the table.

2002-02-13  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:    <?php
    	class MyException1 {

    	}

    	class MyException2 {

    	}

    	try {
    		throw new MyException2();
    	} catch (MyException1 $m) {
    		print "Caught MyException1";
    	} catch (MyException2 $m) {
    		print "Caught MyException2";
    	}

2002-02-10  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_compile.h:
    Export lex_scan(). Both the PHPDoc and tokenizer extension need this. I hope this is okay with Z&A.

2002-02-08  Andi Gutmans  <andi@zend.com>

    * zend_objects.c: - Remove object debug messages.

2002-02-07  Stanislav Malyshev  <stas@zend.com>

    * Makefile.am
      OBJECTS2_HOWTO
      ZendTS.dsp
      configure.in
      zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h
      zend_object_handlers.c
      zend_object_handlers.h
      zend_objects.c
      zend_objects.h
      zend_operators.c
      zend_operators.h
      zend_variables.c: Mega-commit: Enter the new object model
    Note: only standard Zend objects are working now. This is definitely going to
    break custom objects like COM, Java, etc. - this will be fixed later.
    Also, this may break other things that access objects' internals directly.

2002-02-04  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - This small patch should also take care of allowing unseting of $this->foo
    - and static members. The unset() opcode was luckily already suitable for
    - object overloading.

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_objects.c:
    - Fix problem with the objects_destructor called during shutdown. It was
    - freeing objects from id 0 instead of id 1. id 0 is not used.
    - Change isset/empty opcodes to support static members and the new way of
    - doing $this->foobar. Also the opcodes operate now on the hash table
    - combined with the variable names so that they can be overloaded by the
    - soon to be added overloading patch.

2002-02-03  Adam Dickmeiss  <adam@indexdata.dk>

    * Makefile.am
      configure.in:
    Zend config sets ZEND_EXTRA_LIBS. Bugs 14452, 14602, 14616, 14824

2002-02-02  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_builtin_functions.c: Revert per Andi's request. Sorry :-(

    * zend_builtin_functions.c: Fix warning. Again :-)

2002-02-02  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c:
    - Please don't use strcmp() and friends in Zend but only the mem*
    - functions. I didn't check this patch so please check that it works.

2002-02-02  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_builtin_functions.c: Fix a warning.

2002-02-02  Andi Gutmans  <andi@zend.com>

    * zend_modules.h: - Nice catch by Derick. GINIT is dead.

2002-02-01  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_builtin_functions.c: MFZE1: is_a()

2002-01-27  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_config.w32.h:
    MFZE1: define a couple of macros under win32. (Patch By: Jon Parise <jon@php.net>)

2002-01-25  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute_API.c
      zend_objects.c
      zend_objects.h
      zend_opcode.c:
    - First destructor hell fix. There was a situation where an object's
    - destructor could be run after its class was already dead. Right now
    - object destructors is the first thing whic happens during shutdown in
    - order to prevent this problem. It's very likely that destructors will
    - cause more grief and we'll have to outline exactly when you should use
    - them and what kind of logic you're allowed to do inside of them.
    - This bug was reported by sebastian.

2002-01-22  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fix a bug reported by Sebastian with indirect class names not working.

2002-01-20  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_language_parser.y
      zend_opcode.c: - Improve performance of functions that use $GLOBALS[]
    - Please check this and make sure it doesn't break anything.

2002-01-19  Thies C. Arntzen  <thies@thieso.net>

    * zend_language_parser.y: MFZE1

2002-01-14  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c:
    - Fix crash bug in call_user_function_ex(). Thanks to Sebastian for the
    - very nice and short reproducing script.
    <?php
    	$array = array('foo', 'bar');

    	uasort($array, 'cmp');

    	function cmp($a, $b)
    	{
    		return (strcmp($a[1], $b[1]));
    	}
    ?>

2002-01-14  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Update Exceptions example.

2002-01-13  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_globals.h
      zend_language_parser.y:
    - Change exception handling to use the Java-like catch(MyException $exception)
    - semantics. Example:
    <?php

    	class MyException {
    		function __construct($exception)
    		{
    			$this->exception = $exception;
    		}

    		function Display()
    		{
    			print "MyException: $this->exception\n";
    		}

    	}
    	class MyExceptionFoo extends MyException {
    		function __construct($exception)
    		{
    			$this->exception = $exception;
    		}
    		function Display()
    		{
    			print "MyException: $this->exception\n";
    		}
    	}

    	try {
    		throw  new MyExceptionFoo("Hello");
    	} catch (MyException $exception) {
    		$exception->Display();
    	}
    ?>

    * zend_ini_scanner.l: - MFZE1

2002-01-06  Andi Gutmans  <andi@zend.com>

    * zend.c:
    - Output error when there's an uncaught exception (by Timm Friebe)

    * zend_execute.c: - Make sure $this is passed on to methods

2002-01-06  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.l
      zend_language_parser.y
      zend_language_scanner.h
      zend_language_scanner.l
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_modules.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_qsort.c
      zend_qsort.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_static_allocator.c
      zend_static_allocator.h
      zend_variables.c
      zend_variables.h
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.c
      zend_compile.h
      zend_config.w32.h
      zend_constants.c
      zend_constants.h
      zend_dynamic_array.c
      zend_dynamic_array.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_ini.c: Happy New Year.

2002-01-05  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Small fix

    * zend_compile.c
      zend_compile.h
      zend_execute.c: - Allow passing of $this as function arguments.
    - Fix a bug which I introduced a couple of months ago

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h:
    - Significantly improve the performance of method calls and $this->member
    - lookups.

2002-01-04  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Improve performance of indirect-referenced function calls

    * zend_compile.c: - Nuke C++ comments

    * zend_compile.c
      zend_compile.h
      zend_execute.c: - Separate other kinds of function calls too.
    - Significantly improve performance of function calls by moving lowercasing
    - the function name to compile-time when possible.

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
    - Start splitting up different kinds of function calls into different
    - opcodes.

2002-01-03  Derick Rethans  <d.rethans@jdimedia.nl>

    * zend_API.c
      zend_API.h
      zend_execute.c
      zend_list.c:
    - MFZE1 for exit fix, exposing current function name in error messages and
      exposing zend_zval_type_name().

2001-12-31  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Consistency.

2001-12-31  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES:
    - Add example of default argument for argument passed by-ref

2001-12-30  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Typo.

2001-12-29  Andi Gutmans  <andi@zend.com>

    * zend.h:
    - #define to help #ifdef stuff in PHP sources to make them work w/ ZE1 and
    - 2

    * ZEND_CHANGES: - A few clarifications

2001-12-29  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Integrate Andi's examples and some notes by Stig.

    * ZEND_CHANGES: Update Exceptions example.

2001-12-28  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
    - Fix some case insensitivity stuff in respect to classes

    * zend_execute.c
      zend_language_parser.y:
    - Support default arguments for reference parameters
    - Fix two compile warnings

    * zend_compile.c:
    - Wasn't adding the lower case version of the class name to the hash

2001-12-27  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_objects.c:
    - Use two underscores for __construct(), __clone and friends...

    * zend_objects.c:
    - Only check refcount of object if the destructor was called.

    * zend.c
      zend.h
      zend_API.h
      zend_compile.c
      zend_objects.c
      zend_objects.h:
    - Experimental support for destructors. We need to see if destructors
    - will actually work well in the context of PHP so we should consider this
    - as experimental. Possible problems might be that when the constructor is
    - run PHP might not be in a stable state.

    * zend_compile.c
      zend_compile.h
      zend_execute.c: - Support parent:: again

    * zend_compile.c: - Support unified constructor name _construct()

2001-12-26  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_execute_API.c: - Fix scoping issue. The following works now:
    <?
    	class MyClass {
    		static $id = 0;

    		function MyClass()
    		{
    			$this->id = self::$id++;
    		}

    		function _clone()
    		{
    			$this->name = $clone->name;
    			$this->address = "New York";
    			$this->id = self::$id++;
    		}
    	}



    	$obj = new MyClass();

    	$obj->name = "Hello";
    	$obj->address = "Tel-Aviv";

    	print $obj->id;
    	print "\n";

    	$obj = $obj->_clone();

    	print $obj->id;
    	print "\n";
    	print $obj->name;
    	print "\n";
    	print $obj->address;
    	print "\n";

    * zend.c: - Print out object id for easier debugging

    * zend.c
      zend.h
      zend_API.h
      zend_compile.c
      zend_objects.c: - Pretty much finish _clone() support

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y: - Initial support for _clone()

    * zend_compile.c
      zend_language_parser.y:
    - Start fixing the parsing rules so that function and method calls
    - can't be used in a write context.

    * zend.c: - Fix crash correctly.

2001-12-25  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y: - Revert delete syntax patch

    * zend.c
      zend_execute.c: - Fix a crash (not a thorough fix).
    - Commented old code

2001-12-24  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fixed bug where global functions weren't called if they didn't exist
    - in the class scope

2001-12-23  Andi Gutmans  <andi@zend.com>

    * zend.c:
    - Fix a bug where function's didn't work anymore in multi-threaded
    - servers after the latest startup changes.

2001-12-22  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute_API.c
      zend_language_parser.y:
    - Add initial capability of defining nested classes as class foo::bar

2001-12-18  Zeev Suraski  <zeev@zend.com>

    * zend_language_scanner.h
      zend_language_scanner.l: MFZE1

2001-12-16  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: I'm too trigger-happy.

    * ZEND_CHANGES: delete is now function

2001-12-16  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
    - Seems like most people prefer delete($obj) over delete $obj.

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y: - Start adding parsed variable checks.

    * zend_compile.h
      zend_language_parser.y:
    - Framework for knowing what kind of variable we just parsed.
    - This will be used in compile-time error checking which couldn't be done
    - at the level of the grammar.

2001-12-13  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
    - Rearrange grammar to allow dereferencing of objects returned from
    - functions. It still crashes though.

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_opcode.c: - Fix crash bug in startup code.
    - Start work on being able to reference global and local scope

2001-12-12  Andi Gutmans  <andi@zend.com>

    * Zend.dsp
      zend.c
      zend_constants.c
      zend_globals.h:
    - Infrastructure changes for allowing to access the global scope from
    - within a class scope.
    - Fix the Zend.dsp project a bit. It seems someone pretty much killed it
    - when commiting their own personal configuration. Please be careful in
    - future.

    * zend.h
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_globals.h
      zend_language_parser.y:
    - Make classes have scope and function/constant lookups default to the class

2001-12-11  Andi Gutmans  <andi@zend.com>

    * zend.c: - Merge from ZE1

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_opcode.c:
    - Rename zend_class_entry.constants -> zend_class_entry.constants_table

    * zend_execute.c:
    - Start making scope change correctly when calling namespace functions.
    - When inside a namespace fallback to global namespace when function
    - or constant is not found.

2001-12-11  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * LICENSE: Forgot to update the LICENSE.

    * LICENSE
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.c
      zend_compile.h
      zend_config.w32.h
      zend_constants.c
      zend_constants.h
      zend_dynamic_array.c
      zend_dynamic_array.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_ini.c
      zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.l
      zend_language_parser.y
      zend_language_scanner.h
      zend_language_scanner.l
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_modules.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_qsort.c
      zend_qsort.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_static_allocator.c
      zend_static_allocator.h
      zend_variables.c
      zend_variables.h: Update headers.

    * Zend.m4
      zend.h: MFZE1 (AIX fixes)

    * zend_highlight.h
      zend_highlight.c: MFZE1 (added zend_strip mode in the highliter)

2001-12-10  Andi Gutmans  <andi@zend.com>

    * zend.h
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y: - More namespaces work.
    - Nuke memory leak.

2001-12-08  Andi Gutmans  <andi@zend.com>

    * zend.c: - Fix crash with unhandled exceptions

2001-12-06  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Support constants. The following works now:
    <?
    	class foo {
    		const GC = "foo constant\n";
    	}

    	define("GC", "Global constant\n");

    	namespace;
    	print GC;
    	namespace foo;
    	print GC;
    	namespace;
    	print foo::GC;

    ?>

    * zend_language_parser.y
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_globals.h:
    - Initial work on changing namespace scope. Only methods & variables
    - right now.
    <?
    	$hey = "Global hey\n";

    	class foo {
    		static $hey = "Namespace hey\n";
    		function bar()
    		{
    			print "in foo::bar()\n";
    		}
    	}
    	function bar()
    	{
    		print "in bar()\n";
    	}

    	bar();
    	namespace foo;
    	bar();
    	namespace;
    	bar();
    	namespace foo;
    	$bar_indirect = "bar";
    	$bar_indirect();

    	namespace;
    	print $hey;
    	namespace foo;
    	print $hey;
    	$hey = "Namespace hey #2\n";
    	namespace;
    	print $hey;
    	$hey = "Global hey #2\n";
    	namespace foo;
    	print $hey;
    ?>

    * zend.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_language_parser.y:
    - Nuke the namespace work I did. It'll be redone differently.

2001-12-05  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Document recent changes.

2001-12-04  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c: - Damn Zeev :)

2001-12-01  Andi Gutmans  <andi@zend.com>

    * zend_API.c:
    - Revert one of the changes because it might be before the memory
    - manager has started.

    * zend_API.c
      zend_constants.c: - Use alloca() when possible.

2001-11-30  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_language_parser.y
      zend_opcode.c:
    - Initial support for class constants. There are still a few semantic
    - issues which need to be looked into but basically it seems to work.
    - Example:
    <?php
    	class foo
    	{
    		const hey = "hello";
    	}

    	print foo::hey;
    ?>

    * Zend.m4: - Fix typo

2001-11-27  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
    - Support syntax for class constants (doesn't do anything yet but
    - required some reworking of the grammar).

2001-11-26  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y:
    - Support static $var = 0; style initialization of static class
    - members. For example:
    -	class foo {
    -		static $my_static = 5;
    -
    -	}
    -
    -	print foo::$my_static;

2001-11-25  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_compile.c: - Fix crash and leak

    * zend_compile.c: - Whitespace

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y
      zend_opcode.c: - Support static members. The following script works:
    <?
    	class foo
    	{
    		class bar
    		{
    			function init_values()
    			{
    				for ($i=1; $i<10; $i++) {
    					foo::bar::$hello[$i] = $i*$i;
    				}
    			}

    			function print_values()
    			{
    				for ($i=1; $i<10; $i++) {
    					print foo::bar::$hello[$i] . "\n";
    				}
    			}
    		}
    	}

    	foo::bar::init_values();
    	foo::bar::print_values();

    	for ($i=1; $i<10; $i++) {
    		print $hello[$i]?"Shouldn't be printed\n":"";
    	}
    ?>

2001-11-24  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c: - MFZE1

2001-11-15  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: MFZE1

2001-11-05  stig  <stig@pb1.pair.com>

    * zend_objects.h: add newline at end of file to avoid warnings

    * zend_language_parser.y: non-zts compile fix

2001-11-04  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_language_parser.y:
    - Support instantiation of nested class. The following script now should
    - work:
    -<?php
    -	class foo
    -	{
    -		function bar()
    -		{
    -			print "bar() in class bar\n";
    -		}
    -
    -		class barbara
    -		{
    -			function bar()
    -			{
    -				print "bar() in class foo::barbara\n";
    -			}
    -		}
    -	}
    -
    -	$obj = new foo();
    -	$obj->bar();
    -
    -	$obj = new foo::barbara();
    -	$obj->bar();
    -

2001-11-03  Andi Gutmans  <andi@zend.com>

    * zend.h: - RISC OS patch by Alex Waugh

    * zend.c
      zend_API.h
      zend_compile.c: - Add some initializations

    * zend_compile.c
      zend_execute.c
      zend.h:
    - Add constructor to the zend_class_entry instead of looking it up each
    - time by name.
    - This will allow the next patch of being able to instantiate nested
    - classes such as new foo::bar::barbara();

2001-10-29  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_opcode.c: - Fix internal classes

    * zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_globals.h
      zend_language_parser.y
      zend_opcode.c: - Initial support for nested class definitions

2001-10-27  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: MFTGZE1

2001-10-26  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c: - Fix Zeev's MFZE1

2001-10-23  Zeev Suraski  <zeev@zend.com>

    * zend_constants.c
      zend_execute_API.c
      zend_globals.h: MFZE1

2001-10-20  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c: MFHZ1

2001-10-12  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_API.c
      zend_API.h
      zend_modules.h: MFZE1: Introduced extension version numbers (Stig)

2001-10-04  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * zend_hash.c: MFZE1

2001-09-30  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l:
    - Merge the NAMESPACES_BRANCH. It wasn't a good idea to have a branch when
    - the whole CVS tree is work in progress

    * zend_compile.h
      zend_execute.c:
    - At last I've had some time to move all execute() locals into one struct.
    - No immediate gain but it makes it more clear what variables are temps
    - and which ones are execute() locals.

2001-09-27  Andi Gutmans  <andi@zend.com>

    * zend_modules.h: - Bump it up in the right place

    * zend_modules.h: - Increase API number

2001-09-26  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend.h
      zend_compile.c
      zend_execute.c: - Good catch by Sterling

2001-09-24  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_execute_API.c
      zend_globals.h: - More namespaces work

2001-09-22  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * ZEND_CHANGES: Keep ZEND_CHANGES up-to-date.

2001-09-22  Zeev Suraski  <zeev@zend.com>

    * zend_globals.h
      flex.skl
      zend.c
      zend_ini_scanner.l
      zend_language_scanner.l: MFZE1

2001-09-20  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_compile.c: - Fix build on Win32

    * zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l
      zend.c:
    - Create a branch for namespaces. This isn't even remotely close to
    - working.

    * zend_list.h: - Nuke unused enum

2001-09-19  Zeev Suraski  <zeev@zend.com>

    * flex.skl
      zend.c
      zend_globals.h
      zend_ini_scanner.l
      zend_language_scanner.l: MFZE1

2001-09-19  Andi Gutmans  <andi@zend.com>

    * Makefile.am: - MFZE1

2001-09-19  Sebastian Bergmann  <sb@sebastian-bergmann.de>

    * Makefile.am
      zend_hash.c
      zend_hash.h
      zend_ini.c
      zend_llist.c
      zend_llist.h
      zend_qsort.c
      zend_qsort.h
      Zend.dsp
      ZendTS.dsp: MFZE1

2001-09-17  Brian L. Moon  <brianm@dealnews.com>

    * RFCs/003.txt: adding RFC for loose type requirements for functions

2001-09-16  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: MFZE1

2001-09-10  Zeev Suraski  <zeev@zend.com>

    * zend_compile.h
      zend_globals.h
      zend_ini_scanner.h
      zend_ini_scanner.l
      zend_language_scanner.h
      zend_language_scanner.l: MFZE1 (nuke cplusplus code)

    * zend.c
      zend_execute_API.c
      zend_globals.h: MFZE1 (support return value in execute_scripts)

2001-09-08  stig  <stig@pb1.pair.com>

    * RFCs/002.txt: remove bogus comment :)

    * RFCs/002.txt: RFC document for namespaces

    * RFCs/001.txt: wrapped to 80 columns :)

2001-09-07  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_language_parser.y:
    - Shift around the variable parsing code to make it simpler.

    * zend_llist.c:
    - Fix warning (was fixed in ZE1 and not merged at some point). Please make
      sure you merge patches!

2001-09-05  Stanislav Malyshev  <stas@zend.com>

    * zend_operators.c: MFZE1

2001-09-03  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y: - CLS_CC -> TSRMLS_CC

2001-08-31  Sterling Hughes  <sterling@bumblebury.com>

    * zend_llist.h: spaces->tabs

    * zend_llist.c
      zend_llist.h
      zend_execute_locks.h: MFZE1

2001-08-31  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_compile.h: MFZE1

2001-08-30  Andi Gutmans  <andi@zend.com>

    * zend_compile.h
      zend_compile.c: - Make it compile in thread-safe mode.

    * zend_compile.c
      zend_compile.h
      zend_execute.c: - Get rid of warning and C++ comments

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l: - Initial support for exceptions.

2001-08-30  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: MFZE1

2001-08-28  Zeev Suraski  <zeev@zend.com>

    * zend_language_scanner.l: MFZE1

2001-08-27  Andi Gutmans  <andi@zend.com>

    * RFCs/001.txt: - Add sample RFC

2001-08-26  Stanislav Malyshev  <stas@zend.com>

    * Zend.m4
      zend.h: Add dlsym underscore detection, by Jani Taskinen

2001-08-26  Andi Gutmans  <andi@zend.com>

    * zend_operators.c: - MFZE1

    * zend_API.c:
    - Merge Andrei's fix from Engine 1. Please commit patches to both trees!

2001-08-21  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_execute_API.c: MFZE1

2001-08-20  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c
      zend_hash.h: MFZE1

2001-08-19  Andi Gutmans  <andi@zend.com>

    * zend.h: - Fix compile problem

2001-08-19  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: MFZE1

2001-08-18  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_llist.c
      zend_llist.h: - Merge Sterling's patches from ZE1

2001-08-17  Andrei Zmievski  <andrei@ispi.net>

    * zend_execute.c: MFZE1

2001-08-17  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: MFZE1

2001-08-16  Zeev Suraski  <zeev@zend.com>

    * flex.skl
      zend_ini_scanner.l
      zend_language_scanner.l: MFZE1

2001-08-16  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Try and nuke get_object_zval_ptr()

    * zend_objects.c: - Remove bogus notice

    * zend_variables.c: - Sync with ZE1

    * zend.h
      zend_execute.c
      zend_objects.c
      zend_objects.h
      zend_operators.c
      zend_operators.h
      zend_variables.c: - Fix a bug in method calls.
    - Try to get the old copying behavior of objects to work (doesn't work yet).

2001-08-15  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c: MFZE1

2001-08-14  Zeev Suraski  <zeev@zend.com>

    * zend_constants.c
      zend_constants.h
      zend_variables.c
      zend_variables.h: MFZE1

2001-08-13  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - MFZE1

    * zend_execute.c: - Merge from Engine 1

2001-08-13  Zeev Suraski  <zeev@zend.com>

    * zend_API.c
      zend_operators.c
      zend_operators.h: MFZE1

2001-08-12  Stanislav Malyshev  <stas@zend.com>

    * zend_API.h: _FUNCTION is used in definition, so use _D

2001-08-11  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_API.h
      zend_objects.c
      zend_operators.c: - More work on making objects work

    * zend_API.c
      zend_objects.c
      zend_objects.h
      zend_operators.c:
    - Fix some places which create objects. The fixes are ugly and will be
      revised when things start working well

2001-08-11  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_compile.c
      zend_constants.c
      zend_constants.h
      zend_execute_API.c
      zend_hash.c
      zend_hash.h
      zend_ini.h
      zend_ini_scanner.l
      zend_language_parser.y
      zend_language_scanner.l
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_operators.c: Whitespace

2001-08-11  Andi Gutmans  <andi@zend.com>

    * Makefile.am
      zend_objects.c: - Fix UNIX build.

    * zend_compile.c:
    - Need to do some rewriting in the parser instead of this.

    * zend.h:
    - For Sebastian. Will allow to see you're using the Engine 2 CVS via
      phpinfo()

2001-08-10  Andi Gutmans  <andi@zend.com>

    * zend_API.h: - Merge from Engine 1

    * zend_compile.c: - A couple of fixes

    * zend_API.h: - Merge from Engine 1 CVS

2001-08-09  Andi Gutmans  <andi@zend.com>

    * zend.c: - Merge from Engine 1 tree

2001-08-08  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_compile.c
      zend_compile.h
      zend_globals.h: - Merge new $_GET, $_POST etc. patch from Engine 1 tree

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y: - Preliminary patch for method() dereferencing

    * zend.c
      zend.h: - Merge zend_try fix from Engine 1

2001-08-07  Zeev Suraski  <zeev@zend.com>

    * ZendTS.dsp: Migrate .dsp patches

2001-08-07  Andi Gutmans  <andi@zend.com>

    * ZendTS.dsp: - Forgot to commit the updated dsp

    * ZendTS.dsp: - More sync with latest CVS

    * zend_objects.c
      zend_objects.h
      zend_operators.h
      zend_variables.c
      ZendTS.dsp
      zend.h
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_language_parser.y
      zend_language_scanner.l: - Sync Engine2 CVS with latest Engine CVS

2001-08-06  Zeev Suraski  <zeev@zend.com>

    * zend_indent.c: Commit uncommitted build fix

    * zend_compile.c
      zend_globals.h
      zend_language_scanner.l:
    Fix an off by one lineno issue, in case of an implicit ;

    * flex.skl
      zend_highlight.c: Better shared code

    * Makefile.am
      Zend.dsp
      Zend.m4
      ZendTS.dsp
      flex.skl
      zend.c
      zend_globals.h
      zend_globals_macros.h
      zend_highlight.c
      zend_indent.c
      zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.h
      zend_ini_scanner.l
      zend_language_scanner.h
      zend_language_scanner.l:
    Merge from branch - move to standard C scanners in thread safe mode

    * Makefile.am
      Zend.m4
      flex.skl
      zend_ini_scanner.l
      zend_language_scanner.l: Make the C++less scanner compile under UNIX

2001-08-06  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Move to using Z_ macros

    * zend_API.h: - Use Z_ macros

2001-08-05  Zeev Suraski  <zeev@zend.com>

    * zend_globals_macros.h: More nulled-out macros

    * zend.c
      zend_API.c
      zend_API.h: TSRMLS_FETCH work

2001-08-04  stig  <stig@pb1.pair.com>

    * .cvsignore: added some more stuff to .cvsignore

2001-08-03  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: Fix buglet

    * zend_alloc.c: Fix macro

    * zend.c
      zend_alloc.c
      zend_globals.h:
    Implement fast memory allocation and reduced fragmentation under Windows.

    * zend_globals_macros.h: Some compat macros

2001-08-02  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
    require_once()/include_once will return true in case a file was not included
    because it was already included earlier.
    Changed the default return value type of the include() family from long to
    boolean

    * zend_constants.c
      zend_execute_API.c
      zend_hash.c
      zend_hash.h:
    Avoid going over huge lists of functions, classes and constants.
    Special thanks to the guys from the MS lab for the profiling tools :)

    * zend.c
      zend_execute_API.c
      zend_hash.c
      zend_hash.h
      zend_list.c
      zend_list.h: Some cleanup

    * zend_builtin_functions.c
      zend_hash.c
      zend_hash.h: TSRMLS fixes

    * zend_ini_parser.y: non ZTS build fix

    * Zend.dsp
      ZendTS.dsp
      flex.skl
      zend.c
      zend_globals.h
      zend_globals_macros.h
      zend_highlight.c
      zend_indent.c
      zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.h
      zend_ini_scanner.l
      zend_language_scanner.h
      zend_language_scanner.l:
    Implement a standard C thread safe scanner within flex

2001-08-01  Zeev Suraski  <zeev@zend.com>

    * flex.skl
      zend_language_scanner.l:
    Implement fast scanning in the multithreaded environment

2001-07-31  Zeev Suraski  <zeev@zend.com>

    * zend_language_scanner.l: the make Sebastian happy part of the day :)

    * zend_ini.c
      zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.h
      zend_ini_scanner.l: More TSRMLS_FETCH work

    * zend_list.c
      zend_list.h: More TSRMLS_FETCH annihilation

    * zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_hash.c
      zend_hash.h
      zend_ini.c
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_modules.h
      zend_opcode.c: More TSRMLS_FETCH work

2001-07-30  Zeev Suraski  <zeev@zend.com>

    * zend_language_scanner.l: Compile fix

    * zend.c
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_constants.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_highlight.c
      zend_highlight.h
      zend_ini.c
      zend_ini.h
      zend_ini_parser.y
      zend_language_scanner.l
      zend_modules.h: More TSRMLS_FETCH work

    * zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_modules.h:
    More TSRMLS_FETCH work, and get rid of redundant ParametersPassedByRef

2001-07-30  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c
      zend_API.h:
    Let's be consisten and keep TSRMLS_DC declaration after num_args.

2001-07-30  Zeev Suraski  <zeev@zend.com>

    * zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_hash.c
      zend_hash.h
      zend_highlight.h
      zend_ini_parser.y
      zend_ini_scanner.h
      zend_ini_scanner.l
      zend_language_parser.y
      zend_language_scanner.l
      zend_list.c
      zend_list.h
      zend_operators.c
      zend_operators.h
      zend_variables.c: More TSRMLS_FETCH annihilation

    * zend_API.c
      zend_API.h: Get rid of more TSRMLS_FETCH's

    * zend.c
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.h
      zend_constants.c
      zend_execute.c
      zend_execute_API.c
      zend_opcode.c: Avoid TSRMLS_FETCH()'s (still lots of work left)

2001-07-29  Andi Gutmans  <andi@zend.com>

    * zend_execute.h: - More object junk

    * zend.c: - Object macros...

2001-07-28  Andi Gutmans  <andi@zend.com>

    * zend_operators.c: - Fix build

    * zend_operators.c: - More object macros.

    * zend_builtin_functions.c: - Use the Z_OBJ* macros for accessing objects

    * zend.h
      zend_operators.h:
    - Small patch to allow fixing the PHP tree to be compatible w/ the initial
    - Zend 2 objects patch. Hopefully I can commit that this week.

2001-07-28  Zeev Suraski  <zeev@zend.com>

    * Zend.dsp
      ZendTS.dsp
      zend.c
      zend.h
      zend_API.c
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_fast_cache.h
      zend_globals_macros.h
      zend_highlight.c
      zend_indent.c
      zend_ini_parser.y
      zend_ini_scanner.l
      zend_language_parser.y
      zend_language_scanner.h
      zend_language_scanner.l
      zend_opcode.c: Redesigned thread safety mechanism - nua nua

2001-07-28  sascha  <sascha@pb1.pair.com>

    * zend.h: Fix build

2001-07-27  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_constants.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_execute_locks.h
      zend_globals_macros.h
      zend_ini.c
      zend_ini.h
      zend_language_parser.y
      zend_language_scanner.l
      zend_list.c
      zend_list.h
      zend_modules.h
      zend_operators.c
      zend_variables.c
      zend.c: Get rid of ELS_*(), and use TSRMLS_*() instead.
    This patch is *bound* to break some files, as I must have had typos somewhere.
    If you use any uncommon extension, please try to build it...

2001-07-23  sascha  <sascha@pb1.pair.com>

    * zend_alloc.c: tsrm_error is only available, if TSRM_DEBUG is defined.

2001-07-21  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h: Always track bailout file/lineno

    * zend.c: Fix Release builds

    * zend.c
      zend.h
      zend_execute_API.c
      zend_globals.h
      zend_list.c:
    Improve bailout mechanism, supports nesting of bailouts a-la try..catch

    * zend_hash.c: Fix compile warning

2001-07-21  Andrei Zmievski  <andrei@ispi.net>

    * zend_compile.c:
    Fix certain cases where inheritance of base class's overloaded handlers wasn't
    being done.

2001-07-20  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_execute_API.c
      zend_list.c:
    Implement a more granular shutdown mechanism for the executor -
    prevent corruption of constants and missing destructions of resources

2001-07-19  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Unfix, it has too strong effects

    * zend_compile.c: Catch all cases

    * zend_compile.c: Fix bug #11970, strike 2

    * zend_execute.c: Revert bogus patch

2001-07-18  Stanislav Malyshev  <stas@zend.com>

    * zend_operators.c: fix double->long conversion

2001-07-17  Andi Gutmans  <andi@zend.com>

    * zend_hash.c: - Remove unused code

2001-07-16  Zeev Suraski  <zeev@zend.com>

    * zend_API.h
      zend_compile.c
      zend_globals.h
      zend_variables.c:
    Fix bug #10287 - avoid crashing under a bogus usage of list()

    * zend.h
      zend_compile.c
      zend_execute_API.c: Fix bug #10467

2001-07-15  Zeev Suraski  <zeev@zend.com>

    * zend_hash.h: Minor cleaning

    * zend_language_parser.y: Optimize the parser a bit

    * zend_language_scanner.h
      zend_language_scanner.l: Fix an inline

    * zend_variables.c
      zend_variables.h:
    Time to bid this old timer goodbye - get rid of var_uninit()

    * zend_hash.c: Fix bug #6239

    * zend_language_parser.y:
    Allow indirect reference to method names in class::method() construct

    * zend_execute_API.c: Fix bug #10257

    * zend_execute.c: Fix bug #11970

    * zend_compile.c: Fix bug #9884

    * zend.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h
      zend_language_scanner.l
      zend_opcode.c:
    Improved interactive mode - it is now available in all builds, without any significant slowdown

    * zend.c: Early initialization

2001-07-13  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c: layout

2001-07-13  Thies C. Arntzen  <thies@thieso.net>

    * zend_hash.c
      zend_hash.h
      zend_list.c:
    the resource-lists are now destroyed backwards. this will make sure that
    resources get destroyed in the opposite order they were created and thereby
    db-cursors will always be released before their corresponding connection etc.
    this sould not break anything!

2001-07-11  Zeev Suraski  <zeev@zend.com>

    * zend_API.c
      zend_ptr_stack.c
      zend_ptr_stack.h: Remove the last couple of bogus inlines

2001-07-11  Andi Gutmans  <andi@zend.com>

    * zend_hash.c
      zend_hash.h: - Move inline_zend_hash_func() to header file

2001-07-11  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h: fixed ZVAL_FALSE and ZVAL_TRUE

2001-07-11  Stanislav Malyshev  <stas@zend.com>

    * zend_hash.h: No hashpjw anymore, but we have zend_hash_func

2001-07-11  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c
      zend_variables.h: Get rid of ZVAL_RESET...

    * zend_API.c
      zend_operators.c
      zend_variables.c
      zend_variables.h: Get rid of some inlines

2001-07-10  Andi Gutmans  <andi@zend.com>

    * zend_extensions.h
      zend_hash.c
      zend_hash.h: - Merge faster hash implementation.
    - The hash function parameter in hash_init(...) is not used anymore.
    - It should be removed but it is "to be decided" if we want to do that now
    - or in a major version as it means changing MANY places and third party
    - modules might stop working.

2001-07-10  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h
      zend_variables.c: cleaned up the RETVAL_ RETURN_ and ZVAL_ macros

    added check for \0 at end-of-string at some places. all strings in PHP
    have to be terminated with \0 because 3th party libraries might not be
    binary-safe.

2001-07-10  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Commit Thies' patch. str.len was too long.

2001-07-09  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c
      zend_API.h: Adding new parameter parsing API.

2001-07-09  Andi Gutmans  <andi@zend.com>

    * zend_hash.c
      zend_hash.h:
    - Significantly improve hash table performance by using djb's hash function
      instead of hashpjw() and by using power of two sizes of hash tables (this
      saves the % and isn't necessary with a good hash function).
      Please try this patch.

2001-07-03  Rasmus Lerdorf  <rasmus@php.net>

    * zend_API.c: Trivial fix - but the period looks odd in error messages

2001-06-30  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c: - Fix the memory limit fix.

2001-06-29  Andi Gutmans  <andi@zend.com>

    * zend_operators.c: - Remove bogus comment.

2001-06-29  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: Fix memory_limit, kill warning

2001-06-28  Zeev Suraski  <zeev@zend.com>

    * zend_execute_locks.h: Fix warnings

2001-06-27  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
    Fix leak in the patch, and revert a couple of lines I didn't mean to commit

    * zend_execute.c: - Warn about illegal offsets
    - Allow assignments to uninitialized string offsets (automatically pads the
      string with spaces)

2001-06-26  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
    Fixed autoconversion of negative values to double (Fix bug #11685)

2001-06-26  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c: - Fix crash bug (fix by Jani).

2001-06-24  Andi Gutmans  <andi@zend.com>

    * zend.h: - Bump Zend version

2001-06-21  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_execute_locks.h
      zend_globals.h:
    - Hopefully fix bug #11476 and improve garbage to be freed very quickly.
      Tree tagged as PRE_GRANULAR_GARBAGE_FIX before commiting.

    * zend_execute_locks.h:
    - Use inline instead of macro for PZVAL_LOCK()/PZVAL_UNLOCK() so that it
      can be debugged.

    * zend_execute.c
      zend_execute.h
      zend_execute_API.c:
    - Nuke dependency of all of PHP on zend_execute_locks.h.

2001-06-21  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
    Eliminate the leak that the original bogus code tried to solve

    * zend_compile.c
      zend_execute.c
      zend_globals.h:
    parent::methodname() now works better with runtime classes (fix bug #11589)

    * zend_execute.c:
    Fix bug #11590 (I want Andi to also review this patch before it goes into 4.0.6)

2001-06-20  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - MFH

    * zend_execute.c: - Fix string offsets crash.

2001-06-19  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c: - Real MFH of memory fragmentation patch

    * zend_alloc.c: - Bad merge. Revert the previous patch (damn CVS).

    * zend_alloc.c: - MFH

    * zend_alloc.c:
    - Fix memory fragmention problem which could lead to web server processes
      growing much more than they should. (bug #11344?)

    * zend_execute.c
      zend_execute.h: - MFH

2001-06-19  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_execute.h: Add missing exports

    * zend_execute.c: Fix warning

2001-06-13  Zeev Suraski  <zeev@zend.com>

    * zend.c: MFH

    * zend.c:
    Avoid crashing if the error reporting function is called after a bailout during shutdown

2001-06-12  Zeev Suraski  <zeev@zend.com>

    * zend_highlight.c:
    Improve XHTML compliance (suggested by Anil Madhavapeddy)

2001-06-10  Zeev Suraski  <zeev@zend.com>

    * zend.c: Fix ZTS build problem

2001-06-07  Andi Gutmans  <andi@zend.com>

    * zend_compile.h: - Avoid breaking op_array compatibility for 4.0.6

2001-05-30  Zeev Suraski  <zeev@zend.com>

    * Zend.m4
      zend_execute_API.c: Add missing check

2001-05-25  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
    - Change if() to while() to make sure we skip enough opcodes

    * zend_compile.c: - MFH

    * zend_compile.c: - Fix memory leak

2001-05-23  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c:
    Fix segfault -- need to copy-construct constant value.

2001-05-21  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: Moving some functions into Zend.

2001-05-20  sascha  <sascha@pb1.pair.com>

    * .cvsignore: ignore ylwrap

2001-05-20  Andi Gutmans  <andi@zend.com>

    * zend_list.h: - The previous name could be confused with resource #

    * zend_list.c
      zend_list.h:
    - Whitespace and change the name of the macro to something more verbose
      ZEND_GET_RESOURCE_ID(...)

2001-05-20  James Moore  <James@phpuk.org>

    * zend_list.c
      zend_list.h:  - Add new ZEND_GET_LE macro for retrieving destructor
       id's from remote extensions. (Jmoore, Zend Engine)

2001-05-20  Andi Gutmans  <andi@zend.com>

    * zend_list.c: - Don't allow resource types of 0

2001-05-19  sascha  <sascha@pb1.pair.com>

    * zend_hash.c: Fix segfault when using zend_hash_add_empty_element

2001-05-18  Thies C. Arntzen  <thies@thieso.net>

    * zend_alloc.c: reset allocated_memory_peak after each request.

2001-05-17  Zeev Suraski  <zeev@zend.com>

    * zend_language_scanner.l: That's slightly clearer that way :)

    * zend_alloc.c: Fix build

    * zend.c: MFH

    * zend.c: Fix corruption issue

2001-05-16  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c
      zend_hash.h:
    Implement zend_hash_add_empty_element() using the existing infrastructure

    * zend_globals.h: Commit missing fix

    * Zend.m4
      zend_alloc.c
      zend_globals.h: Merge memory usage into memory limit

2001-05-14  sascha  <sascha@pb1.pair.com>

    * zend_hash.c:
    Initialize empty pDataPtr to a pseudo value to prevent a pefree on
    pData.

2001-05-12  Andi Gutmans  <andi@zend.com>

    * zend_variables.c: - Remove check for ht == NULL in copy_ctor.
      If ht is NULL at this point then we are better off crashing and fixing
      the bug that caused it.

2001-05-11  sascha  <sascha@pb1.pair.com>

    * zend.h: add missing closing paranthesis

    * zend_hash.c: Some extensions don't associate any data with hash entries,
    except the key.  Prior to this change, a separate chunk of memory
    was allocated in that case to store exactly zero bytes (plus
    memory manager overhead).  We treat that case similar to the
    pointer case, but don't copy any data at all (because the pointer
    is usually the NULL pointer).

    * zend_constants.c:
    Fix a memory leak which occured upon registering an already existing
    constant.

2001-05-11  Thies C. Arntzen  <thies@thieso.net>

    * Zend.m4
      zend_alloc.c
      zend_globals.h: added --enable-memory-usage-info

2001-05-11  Andi Gutmans  <andi@zend.com>

    * zend_opcode.c: - MFH

    * zend_opcode.c:
    - Fix crash bug when opcodes array is erealloc()'ed to a different memory
      area before it reaches the loop.
    - Some whitespace stuff

2001-05-10  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
    Treat numeric strings as numbers in the increment operator

2001-05-09  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c: Nuke unused variable.

    * zend_API.c: Fix a few bugs in zend_is_callable() and make it stricter.

2001-05-08  Andi Gutmans  <andi@zend.com>

    * zend_language_scanner.l: - Fix line numbers when some lines end with \r

    * zend_opcode.c: - Fix crash bug reported by DBG author Dmitri Dmitrienko.

2001-05-07  Zeev Suraski  <zeev@zend.com>

    * zend.c: Make zend_execute_scripts() reentrant

2001-05-06  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_compile.c
      zend_compile.h:
    Recover from a parse error in include files (before, it could result in a crash under certain circumstances).  Fix bug #8663

2001-05-06  Andi Gutmans  <andi@zend.com>

    * .cvsignore: - .cc files were renamed. Update .cvsignore.

2001-05-06  Zeev Suraski  <zeev@zend.com>

    * zend_operators.h: Yikes, that would have been a very bad bug :)

    * zend_execute.c:
    Floating point keys didn't work in array() (fix bug #6662)

    * zend_compile.c
      zend_execute_API.c:
    Hear hear, interactive mode is finally showing some progress:
    - Support function calls
    - Fix crash bug

    * zend_compile.h
      zend_language_parser.y
      zend_language_scanner.l: Support interactive mode in thread-safe builds

    * zend_operators.h: Fix autoconversion of hexadecimal strings
    It's time to close bug #5404 :)

    * zend_highlight.c: Retain single spaces as spaces to condense HTML

2001-05-02  Andi Gutmans  <andi@zend.com>

    * zend_ini_scanner.l: - Support \r as newline in the ini scanner

    * zend_language_scanner.l: - Handle MAC OS X \r line endings

    * zend_execute.c:
    - Patch by Andrei to prevent crash in error situation when not all
      object overloading handles are defined.

2001-05-01  Andi Gutmans  <andi@zend.com>

    * zend.h: - Bump up Zend version

2001-04-30  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c: - Add mistakenly removen closing bracket

    * zend_builtin_functions.c: - Get rid of warning

    * zend_alloc.c:
    - Try to solve crash on OS400. There is actually no reason I can see for
      why his fix should solve a crash but it doesn't harm.

    * zend_execute_API.c: - Fix crash bug in interactive mode

2001-04-29  Andi Gutmans  <andi@zend.com>

    * zend_alloc.h: - Whitespace

    * zend_alloc.c
      zend_alloc.h: - Improve overwrite detection in debug mode.

    * zend_operators.c:
    - Previous patch for too early freeing of resources seemed to have worked.
    - Clean it up a bit.

    * zend_operators.c:
    - Try and solve the too early resource destruction problem.

2001-04-28  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_hash.c
      zend_language_scanner.l
      zend_operators.c: include limits.h if available

    * zend.h: Fix bug 5661

2001-04-28  Andi Gutmans  <andi@zend.com>

    * zend_operators.c: - Move all cases into switch().

    * zend_alloc.c: - Just some little whitespace stuff.

    * zend_alloc.c:
    - Don't add/remove cached memory blocks from blocks list as this will slow
    - down performance a bit.

2001-04-28  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
    Resources weren't being properly destroyed by the convert_to_*() functions

2001-04-27  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_builtin_functions.c
      zend_hash.c
      zend_language_scanner.l
      zend_operators.c
      zend_operators.h: - More whitespace fixes while I'm at it.

    * zend.h
      zend_alloc.c
      zend_builtin_functions.c
      zend_execute_API.c
      zend_extensions.c
      zend_language_scanner.l:
    - Whitespace changes to be standard like the rest of Zend

2001-04-24  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Due to popular demand merge the foreach() crash fix.

2001-04-24  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: MFH.

2001-04-21  Andi Gutmans  <andi@zend.com>

    * zend_llist.c
      zend_llist.h: - Add typedef for function pointer of llist dtor

2001-04-20  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fix for crash bug when using invalid arguments in the foreach() loop.
    - Reported by Yasuo Ohgaki

2001-04-19  Andi Gutmans  <andi@zend.com>

    * zend_API.h: - Patch from Jason Greene.
    - Make it easier to write PHP function definitions in more than just one .c
      file while accessing the same module globals.

2001-04-17  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: small beautification

2001-03-28  Zeev Suraski  <zeev@zend.com>

    * zend_list.c: Fix warning

    * zend_list.c: Make Windows happy

    * zend_list.c: Get rid of more redundant code

    * zend_list.c:
    Cleaner way of making sure resources start at 1 and not 0...

    * zend_list.c
      zend_list.h: Remove redundant code

2001-03-27  Zeev Suraski  <zeev@zend.com>

    * zend_list.c
      zend_list.h: God knows what this code was doing...

2001-03-26  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c:
    Updated get_class_methods() to take class instance as well as class name.

    * zend_builtin_functions.c:
    Making it possible to pass a class name to get_parent_class() as well
    as a class instance.

2001-03-23  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: Fixing function name length.

2001-03-19  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
    - Add support for isset($var1, $var2, $var3); - Will be true only if all
    - variables are set.

2001-03-15  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y: - Nuke commented code

2001-03-12  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c: Name length is already known.

2001-03-12  Andi Gutmans  <andi@zend.com>

    * zend_API.c: - Missed second place.

    * zend_API.c: - Nuke snprintf()

    * zend_language_scanner.l: - White space

    * zend_language_scanner.l:
    - Fix by Jani Taskinen <sniper@iki.fi> for whole path also to work
      with include_once()/require_once().

2001-03-12  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c
      zend_API.h:
    Improve zend_is_callable() to the point where it's actually useful.
    Now it just needs to be invoked everywhere in PHP where a callback is
    expected.

2001-03-11  Andi Gutmans  <andi@zend.com>

    * Zend.m4
      acconfig.h: - Fix for Solaris.

2001-03-10  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Whitespace

2001-03-07  Zeev Suraski  <zeev@zend.com>

    * zend_ini.h: Add missing #define's

    * zend_compile.c
      zend_execute.c: Make parent:: work in runtime bindings as well

2001-03-06  sascha  <sascha@pb1.pair.com>

    * Zend.m4: We actually only need AC_PROG_LEX here.

2001-03-04  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Fix bug #8899 (thanks Jani)

2001-03-03  sascha  <sascha@pb1.pair.com>

    * Zend.m4: -Os is a valid GCC optimization level.

2001-03-02  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Whitespace fix

2001-02-28  Andrei Zmievski  <andrei@ispi.net>

    * zend_execute_API.c: Do case-insensitive class name matching when parsing
    array('Class', 'method') structure.
    You guys can clean it up, if there is a better way.

2001-02-27  Andi Gutmans  <andi@zend.com>

    * zend_variables.c
      zend_variables.h: - Nuke zval_del_ref()

2001-02-27  Andrei Zmievski  <andrei@ispi.net>

    * zend_compile.c: Don't overwrite existing handlers with parent ones.

2001-02-26  Andi Gutmans  <andi@zend.com>

    * Zend.dsp
      ZendCore.dep
      ZendTS.dsp
      zend.c
      zend_API.c
      zend_API.h: - Rename modules.h to zend_modules.h

    * LICENSE: - One more copyright year update

    * zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.l
      zend_language_parser.y
      zend_language_scanner.h
      zend_language_scanner.l
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_static_allocator.c
      zend_static_allocator.h
      zend_variables.c
      zend_variables.h
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.c
      zend_compile.h
      zend_config.w32.h
      zend_constants.c
      zend_constants.h
      zend_dynamic_array.c
      zend_dynamic_array.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_ini.c
      zend_modules.h: - Update copyright year

2001-02-25  Andi Gutmans  <andi@zend.com>

    * zend_modules.h: - Fix dll linkage warnings

2001-02-24  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c
      zend_modules.h: - Add exports from Daniel Beulshausen

2001-02-14  Stanislav Malyshev  <stas@zend.com>

    * zend.h: allow more extensions with resources

2001-02-13  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c: Move version registration to a more correct place

2001-02-12  Andi Gutmans  <andi@zend.com>

    * zend_operators.c
      zend_operators.h: - Remove two unused functions

    * zend_execute_API.c: - Fix whitespace.

2001-02-12  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c:
    Fix a bug that could cause corruption in case of an error during
    get_zval_ptr()

2001-02-09  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Remove duplicate code and do a tiny optimization in DO_FCALL

2001-02-05  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Fix string offset data corruption

2001-02-04  Andrei Zmievski  <andrei@ispi.net>

    * zend_execute_API.c:
    Allow passing class name as well as an object instance to call methods.

2001-02-03  Andrei Zmievski  <andrei@ispi.net>

    * zend_execute_API.c:
    Set the correct function state during execution. This is mainly to have
    get_active_function_name() to return proper value.

    * zend_compile.c: Inherit overloaded handlers.

2001-02-01  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c
      zend_API.h:
    Added zend_is_callable() function that checks whether passed zval
    represents a valid and exiting callable construct.

2001-01-31  Andi Gutmans  <andi@zend.com>

    * zend_API.h
      zend_API.c: - Change unset() functions to null(). unset() is legacy

    * zend_API.h:
    - Quick fix. I'm for changing these to add_property_null() as we've nuked
    - unset.

2001-01-27  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - That doesn't seem like a smart thing to do :)
    - I wonder if gcc optimized it out.

2001-01-23  Thies C. Arntzen  <thies@thieso.net>

    * zend_extensions.h
      zend_ini_scanner.h
      zend_list.c
      zend_list.h: fix a couple of warnings

    * zend_API.c: fixed crash in add_index_bool.

2001-01-22  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.h: Make add_index_zval() available to the outside world.

2001-01-21  Andi Gutmans  <andi@zend.com>

    * zend.h:
    - Make people happy who like the Zend version number bumped up in parallel
      with PHP.

2001-01-20  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_API.h:
    - Patch from Sterling. Add API calls to add zval's as array indeces/
      object properties. Add _ex functions which take the string length as an
      argument for better performance.

2001-01-19  Andi Gutmans  <andi@zend.com>

    * zend_API.h
      zend_API.c:
    - For Sterling. I wonder if not all of the API functions should take the
    - key_length as a parameter in order to save that strlen().

2001-01-17  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fix leak in fetch_dim_address() which was already fixed in
    - fetch_dim_object(). Take the oppertunity to make both use the same
    - function and not duplicate the code.

2001-01-16  Zeev Suraski  <zeev@zend.com>

    * zend_list.c: Fix persistent resources, once and for all...

2001-01-15  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_compile.c: Add free_estring()

2001-01-12  Zeev Suraski  <zeev@zend.com>

    * zend_istdiostream.h: Add newline

2001-01-12  Rasmus Lerdorf  <rasmus@php.net>

    * zend_highlight.c: Fix for bug number 8666

2001-01-07  Zeev Suraski  <zeev@zend.com>

    * zend_ini.c: Fix mismatch in return values

    * zend.c
      zend.h
      zend_alloc.c
      zend_ini.c
      zend_ini.h: - Remove backward dependency from PHP -> Zend
    - Rename get_ini_entry() as get_configuration_directive() for clarity
      (it doesn't use the INI subsystem, but the module-supplied function for
      retrieving configuration directives)

    * Zend.dsp
      ZendTS.dsp: Remove -S option on all bison calls

    * zend.c:
    Fix possibility of a crash during startup (very unlikely, but possible)

2001-01-06  Zeev Suraski  <zeev@zend.com>

    * ZendTS.dsp: Remove -S

2001-01-06  Andi Gutmans  <andi@zend.com>

    * zend_ini.c: - This slipped in by mistake.

2001-01-05  Zeev Suraski  <zeev@zend.com>

    * zend_ini.c
      zend_ini.h:
    Merge in some ZEND_API additions from Daniel Beulshausen (needed for the
    Win32 Apache module)

2001-01-04  Andi Gutmans  <andi@zend.com>

    * zend_list.c:
    - Make plist_destructor work like list_destructor to allow it to call
      extended destructors.

2001-01-03  Zeev Suraski  <zeev@zend.com>

    * zend.h: Fix Zend version while we're at it

    * zend_execute_API.c: Merge call_user_function_ex() fixes

    * zend_language_scanner.l: Merge line number corruption bug fix

    * zend_language_scanner.l:
    Fix another case of possible line number corruption

    * zend.h: Commit missing declaration

2001-01-01  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Remove unreachable code

2000-12-30  Zeev Suraski  <zeev@zend.com>

    * zend_language_scanner.l
      zend_opcode.c: Fix possible corruption in line number information

2000-12-27  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_globals.h
      zend_ini.c
      zend_ini.h
      ZendTS.dsp:
    Make the INI mechanism thread safe (or at least thread safer :)

2000-12-26  Zeev Suraski  <zeev@zend.com>

    * zend_compile.h:
    Use iostream.h instead of istream.h (IBM's compiler doesn't come with istream.h,
    and iostream.h should include it)

    * ZendTS.dsp
      zend_ini_scanner.l
      zend_istdiostream.h
      zend_language_scanner.l:
    - Use supplied istdiostream definition for the INI scanner too
    - Add Release_TSDbg configuration

2000-12-24  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.h: This needs updating as well

    * zend_execute_API.c:
    More aggressive protection in call_user_function_ex()

2000-12-23  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c:
    Fix a possible crash bug in call_user_function_ex(), if the function is
    in fact not a user function

2000-12-22  sascha  <sascha@pb1.pair.com>

    * zend.c
      zend_modules.h:
    Set the floating-point exception mask on FreeBSD to 0 (as do other
    FreeBSD system applications).  Also bump up the module API number
    as the zend_hash_get_current_key change affects source and binary
    compatibility.

2000-12-22  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_builtin_functions.c
      zend_execute.c
      zend_hash.c
      zend_hash.h:
    Allow get_current_key() not to return the key itself, instead of a duplicate

    * zend_hash.c: * Fixed a possible crash in get_class_methods() 

2000-12-19  Stanislav Malyshev  <stas@zend.com>

    * zend_language_scanner.l: Add support for ASP tags in one-line comment

2000-12-18  Andi Gutmans  <andi@zend.com>

    * flex.skl: - Success! Yay!

    * flex.skl: - Yet another one.

    * flex.skl: - Testing

    * flex.skl: - No luck

    * flex.skl: - Make this damn commit stuff work.

    * flex.skl: - Testing

2000-12-18  Stanislav Malyshev  <stas@zend.com>

    * zend.c:
    Use HashPosition iterator instead of saving/restoring internal pointer

    * zend.c: Preserve internal pointer over print_r (fix #8289)

2000-12-18  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Fix leak with useless statements such as "foo";

    * flex.skl:
    - Testing Sascha's CVS commit script which should work with branches.

    * flex.skl: - Testing

    * flex.skl: - Testin

2000-12-18  Zeev Suraski  <zeev@zend.com>

    * flex.skl: Test, ignore

2000-12-18  Stanislav Malyshev  <stas@zend.com>

    * zend_operators.c: Add notice when auto-converting array to string

2000-12-17  Andi Gutmans  <andi@zend.com>

    * zend_language_scanner.l:
    - Clean up the scanner a tiny bit while messing with it.

    * zend_language_scanner.l:
    - %> without asp_tags should not be treated as inline_html but as regular
      tokens. Of course the parser will die with a parse error which is the
      correct behavior.

    * zend_language_scanner.l:
    - Fix problem in one line comments with line endings such as ??>

2000-12-17  Stanislav Malyshev  <stas@zend.com>

    * zend_operators.c: Fix #8279 (-2147483647 > 2147483647).

2000-12-14  Zeev Suraski  <zeev@zend.com>

    * zend_modules.h: Update module_api_no

2000-12-13  Zeev Suraski  <zeev@zend.com>

    * zend_API.h
      zend_execute_API.c:
    Fix call_user_function() with objects - it could leak under certain circumstances

2000-12-12  Stanislav Malyshev  <stas@zend.com>

    * zend_operators.c: Fix #8195: strncasecmp returns incorrect value

2000-12-07  sascha  <sascha@pb1.pair.com>

    * zend_builtin_functions.c:
    Hardcode strlen due to problems on SCO OpenServer 5.0.4 which defines
    strlen to __std_hdr_strlen.

2000-12-07  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c: Whitespace fix

    * zend_compile.c: Allow var $foo = array(ABC => 1) constructs

    * zend_builtin_functions.c:
    Fix memory leak - get_current_key mallocs it's result, no need to
    copy it.

2000-12-06  sascha  <sascha@pb1.pair.com>

    * zend_hash.c:
    INIT_DATA/UPDATE_DATA assumed that pData elements of the size of a void
    pointer would actually be aligned like a void pointer. This lead
    to bus errors on architectures which don't allow unaligned 32-bit accesses.

2000-12-05  Andi Gutmans  <andi@zend.com>

    * zend_language_parser.y:
    - Support for $var =& new foo() syntax. This allows you to use objects
      which create extra references to themselves in the constructor.

2000-12-05  Zeev Suraski  <zeev@zend.com>

    * zend_execute.h: Expose all timeout functions

2000-12-02  sascha  <sascha@pb1.pair.com>

    * acconfig.h
      configure.in:
    Use the hardly-documented third parameter of AM_INIT_AUTOMAKE to suppress
    defining PACKAGE/VERSION.

2000-11-27  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
    - Allow passing references which are returned from functions and new
    - statements to be passed by reference.

2000-11-27  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c:
    Update class constants before trying to get default properties.

2000-11-22  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Remove code which has been commented out for ages.

2000-11-22  sascha  <sascha@pb1.pair.com>

    * zend_execute.c
      zend_globals.h: Pass on the exit status

2000-11-21  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c
      zend_operators.h: Fix build

2000-11-21  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - The baby patch wasn't that innocent :)

2000-11-21  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c:
    Sterling's patch to make get_defined_vars() simpler and better.

2000-11-20  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - NEVER copy and paste :)

    * zend_compile.c
      zend_execute.c: - Baby patch towards making the damn pass-by-ref work.

2000-11-20  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.h: Update API number

2000-11-20  Stanislav Malyshev  <stas@zend.com>

    * zend.h:
    Add macro to replace value of zval with another value while preserving
    referencing structure

2000-11-20  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - This patch is broken and needs more thorough fixing.

2000-11-19  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Try and fix the problem when sending references returned from a function by reference.

2000-11-19  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.h: Fix Zend build for non ZTS

2000-11-18  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: Forgot to commit the non-debug build fix yesterday...

    * zend_alloc.c
      zend_alloc.h:
    Add thread-safety debugging information (idea - Dmitri Dmitrienko)

2000-11-14  Stanislav Malyshev  <stas@zend.com>

    * zend_language_scanner.l: Restore compatibility with old broken way

    * zend_language_scanner.l:
    Better 0x handling - not change non-0x number behaviour

    * zend_language_scanner.l:
    Attempt at better handling long 0x-numbers, like 0xffffffff

2000-11-13  Andi Gutmans  <andi@zend.com>

    * zend_extensions.c
      zend_extensions.h: - Remove unused function

    * zend_extensions.h:
    - Use typedef's for function pointers so that we can easily define arrays
    - of these function pointers.

2000-11-13  Stanislav Malyshev  <stas@zend.com>

    * zend_llist.c:
    Fix zend_llist_apply_with_del - it should remove from list,
    not only call dtor

2000-11-12  Zeev Suraski  <zeev@zend.com>

    * ZEND_CHANGES: Test, ignore

2000-11-11  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h: - Move SET_UNUSED() to header

    * zend_opcode.c: - Beautify by using the standard #define.

2000-11-10  Andi Gutmans  <andi@zend.com>

    * zend_compile.h
      zend_compile.c: - Remove this damn thing once again.

    * .cvsignore: - Add files to .cvsignore thanks to Jon Parise

2000-11-09  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h: - Maybe it's OK now? :)

    * zend_compile.c
      zend_compile.h: - Undo the previous commit for fixing $obj = new foo().

    * zend_compile.c
      zend_compile.h:
    - Commit experimental patch to fix the problem when doing $a = new foo()
      and the constructor assigns $this by reference to other symbol table
      elements. Thanks to Daniel J. Rodriguez on this one.

2000-11-08  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c
      zend_extensions.h: Add ability to find extensions by name

2000-11-06  sascha  <sascha@pb1.pair.com>

    * zend_ini.c: Kill a misleading warning which is intended for old code
    which assumes sizeof(int) == sizeof(void *).

2000-11-03  Andi Gutmans  <andi@zend.com>

    * zend_ini_scanner.h: - Add trailing \n?

2000-11-03  Zeev Suraski  <zeev@zend.com>

    * zend_ini_scanner.l: Fix for bug #5571 (by mookid@sigent.ru)

2000-11-03  Andi Gutmans  <andi@zend.com>

    * Makefile.am: - Fix dependency.

2000-11-03  Zeev Suraski  <zeev@zend.com>

    * zend_operators.h: Fix build

    * zend_operators.h: Add RESVAL macros

2000-11-02  Zeev Suraski  <zeev@zend.com>

    * zend.c: Fix bug #7599

    * zend_language_parser.y
      zend_language_scanner.l: Missed those

    * zend_API.c
      zend_compile.c
      zend_compile.h: Maintain consistency

2000-11-02  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_language_parser.y: - Replace do_exit() with zend_do_exit().
    - Problem reported by David Hedbor <david@hedbor.org>

2000-11-02  Zeev Suraski  <zeev@zend.com>

    * zend_ini_parser.y: Remove unnecessary variables

    * zend_ini.c:
    explicit declaration here too - sigh, way too early in the morning

    * zend_ini.h: oops

    * zend_ini.h: explicit declaration

2000-10-31  Zeev Suraski  <zeev@zend.com>

    * zend_highlight.h: Fix Apache build

    * zend_ini.c
      zend_ini.h: Remove unnecessary code, fix phpinfo()

    * Zend.m4: Require bison 1.28

2000-10-30  Zeev Suraski  <zeev@zend.com>

    * Zend.dsp: Fix non-thread-safe Windows build

    * zend_globals.h
      zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.h
      zend_ini_scanner.l: Final touches on the INI parser

2000-10-30  Stanislav Malyshev  <stas@zend.com>

    * Makefile.am: Another attempt to make it build

    * Makefile.am
      zend_ini_scanner.l: Fix build

2000-10-29  Zeev Suraski  <zeev@zend.com>

    * zend_ini_parser.y
      zend_ini_scanner.h
      zend_ini_scanner.l: Fix leaks

    * zend_alloc.h
      zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.h
      zend_ini_scanner.l: The new INI parser is showing some signs of life

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
    Fix a corruption bug, when erroneously allowing to send non-variables by reference (several
    bug-db reports seem to originate in this bug)

    * zend_extensions.c
      zend_ini_parser.y: Fix build

    * zend_ini_scanner.h: Forgot this one

    * Makefile.am
      ZendTS.dsp
      zend_globals.h
      zend_ini.h
      zend_ini_parser.y
      zend_ini_scanner.l: Generalization work

2000-10-29  Stanislav Malyshev  <stas@zend.com>

    * zend_extensions.c
      zend_extensions.h:
    Allow module to proclaim compatibility with any Zend version

2000-10-29  Zeev Suraski  <zeev@zend.com>

    * Makefile.am
      ZendTS.dsp
      zend_ini_parser.y
      zend_ini_scanner.l
      zend_language_scanner.l: Some more work on the INI parser/scanner

    * Makefile.am
      zend_ini_parser.y
      zend_ini_scanner.l: Initial step in rewriting the INI parsing mechanism

    * .cvsignore
      Makefile.am
      Zend.dsp
      ZendCore.dep
      ZendTS.dsp
      zend-parser.y
      zend-scanner.h
      zend-scanner.l
      zend_compile.c
      zend_compile.h
      zend_highlight.c
      zend_indent.c
      zend_language_parser.y
      zend_language_scanner.h
      zend_language_scanner.l: Unify the names of these last 3 files...

    * Zend.dsp
      ZendTS.dsp: Fix Windows build

    * Makefile.am
      zend_ini.c
      zend_ini.h
      zend_operators.c
      zend_operators.h:
    Initial steps to move the INI mechanism to the Zend engine

2000-10-27  Andrei Zmievski  <andrei@ispi.net>

    * zend_operators.h: Added macros for object properties and class entry.

2000-10-26  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_modules.h: - Fix new -m on Windows

2000-10-25  Andrei Zmievski  <andrei@ispi.net>

    * zend_list.h: Remove the patch to register_list_destructors().

2000-10-20  Andrei Zmievski  <andrei@ispi.net>

    * zend_list.c
      zend_list.h: - Fixed a bug in zend_rsrc_list_get_rsrc_type()
    - Switched register_list_destructors() to use
      zend_register_list_destructors_ex() instead

2000-10-19  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
    - Constant expressions which are used multiple times need to be copy_ctored

2000-10-18  Andi Gutmans  <andi@zend.com>

    * zend_llist.c: - Fix whitespace

    * zend_extensions.c
      zend_llist.c
      zend_llist.h:
    - Try #2. Wasn't allowed to delete in the previous manner because we were
      in the middle of an llist_apply()

2000-10-18  sascha  <sascha@pb1.pair.com>

    * zend_fast_cache.h:
    Add explicit conversion from 'void *', otherwise ANSI C++ compilers
    will break out.

2000-10-18  Andi Gutmans  <andi@zend.com>

    * zend_extensions.c: - Fix crash

2000-10-17  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c: - Fix copy&paste bug

2000-10-15  Andi Gutmans  <andi@zend.com>

    * zend_opcode.c:
    - Increase op_array size faster and make eralloc() it in the end to save
      memory.

2000-10-14  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c: - Add another patch from Sterling.

    * zend_builtin_functions.c:
    - Preliminary commit of Sterlings get_defined_functions()/get_defined_vars
      functions

    * zend_extensions.c:
    - Only run startup() if ZEND_EXTENSIONS is defined to 1.
      This fixes a link error on platforms which don't support libdl

2000-10-13  Andi Gutmans  <andi@zend.com>

    * zend_operators.c: - Make increment of "" become "1"

2000-10-11  Andi Gutmans  <andi@zend.com>

    * zend_hash.c
      zend_hash.h: Don't use 'new' symbol

2000-10-11  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c
      zend_execute_API.c:
    Fix -a interactive mode (no idea how the previous commit got committed)

    * zend_execute.c: *** empty log message ***

    * zend.h: Update version

    * zend_hash.c
      zend_hash.h: Add zend_hash_merge_ex(), for selective merging

2000-10-06  Andi Gutmans  <andi@zend.com>

    * zend_execute.h: - Fix Bug #7061

2000-10-05  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l:
    - Updated included_files() also for plain include()/require().

2000-10-04  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c: - Fix fprintf

2000-10-02  Andi Gutmans  <andi@zend.com>

    * zend_extensions.h: - Change zend_extension_api_no

2000-09-30  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c: - Cleanup error output

2000-09-28  Andi Gutmans  <andi@zend.com>

    * zend_hash.c:
    - Another has optimization/fix like the hash_copy one from earlier on

2000-09-28  Stanislav Malyshev  <stas@zend.com>

    * zend_hash.c:
    Make hash_copy call copy constructor on a real copy, not on a temp

2000-09-28  Andi Gutmans  <andi@zend.com>

    * ZendTS.dsp: - Remove zend_gcc_inline.c

2000-09-26  sascha  <sascha@pb1.pair.com>

    * Makefile.am
      Zend.m4
      zend_execute.h
      zend_gcc_inline.c
      zend_operators.h:
    Remove --enable-c9x-inline option. We now use a syntax which is compatible
    with all compilers by providing the function with static linkage in every
    compilation unit.

2000-09-25  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_extensions.c
      zend_extensions.h:
    Fix previous update - move extension startup further down the startup sequence

    * zend.c: Move extension startup further down the startup sequence

2000-09-19  Andi Gutmans  <andi@zend.com>

    * zend_operators.h: - Add Z_BVAL* macros

2000-09-19  Stanislav Malyshev  <stas@zend.com>

    * zend_execute_locks.h:
    Fix crash on Solaris with function parameter destruction

2000-09-18  Stanislav Malyshev  <stas@zend.com>

    * zend_builtin_functions.c:
    Made get_included_files() work again, in somewhat different way

2000-09-17  Stanislav Malyshev  <stas@zend.com>

    * zend_compile.c: Set filename even on recursive include

2000-09-14  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fix NULL handling in ARRAY opcode and resolve memory leak

2000-09-12  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l
      zend.c
      zend_builtin_functions.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_highlight.h: Make compile_string() accept a description of the code

2000-09-11  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
    - Forgot to create extended info in include()/require() call

2000-09-10  Stanislav Malyshev  <stas@zend.com>

    * zend-parser.y: Allow require_once to take expressions, just like require

    * ZEND_CHANGES: Try once more to remove dups

    * ZEND_CHANGES: Test commit - weed out duplicate messages

2000-09-09  Zeev Suraski  <zeev@zend.com>

    * zend.c: Don't use unsafe sprintf()

2000-09-08  Stanislav Malyshev  <stas@zend.com>

    * zend.c: Don't trust snprintf return

2000-09-06  Andi Gutmans  <andi@zend.com>

    * zend_config.w32.h: - Save two lines

    * zend_config.w32.h: - Fix header

2000-09-06  sascha  <sascha@pb1.pair.com>

    * Zend.m4: Unless overwritten, default to no optimization in debug mode.

2000-09-05  Andi Gutmans  <andi@zend.com>

    * zend_operators.h
      zend_operators.c: - Commiting Sterling's new multi_convert* functions

2000-09-05  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: Fix memory overrun.

2000-09-05  Stanislav Malyshev  <stas@zend.com>

    * zend_builtin_functions.c:
    Fix crash with trigger_error having no args (#6549)

2000-09-04  Andi Gutmans  <andi@zend.com>

    * Makefile.am: - Remove two tabs

2000-09-02  Andi Gutmans  <andi@zend.com>

    * ZendTS.dsp:
    - Defining TSRM_WIN32 in each and every dsp sucked. Revert this change

    * ZendTS.dsp: - Fix windows build

2000-08-31  Andi Gutmans  <andi@zend.com>

    * ZendTS.dsp:
    - This should fix the performance problem with Release builds

    * zend-scanner.l
      zend.c
      zend_execute.c:
    - Use emalloc() for opened_path now. This was a potential leak before.
    - This patch has potential to break stuff but I tested it as much as I
    - could. Fixes should be easy.

    * zend.c: - Remove support for __string_value() in print $obj

2000-08-31  Zeev Suraski  <zeev@zend.com>

    * zend.c: Safer shutdown process

2000-08-29  Andi Gutmans  <andi@zend.com>

    * zend.h: - Update Zend version.

2000-08-26  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c: - Don't define this function in non-debug mode

2000-08-24  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Revert patch from 9/7/2000 which seems to have broken unset().
    - I hope what made me do this patch doesn't appear again.

2000-08-22  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c:
    - Fix bug report by Andrei when using a method as a sort user function
    - parameter in usort() like functions

2000-08-20  Zeev Suraski  <zeev@zend.com>

    * zend_config.w32.h: Fix Win32 build

2000-08-20  sascha  <sascha@pb1.pair.com>

    * zend_config.w32.h:
    _isnan seems to be supported on Win32, add an appropiate macro.

    * acconfig.h: If available, use fpclassify for substituting zend_finite.

    * acconfig.h:
    Including math.h before using macros defined there will work better :)

    * acconfig.h: Add zend_isinf and zend_isnan.

2000-08-19  Andrei Zmievski  <andrei@ispi.net>

    * zend-scanner.l: One more fix to C compile.

2000-08-19  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l: Fix C build

    * zend-scanner.l: Fix eval() leakage in ZTS mode

    * zend_compile.c
      zend_globals.h: Eliminate run-time leak with eval()'s

    * zend_alloc.c: Fix build with no memory_limit

    * zend_alloc.c: Fix memory_limit

2000-08-19  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Beautify

2000-08-17  Stanislav Malyshev  <stas@zend.com>

    * zend_API.h: Fix EMPTY_STRING macros

2000-08-15  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.h
      zend-scanner.l
      zend.c
      zend_compile.c
      zend_compile.h
      zend_execute.c:
    Fix warning issue (compile errors inside require()'d files were incorrectly supressed)

2000-08-14  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: - Fix leak and some logic

2000-08-14  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.c:
    - This patch should hopefully fix situations where a constructor uses
    - the $this pointer as a reference.

2000-08-14  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c: Fix crash

2000-08-14  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.h:
    - Unused results should be marked with EXT_TYPE_UNUSED and not IS_UNUSED

2000-08-13  Stanislav Malyshev  <stas@zend.com>

    * zend-scanner.l
      zend.c
      zend_compile.c
      zend_compile.h
      zend_execute.c: Fix zend_fiel_handle handling. Should fix URL include
    and various opened_path inconsistencies.

2000-08-13  Andi Gutmans  <andi@zend.com>

    * zend-parser.y:
    - Revert foreach() change which only allowed variables and array(...)

2000-08-11  Andi Gutmans  <andi@zend.com>

    * zend-parser.y: - Only support variables and array(...) in foreach loops

2000-08-10  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c:
     Fix problem with nested foreach()'s (Andi, Zend Engine)

    * zend_compile.c:
     Fix switch which only has a default rule (Andi, Zend Engine)
     Change require_once() to use the same file list as include_once().
     Patch includes making require() & include() to behave the same when it
     comes to scoping. require() is now an include() which isn't allowed to fail.
     require() caused too many memory reallocations which ended up being quite
     slow for sites that required lots of files. (Andi & Zeev, Zend Engine)
    - Fix switch() which only has default rule (bug #5879,

2000-08-09  Zeev Suraski  <zeev@zend.com>

    * zend_modules.h: that too

    * zend_extensions.h: Update API number

    * zend-parser.y
      zend-scanner.l
      zend.c
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_opcode.c:
    The patch we promised - redesigned the compilation/execution API:
    Advantages:
    - Smaller memory footprint for the op arrays
    - Slightly faster compilation times (due to saved erealloc() calls and faster zend_op
      initialization)
    - include_once() & require_once() share the same file list
    - Consistency between include() and require() - this mostly means that return()
      works inside require()'d files just as it does in include() files (it used to
      be meaningless in require()'d files, most of the time (see below))
    - Made require() consistent with itself.  Before, if the argument was not a constant
      string, require() took the include() behavior (with return()).
    - Removed lots of duplicate code.
    Bottom line - require() and include() are very similar now;  require() is simply an include()
    which isn't allowed to fail.  Due to the erealloc() calls for large op arrays, require()
    didn't end up being any faster than include() in the Zend engine.

2000-08-05  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Use some more SEPARATE_ZVAL macros instead of replicated code.

2000-08-05  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c: Fix memory leak

2000-08-04  Andi Gutmans  <andi@zend.com>

    * zend.h
      zend_execute.c:
    - Beautify code. Try and use more macros for splitting instead of
    - replicating the code everywhere.

2000-08-02  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Remove commented code

2000-07-29  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l
      zend_execute.c: Fix filename issues

2000-07-28  Stanislav Malyshev  <stas@zend.com>

    * zend_builtin_functions.c
      zend_constants.c
      zend_constants.h:
    Make define return false and issue E_NOTICE when trying to redefine constant

2000-07-27  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l
      zend_execute.c: Always store full filename as compiled file name

2000-07-26  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
    Fix a possible issue with runtime inheritence under fairly rare circumstance
    and optimize a tiny bit

2000-07-26  Stanislav Malyshev  <stas@zend.com>

    * zend_builtin_functions.c
      zend_operators.c
      zend_operators.h: Add strncasecmp function

2000-07-18  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c: Forgot to link this function...

    * zend_hash.c: This is probably the oldest bug in PHP :)
    Luckily it's unlikely we're ever actually bitten by this bug.

2000-07-16  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Beautify Zeev's patch a bit.

2000-07-16  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Implement parent::foo()

2000-07-15  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend_compile.c: Add more extended_info calls

2000-07-14  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c
      zend_list.c
      zend_list.h: Improve register_resource_ex() infrastructure

2000-07-12  Thies C. Arntzen  <thies@thieso.net>

    * zend.c: fix ZTS startup without filename (thanx purify!)

    * zend.c: unset active_symbol_table on zend-shutdown.

2000-07-11  Zeev Suraski  <zeev@zend.com>

    * zend_list.c: Another persistent hash - disable apply protection

    * zend.c
      zend_hash.c
      zend_hash.h:
    Disable the hash_apply() protection on hashes that persist across requests - it's unsafe
    because we may be aborted at any point

2000-07-11  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c:
    Fix a bug in passing second parameter of RECV_INIT with is_ref set

2000-07-11  Andi Gutmans  <andi@zend.com>

    * zend_compile.h: - Oops. Too early in the morning

    * zend_compile.h: - Include iostream.h in C++.

2000-07-09  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Fix memory leak.

    * zend_execute.c: - Need to seperate if the hash isn't a reference

2000-07-08  Andi Gutmans  <andi@zend.com>

    * zend.h: - Add zend_ulong

2000-07-07  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c: Remove C++ commennts.

2000-07-06  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l:
    - Remove code which has never been used (neither in PHP 3)

    * zend_compile.c:
    - Make is_method_call() static and remove a couple of old lines

    * zend_execute.c
      zend_extensions.h: - Yet another fix...

    * zend_execute.c: - One more...

    * zend_compile.c: - One more fix for the latest patch

    * zend_compile.c: - One dumb bug in my latest patch

    * zend-parser.y
      zend_compile.c
      zend_execute.c:
    - Complex fix for solving a problem with objects & method calls.
    - Previous version is tagged PRE_METHOD_CALL_SEPERATE_FIX_PATCH.
    - I need to check this fix on a server so if it doesn't work I will revert
    - it.

    * zend-scanner.l:
    - Fix problem with newlines not being recognized under certain conditions

2000-07-03  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Fix bug #4120

2000-07-03  Stanislav Malyshev  <stas@zend.com>

    * zend_execute_API.c: Unblock SIGPROF signal when starting timer.
    On Linux, this signal is blocked by default after first signal is run

2000-07-03  sascha  <sascha@pb1.pair.com>

    * FlexLexer.h
      zend-scanner.h
      zend_alloc.h
      zend_compile.h
      zend_constants.h
      zend_dynamic_array.h
      zend_execute.h
      zend_globals.h
      zend_hash.h
      zend_highlight.h
      zend_list.h
      zend_operators.h
      zend_static_allocator.h
      zend_variables.h:
    Replace macros which begin with an underscore through an appropiately
    named macro.

2000-07-02  sascha  <sascha@pb1.pair.com>

    * zend.h
      zend_API.h
      zend_builtin_functions.h
      zend_config.w32.h
      zend_dynamic_array.h
      zend_errors.h
      zend_execute_locks.h
      zend_extensions.h
      zend_fast_cache.h
      zend_globals_macros.h
      zend_indent.h
      zend_llist.h
      zend_modules.h
      zend_ptr_stack.h
      zend_stack.h:   Change header protection macros to conform to standard.

      Draft 3 of IEEE 1003.1 200x, "2.2 The Compilation Environment"

        All identifiers that begin with an underscore and either an uppercase
        letter or another underscore are always reserved for any use by the
        implementation.

2000-07-02  Andi Gutmans  <andi@zend.com>

    * zend-parser.y: - Take #2 with tab size 4

    * zend-parser.y:
    - Beautify parser a bit. It still could do with some more at some point

    * zend_execute.h
      zend_execute_API.c: - Forgot ZEND_API

2000-06-30  Zeev Suraski  <zeev@zend.com>

    * zend_config.w32.h:
    Add a messagebox style that's safe to use from an ISAPI filter

    * zend_builtin_functions.c
      zend_execute_API.c
      zend_globals.h: error_reporting fix

2000-06-29  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h: Add $context argument to error handler

2000-06-28  Zeev Suraski  <zeev@zend.com>

    * zend.c: Improve error handling code

    * zend-scanner.l: Be HTML friendly

2000-06-28  Andi Gutmans  <andi@zend.com>

    * zend.h: version update

2000-06-26  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_constants.c
      zend_extensions.h:
    Make it possible to detect whether we're thread safe or not from PHP scripts and the php.ini
    file

2000-06-26  Andi Gutmans  <andi@zend.com>

    * zend_extensions.c: - Add another "\n" at the end of error messages.

2000-06-26  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c:
    Make max_execution_time work properly when set to 0 under Win32 (disable)

2000-06-25  Andi Gutmans  <andi@zend.com>

    * zend.c: - I wrote a long msg but the commit didn't go through.
    - So here is the short version:
    - a) Start moving to binary opens in Windows
    - b) Give checkuid_mode() a small face lift including the fopen-wrappers.c
    - The mode to this function should at least be a #define but that is for
    - another day. Anyway this whole stuff should be given more face lifts in
    - the future.

2000-06-24  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: Nuke a warning

2000-06-23  Andi Gutmans  <andi@zend.com>

    * zend_static_allocator.c
      zend_static_allocator.h: - Not returning a value anymore

    * zend_static_allocator.h: - Don't need SUCCESS/FAILURE anymore

    * zend_static_allocator.c
      zend_static_allocator.h: - Add license

    * zend_static_allocator.c
      zend_static_allocator.h:
    - Commit static allocator structure which we might use in an upcoming Zend
    - change

2000-06-22  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l: - Fix asp_tags.

    * zend_extensions.c: - Oops I miss-wrote that field

    * zend_extensions.c
      zend_extensions.h:
    - Change API version and make the error messages more meaningful.

    * zend_alloc.c
      zend_alloc.h: - Change cache size and only initialize part of it.

2000-06-22  Stanislav Malyshev  <stas@zend.com>

    * zend_alloc.c:
    Cached-freed memory blocks should not be in "occupied" list

    * zend_alloc.c
      zend_globals.h: Make cache counters to be unsigned int
    Start collecting statistics after cache pre-fill

2000-06-18  sascha  <sascha@pb1.pair.com>

    * Zend.m4
      acinclude.m4
      zend.c: fp_except check for FreeBSD 1.0-2.2.5

    * Zend.m4
      acconfig.h
      zend_config.w32.h
      zend_operators.h: Welcome zend_finite(n).

    This chooses the best combination of what is available:

    finite, isfinite, isinf, isnan

2000-06-18  Stanislav Malyshev  <stas@zend.com>

    * zend.h
      zend.c: Make error callback be publicly accessible

2000-06-18  Andi Gutmans  <andi@zend.com>

    * zend.c: - Better FreeBSD fix. Does fp_except_t exist on 3.4?

    * zend.c:
    - I don't know how this happened. I tested the bloody thing and I remember
    - copy&pasting from code which used ~.

2000-06-17  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c
      zend_execute_API.c
      zend_globals.h
      zend_ptr_stack.c
      zend_ptr_stack.h: - Add restore_error_handler()
    error_handler's are now stored in a stack

    * zend-scanner.l
      zend.c
      zend_API.h
      zend_execute_API.c:
    Allow the symbol_table to be passed to call_user_function_ex()

    * zend-scanner.h
      zend-scanner.l: Fix filenames and line numbers in ZTS mode

    * zend_hash.c
      zend_hash.h:
    Avoid crashing with recursive applies - limit apply nest level to 3 (I'm not aware of a place
    in which applying recursively on the same hash makes sense with more than one nest level, but
    3 should be enough)

2000-06-16  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h:
    Ok, this time here's some real Win32 system programming :)
    Redesigned the timeout system using a single timeout thread and a single window,
    and used a much quicker check.

2000-06-16  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c: Fix UNIX build

2000-06-16  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Macro it up the right way

    * zend_execute.c: Macro this up, so it can be moved to other places

    * zend.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h: - Move timeout code to Zend
    - Implement timeouts in Win32

2000-06-15  Zeev Suraski  <zeev@zend.com>

    * Zend.dsp
      zend.c:
    Fix non thread-safe mode - asp_tags/short_tags etc weren't getting initialized properly

2000-06-15  Andi Gutmans  <andi@zend.com>

    * zend_list.c: *** empty log message ***

    * zend-parser.y: - Support multiple arguments to unset()

2000-06-15  Thies C. Arntzen  <thies@thieso.net>

    * zend_list.h: ups.

    * zend_list.h:
    changed return type of ZEND_VERIFY_RESOURCE from FALSE to NULL

2000-06-14  sascha  <sascha@pb1.pair.com>

    * zend_operators.h
      zend_operators.c:
    Move some stuff to zend_operators.h which is required by the
    moved inline functions.

2000-06-14  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c
      zend_alloc.h: - More correct way of doing bit mask

2000-06-14  sascha  <sascha@pb1.pair.com>

    * Zend.m4: Only replaced C0X and C0x, but not c0x..

    * Zend.m4
      zend_execute.h
      zend_gcc_inline.c
      zend_operators.h:
    Rename C0x-inline to C9x-inline, and frame preprocessor directives in
    zend_gcc_inline.c with #ifndef C9X_INLINE_SEMANTICS..#endif.

2000-06-14  Andi Gutmans  <andi@zend.com>

    * ZendTS.dsp: - Make Win32 build

2000-06-13  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h: Add to the API

2000-06-13  sascha  <sascha@pb1.pair.com>

    * Makefile.am
      Zend.m4
      zend_API.h
      zend_compile.h
      zend_execute.h
      zend_execute_API.c
      zend_gcc_inline.c
      zend_globals.h
      zend_operators.c
      zend_operators.h: Add optional support for C0x inline semantics.

    These are enabled by specifying `--enable-c0x-inline' on the command
    line. We might add an autoconf check for this particular feature
    later.

    * zend_llist.h:
    Add llist_apply_func_t and make prototypes use the typedefs.

2000-06-12  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c: Make Egon happy :)

    * zend_builtin_functions.c:
    Return the previous error handler from set_error_handler()

    * zend_API.c
      zend_API.h
      zend_builtin_functions.c:
    Avoid using E_CORE_* errorlevels in any place which is not in the global startup sequence

    * zend-parser.y
      zend-scanner.l
      zend.h
      zend_compile.c: Get rid of <?php_track_vars?>

2000-06-11  Andi Gutmans  <andi@zend.com>

    * zend.c: - Solve floating point precision crash on FreeBSD.

    * zend.c:
    - Fixes crash problem on FreeBSD when losing precision. Need to still see
    - how to detect we're on FreeBSD

2000-06-11  Zeev Suraski  <zeev@zend.com>

    * zend_API.c: Fix zend_get_parameters()

2000-06-10  Andi Gutmans  <andi@zend.com>

    * zend_operators.c:
    - Fixed problem when using uninitialized values in comparisons with strings.
    -  They behave as empty strings again just like in PHP 3.

2000-06-10  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
    I can't think of a reason of why it should just be a notice...  Make it a warning, like it was in PHP 3.

    * zend_API.c
      zend_builtin_functions.c: Fix bug #4768

2000-06-09  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c
      zend_hash.h: Made an alias for hash apply with arguments.

2000-06-09  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c: - Forgot to remove the FIXME

    * zend_alloc.c: - Make the memory limit accurate

    * zend_alloc.c: - Fix cache initialization

    * zend_alloc.c
      zend_alloc.h:
    - Allocate and cache in 8 byte blocks. Most allocators anyway use 8 byte
    - blocks. This should help fragmentation and cache hits.
    - The old tree is tagged as PRE_EIGHT_BYTE_ALLOC_PATCH

2000-06-09  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Fix bug #4933

    * zend_builtin_functions.c: Fixed bug #4819

2000-06-09  Andi Gutmans  <andi@zend.com>

    * zend_modules.h:
    - Time to change it. We changed register_internal_class() ->
    - zend_register_internal_class()

    * zend_API.c
      zend_API.h
      zend_compile.c
      zend_compile.h: - Andrei, this is for you!
    - Add zend_register_internal_class_ex() which allows you to specify a
    - parent to inherit from. You can either specify the parent directly or via
    - its name.

    * zend-parser.y
      zend-scanner.l: - Typo

    * zend_execute.c: - Remove old obsolete code.

    * zend_execute.c: - Make unset consistent with the way array offsets work

2000-06-09  Stanislav Malyshev  <stas@zend.com>

    * zend_execute.c: Handle unset with empty key

2000-06-09  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_API.h:
    - Change register_internal_class to zend_register_internal_class for
    - consistency.
    - Andrei: I'm still thinking about the _ex you want me to implement

2000-06-08  sascha  <sascha@pb1.pair.com>

    * Zend.m4
      acconfig.h: Clean up acconfig.h

    * zend_execute_API.c
      zend_operators.c: Add a couple of casts

2000-06-06  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_compile.c:
    Enable asp_tags/short_tags/allow_call_time_pass_by_reference to work on a per-directory
    basis as well

2000-06-06  sascha  <sascha@pb1.pair.com>

    * zend_API.c:
    Add newline at the end of the file (breaks at least SCO and Tru64 C compiler).

2000-06-05  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l: - Revert internazionalization fix.

    * zend_builtin_functions.c: - Complete change to create_function()

2000-06-04  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_execute_API.c:
    Change shutdown order to sort out a crash when assigning a resource id to a static.

    * zend_hash.c
      zend_hash.h
      zend_operators.c: - Support unordered hash comparisons
    - Make == perform an unordered comparison with arrays/objects, and === perform an ordered comparison

    * zend_builtin_functions.c: Rename lambda()

2000-06-03  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c
      zend_hash.h
      zend_operators.c
      zend_operators.h:
    Support comparisons of arrays (with arrays) and objects (with objects)

2000-06-03  Andi Gutmans  <andi@zend.com>

    * zend.c: - Change #if to #ifdef.

2000-06-03  Zeev Suraski  <zeev@zend.com>

    * ZendTS.dsp
      zend.c: Don't take chances with new include files

    * zend_execute_API.c:
    Improve call_user_function() to support array($obj, $method)

    * zend-parser.y
      zend.h
      zend_operators.c: - Export normalize_bool
    - This global/static syntax fix brought us back to the 4 documented conflicts

    * zend_builtin_functions.c: Fix a lambda() bug

    * zend_builtin_functions.c: Add missing {

    * zend_globals.h
      zend_hash.c
      ZendTS.dsp
      zend-scanner.l
      zend.c
      zend.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h: - Fix Win32 compilation (Use winsock2.h from now on)
    - Add lambda() support

2000-06-02  Andi Gutmans  <andi@zend.com>

    * zend-parser.y: - global/static require a trailing ';'

2000-06-02  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c: Update error code

    * zend.c
      zend.h
      zend_config.w32.h: Nuke the old error code, use the new one

2000-05-31  Zeev Suraski  <zeev@zend.com>

    * zend.h: IS_BC isn't really being used, but still...

    * zend-parser.y
      zend.h
      zend_API.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.h
      zend_variables.c:
    Fix a bug in static initializers/default values/class member variables that contained
    array values

2000-05-29  Zeev Suraski  <zeev@zend.com>

    * zend_API.c
      zend_API.h: Allow disabling of functions for security reasons

2000-05-28  Andi Gutmans  <andi@zend.com>

    * zend_operators.c:
    - Use pointer arithmetic to speed up the function a bit

    * Zend.m4: - This should have been done for 4.0.0.
    - Default build is without debug now. Use --enable-debug if you want a
    - debug build which includes leak/memory overwrite etc. detection

2000-05-26  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l
      zend_operators.c
      zend_operators.h:
    - Fixed scanning decimal numbers in internationalized environments. They should
    - always be in standard US format e.g. 23.3

2000-05-25  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
    Fix a crash bug in certain situations of class redeclarations

2000-05-24  Thies C. Arntzen  <thies@thieso.net>

    * zend_hash.h: rename hastable -> _hashtable to avoid clashes

    * zend-scanner.l:
    add rdbuf() to our own istdiostream implementation, allowing C++ compile
    using SUN and SGI native compilers. (by Jayakumar Muthukumarasamy <jk@kasenna.com>)

2000-05-22  Zeev Suraski  <zeev@zend.com>

    * zend.c: - Remove ugly Ltd.

2000-05-21  Sam Ruby  <rubys@us.ibm.com>

    * zend.c: Windows build failure

2000-05-21  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_compile.h:
    - Fix Apache php source highlighting mode. It was crashing due to the
    - module shutdown functions being called when the startup functions weren't
    - being called.

    * zend.h
      zend_extensions.h: - Get ready for release

2000-05-19  Zeev Suraski  <zeev@zend.com>

    * zend_highlight.c
      zend_highlight.h: Open these up for the API

2000-05-18  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: Do it in thread unsafe mode for now.

2000-05-18  sascha  <sascha@pb1.pair.com>

    * zend_alloc.c: Kill warnings

2000-05-18  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c: - Do this someplace else.

    * zend_execute.c
      zend_operators.c:
    - Fix include() when used on resources (shouldn't work but shouldn't crash
      either).

2000-05-18  Andrei Zmievski  <andrei@ispi.net>

    * zend_operators.c:
    Update for sort functions - user can now specify sort type.

2000-05-17  Andi Gutmans  <andi@zend.com>

    * zend_operators.h
      zend_operators.c:
    - Add support for string_compare_function() and number_compare_function().
      UNTESTED!

2000-05-17  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: Normalize results of compare_function()

    * zend-scanner.l:
    Fix crash if %> is encountered in HTML while ASP-tags are disabled

2000-05-17  Andi Gutmans  <andi@zend.com>

    * zend_opcode.c: Fix order

2000-05-17  sascha  <sascha@pb1.pair.com>

    * zend_operators.h: Add missing prototype

2000-05-16  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c:
    - Small optimization. Filling up the Cache helps performance.

2000-05-12  sascha  <sascha@pb1.pair.com>

    * Makefile.am: Fix parallel makes on BSD

2000-05-11  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend-scanner.l
      zend.h
      zend_operators.c:
    Get rid of chval - it's really not necessary and seems to be confusing people

    * zend_compile.c: Refined fix

    * zend_compile.c:
    Fix a memory corruption bug with by-ref function arguments

2000-05-10  Andi Gutmans  <andi@zend.com>

    * zend_extensions.h: - Bump up Zend extension version number

2000-05-10  Thies C. Arntzen  <thies@thieso.net>

    * zend_compile.c: make waning readable

2000-05-08  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_opcode.c: Thoroughly initialize IS_UNUSED for proper cleanup

    * zend.h: - Change Zend Engine version number

    * zend_alloc.c: - Return real size allocated

2000-05-08  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: Make zend_binary_strcasecmp compile again

2000-05-08  sascha  <sascha@pb1.pair.com>

    * zend_operators.c: Make strcasecmp() act correctly WRT SUS II.

    Patch by: hholzgra@php.net
    PR: #3556

2000-05-06  Andi Gutmans  <andi@zend.com>

    * zend_execute.h
      zend_execute_API.c: - Make zend_eval_string() return SUCCESS/FAILURE

    * zend_execute.c:
    - Make $obj->test = 5; work again (assigning to uninitialized objects)

2000-05-05  sascha  <sascha@pb1.pair.com>

    * Zend.m4:
    Linking directly against libc might result in unexpected behaviour.
    We check for dlopen in libdl first, and check then whether dlopen exists.

2000-05-03  Andi Gutmans  <andi@zend.com>

    * zend_compile.h: - Change fetch_type to be zend_uint

    * zend_compile.c
      zend_execute.c: - Change the place CAST uses for the op_type

2000-05-02  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c
      zend_hash.h:
    Change zend_hash_get_current_key_ex() to also return the string length

2000-05-02  sascha  <sascha@pb1.pair.com>

    * zend_API.c:
    Fix segfault occuring when a temporary module was unloaded and if this
    module did not have a request shutdown function.

    * zend_API.h:
    Add ZEND_GET_MODULE(name). This is a short-cut for the common
    get_module function.

2000-05-01  sascha  <sascha@pb1.pair.com>

    * zend.c:
    Source file does not end with a newline. Some old compilers don't like that.

2000-05-01  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: Added a way to get all declared classes.

2000-05-01  sascha  <sascha@pb1.pair.com>

    * Makefile.am: Fix dependency

2000-04-29  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.h
      zend_opcode.c:
    Pass the op_array to the ctor/dtor, instead of just the resource

    * zend_extensions.c: crash fix

    * zend_extensions.c
      zend_extensions.h
      zend_llist.c
      zend_llist.h: - Add zend_llist_apply_with_arguments()
    - Add a message handler to the extensions

    * zend_compile.h
      zend_opcode.c:
    Fix possible bug with extension dtors being called without the ctors being called first

    * zend-scanner.l
      zend_compile.c
      zend_compile.h
      zend_opcode.c: Beautify

2000-04-28  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_extensions.c
      zend_extensions.h: Fix a bug in the resource dispencer

    * zend_operators.c
      zend_operators.h: Make convert_to_string() allocations traceable

2000-04-27  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.h
      zend-scanner.l
      zend.c
      zend_compile.c
      zend_compile.h
      zend_execute.c: *** empty log message ***

    * zend-scanner.l
      zend_compile.c
      zend_compile.h
      zend_execute.c: Change to using the #define's

    * zend.c
      zend.h: More error handling work (still completely disabled)

2000-04-26  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c
      zend_variables.c: Fix - forgot to split away if refcount>1

2000-04-25  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c: Fix bug

    * zend.h: We'll need two...

    * zend_hash.h: Add useful macros

2000-04-25  Andi Gutmans  <andi@zend.com>

    * zend_llist.c: - Fix persistence of llist

2000-04-24  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: - Forgot to keep the ':' in the class_name

    * zend_API.c: Correct fix

2000-04-24  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.c: MODULE_TEMPORARY should get a call to RSHUTDOWN as well!

    * zend.c:
    fixed shutdown crash if MSHUTDOWN tries to php_error() something.

2000-04-21  Thies C. Arntzen  <thies@thieso.net>

    * zend_variables.c
      zend_variables.h: export zval_add-ref and zvale_del_ref

2000-04-20  Zeev Suraski  <zeev@zend.com>

    * zend_operators.h: - Change macro names from Z to Z_

    * zend_operators.h: Add some macros for nicer zval handling

2000-04-20  Andrei Zmievski  <andrei@ispi.net>

    * zend_operators.c: Do proper ieeefp.h check.

2000-04-20  Thies C. Arntzen  <thies@thieso.net>

    * zend_operators.c:
    compile before commit! compile before commit! compile before commit!

    * zend_operators.c:
    revert andrei's path (i can't compile anymore on linux)
    we're always using #ifndef HAVE_BLA instead of if !HAVE_BLA and if we need ieeefp.h for some weird platform (which one is that?) we need an autoconf check for it.

2000-04-19  Andrei Zmievski  <andrei@ispi.net>

    * zend_operators.c: Include proper files for finite.

2000-04-19  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_builtin_functions.c
      zend_execute_API.c
      zend_globals.h:
    Initial support for trapping errors (not complete and disabled;  will be enabled only
    post-PHP 4.0.0)

    * zend_builtin_functions.c
      zend_constants.c
      zend_errors.h:
    - Renamed get_used_files() to get_required_files() for consistency
    - Documented some functions
    - Added user-level warning messages
    - Added user_error()

2000-04-19  Andi Gutmans  <andi@zend.com>

    * zend_opcode.c
      zend_compile.h: - Export pass_include() for Windows

2000-04-18  Zeev Suraski  <zeev@zend.com>

    * zend_operators.h:
    Add convert_to_writable_*_ex() macros (unused at this time)

2000-04-17  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.c: - Fix order of JMPZNZ arguments

2000-04-17  Thies C. Arntzen  <thies@thieso.net>

    * zend_operators.c: ups, finite is already a macro on Win32

    * Zend.m4
      zend_operators.c: HPUX11 only has isfinite()

2000-04-15  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l: - Fix leak in require_once()

2000-04-15  Thies C. Arntzen  <thies@thieso.net>

    * zend_extensions.c: fixes compile on platforms without dl() support.

2000-04-15  Zeev Suraski  <zeev@zend.com>

    * zend.c: Fix ZTS

2000-04-15  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l:
     "use" is not yet supported; instead use include_once() or require_once()
      for the time being (Andi, Zend library)

2000-04-15  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_API.c
      zend_compile.c
      zend_execute_API.c
      zend_list.c
      zend_list.h: - Clean up resource lists namespace
    - Prepare extended resource list destructor APIs (currently unused)

2000-04-13  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
    Fix a memory leak when using assign-op bitwise operators on strings

2000-04-12  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: *** empty log message ***

2000-04-11  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c: - Fix memory leak

2000-04-11  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Fix warnings

    * zend_execute.c: Fix fd leak in include_once()

2000-04-10  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l
      zend_execute.c: -

2000-04-10  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h
      zend_operators.c: Fix object overloading support

2000-04-10  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Add warnings

    * zend_compile.c: - Two more places needed changing

2000-04-10  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.h: Clean up last/size definitions

2000-04-09  Zeev Suraski  <zeev@zend.com>

    * zend_compile.h: *** empty log message ***

2000-04-07  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Thoroughly fix include_once()

    * zend_execute.c: Fix include_once()

2000-04-06  Andi Gutmans  <andi@zend.com>

    * zend-parser.y: *** empty log message ***

    * zend_execute.c
      zend_execute.h: Initial preparation for OO overloading patch

2000-04-05  Andi Gutmans  <andi@zend.com>

    * zend_extensions.h: - Bump up version number

    * zend_compile.c
      zend_execute.c: - FIx JMPZNZ

2000-04-03  Zeev Suraski  <zeev@zend.com>

    * zend_list.c:
    Fix the problem with dl()'d modules not freeing their resources properly

2000-04-01  Zeev Suraski  <zeev@zend.com>

    * zend_API.h
      zend_config.w32.h: *** empty log message ***

    * acconfig.h: Have a standard way of exporting symbols

    * zend_modules.h: Use int

    * zend_API.h: Generalize some common thread-safety stuff

    * zend_modules.h: Have a standard entry for the globals id

2000-03-31  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
    The previous fix ended up being broken, this one should do it

2000-03-31  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Fix bug

2000-03-30  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c: Fix zend_register_extension()

2000-03-30  Andi Gutmans  <andi@zend.com>

    * zend_extensions.h: - Bump up API number after Lars' change

2000-03-30  sascha  <sascha@pb1.pair.com>

    * Makefile.am: Give another hint to BSD makes

    * Makefile.am:
    Specifically mention $(srcdir), so that OpenBSD's make gets it

2000-03-29  Zeev Suraski  <zeev@zend.com>

    * zend_stack.c
      zend_stack.h
      zend_compile.c:
    - Make the argument order for the stack applies more consistent with other Zend
      data structures
    - Fix a possible corruption problem due to switch() C-level optimization

2000-03-29  Torben Wilson  <torben@pinc.com>

    * zend-parser.y
      zend-scanner.l
      zend_compile.h
      zend_execute.c
      zend_opcode.c
      zend_operators.c
      zend_operators.h:

    Added !== (is not identical) operator.

2000-03-29  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c
      zend_extensions.h: *** empty log message ***

2000-03-29  Andi Gutmans  <andi@zend.com>

    * zend_API.h:
    - Make sure zend_API.h has Zend'ish versions of the ZEND macros so that
      Zend'ish modules don't need to mix PHP & Zend notation.

2000-03-28  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c:
    The checks for func_num_args() and friends were broken - fixed

2000-03-27  Sam Ruby  <rubys@us.ibm.com>

    * Zend.dsp: Remove debug libraries from debug build

2000-03-26  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_execute_API.c
      zend_API.c
      zend_builtin_functions.c: - Stop zend_func_args() and co. from crashing

    * zend.h:
    - Didn't see Thies' commit message although I can't really see how it would
      make a difference

    * zend.h
      zend_opcode.c: - Include Andrea's fix for alloca.h

2000-03-26  Thies C. Arntzen  <thies@thieso.net>

    * zend.h
      zend_execute.c:
    <alloca.h> needs to be included before we define macros calling alloca()
    atleast using SGI's cc - should not harm other platforms (i hope)

    * zend_opcode.c: fix cast

2000-03-25  Andi Gutmans  <andi@zend.com>

    * zend_alloc.c
      zend_alloc.h: *** empty log message ***

2000-03-25  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_opcode.c
      zend_variables.c: - Some header dependencies cleanup
    - Generalize zval_print() and zval_print_r()

2000-03-25  Sam Ruby  <rubys@us.ibm.com>

    * zend.h: RTLD_NOW => RTLD_LAZY|RTLD_GLOBAL

2000-03-25  Zeev Suraski  <zeev@zend.com>

    * Zend.dsp: Update dsp's

2000-03-24  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
    - Fixed a crash when sending a non-variable expression to a runtime-bound function
      that expected a reference.

2000-03-24  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_builtin_functions.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_hash.c
      zend_hash.h: - Nuke hash_*_ptr functions

2000-03-23  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: Use WRONG_PARAM_COUNT.

2000-03-23  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c: - Make it compile

2000-03-23  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: Added get_class_methods().

2000-03-22  Andi Gutmans  <andi@zend.com>

    * zend.h: - Change Zend version as API has changed

2000-03-22  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: - Wrong fix

    * zend_operators.c: - Only free when result != op1

2000-03-21  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend.h:
    - Change zend_startup to accept a flag for starting builtin functions

    * zend.h
      zend_API.h: - Move #defines

2000-03-19  Thies C. Arntzen  <thies@thieso.net>

    * zend_compile.h: kill warning

2000-03-18  Andi Gutmans  <andi@zend.com>

    * zend.h: - Fix compile problem on FreeBSD

    * zend.h:
    - No reason for refcount to be signed and move to zend_* typedefs

2000-03-18  Thies C. Arntzen  <thies@thieso.net>

    * zend.c: renamed _string_value_() to __string_value().

2000-03-18  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c:
    The third argument to define() wasn't working right, fixed

    * zend_execute.c:
    false wouldn't automaticaly switch to an array type, which resulted in an
    incompatibility with PHP 3.  Fixed.

2000-03-16  Thies C. Arntzen  <thies@thieso.net>

    * zend.c: renamed "to_string" -> "_string_value_"

2000-03-15  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l
      zend.h
      zend_execute.c: - Fix newly introduced problem reported by Sam Ruby

2000-03-15  Andrei Zmievski  <andrei@ispi.net>

    * zend_hash.c
      zend_hash.h:
    Make zend_hash_move_forward()/zenv_hash_move_backwards() a little smarter.

2000-03-15  Zeev Suraski  <zeev@zend.com>

    * zend_opcode.c: - Fix warning (I thought I fixed this one before)

2000-03-14  Andrei Zmievski  <andrei@ispi.net>

    * zend_llist.c
      zend_llist.h: Implemented external list traversing.

2000-03-14  Andi Gutmans  <andi@zend.com>

    * zend-parser.y:
    - Allow array(1,2,3,) i.e. with trailing comma. You can only have one
      trailing comma.

2000-03-13  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: -

    * zend_compile.c: - Spare a byte :)

2000-03-13  Andi Gutmans  <andi@zend.com>

    * zend_compile.h
      zend_modules.h: - Another zend_uchar

    * zend_compile.c: *** empty log message ***

    * zend.h
      zend_compile.h:
    - define zend_uint and zend_uchar and use them in a few places

2000-03-13  Andrei Zmievski  <andrei@ispi.net>

    * zend_hash.c
      zend_hash.h:
    Introduced a way to traverse hashes through external pointers.

2000-03-13  Andi Gutmans  <andi@zend.com>

    * zend_compile.h: - Change type from int -> char

2000-03-13  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l: - Fix filename/lineno initialization for do_return

2000-03-12  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c
      zend_modules.h: -

2000-03-11  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Remove inline from functions which are pretty large and besides eating up
      memory in compile time probably doesn't boost performance.

2000-03-10  Andi Gutmans  <andi@zend.com>

    * zend_operators.c:
    - Seems to be a problem here with the return value not being set

    * zend-parser.y
      zend_builtin_functions.c
      zend_execute.c
      zend_execute_API.c
      zend_globals.h: - Quick way of supporting include_once().
      Good enough for RC1.

    * zend-parser.y
      zend-scanner.l
      zend_compile.c
      zend_compile.h: - Support require_once().

    * zend_compile.h
      zend_execute.c: - Cleanup old IMPORT stuff

    * zend-parser.y
      zend-scanner.l:
    - Nuke import, add include_once and include_require scanner/parser rules.
      Hope to nuke use too :)

    * zend_modules.h: - That broke the Win32 build

    * zend_modules.h: - Fix a bug and define an API_NO for the ZEND_MODULE_API

    * zend_modules.h: - zend_config.h is enough

    * zend_modules.h: - Save ZEND_DEBUG, ZTS, ZEND_API information

2000-03-09  Andi Gutmans  <andi@zend.com>

    * zend_highlight.c: - Fix bug in syntax highlighter

2000-03-06  stig  <stig@pb1.pair.com>

    * zend_modules.h: added GINIT_FUNC_ARGS and GINIT_FUNC_ARGS_PASSTHRU

2000-03-06  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.h: - Bump up Zend's API version

2000-03-06  stig  <stig@pb1.pair.com>

    * zend_modules.h: Added ZEND_MODULE_INFO_FUNC_ARGS_PASSTHRU.

2000-03-06  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l: - Fix memory leak

    * zend.c: - Missed one

2000-03-06  Sam Ruby  <rubys@us.ibm.com>

    * zend.c
      zend.h: Unresolved externs

2000-03-06  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c
      zend_extensions.h
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_variables.c
      zend_variables.h
      LICENSE
      zend-parser.y
      zend-scanner.h
      zend-scanner.l
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.c
      zend_compile.h
      zend_config.w32.h
      zend_constants.c
      zend_constants.h
      zend_dynamic_array.c
      zend_dynamic_array.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_modules.h: It's official now...

2000-03-05  Zeev Suraski  <zeev@zend.com>

    * ZendTS.dsp
      zend.c
      zend.h: Wrap some commonly unused callbacks

2000-03-04  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l:
    The default return value from include() and eval() changed from 1 to 0
    unintentionally after the old return-reference patches - fixed

2000-03-02  Sam Ruby  <rubys@us.ibm.com>

    * zend_config.w32.h: Fix Win32 build breakage

2000-03-01  Andi Gutmans  <andi@zend.com>

    * zend.c: - Upgrade to year 2000

    * ZEND_CHANGES
      zend_compile.c
      zend_execute.c: - Fix typos

2000-03-01  Thies C. Arntzen  <thies@thieso.net>

    * zend_operators.c:     now

2000-02-27  Egon Schmid  <eschmid@s.netic.de>

    * zend_builtin_functions.c: Fixed some protos.

2000-02-26  Sam Ruby  <rubys@us.ibm.com>

    * zend_builtin_functions.c: compilation error - Win32

2000-02-26  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c:
    Added get_class_vars() and get_object_vars() functions.

    * zend_execute.c: Fix typo.

2000-02-26  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: Fix comparisons of "inf"=="inf" and "-inf"=="-inf"

2000-02-25  Zeev Suraski  <zeev@zend.com>

    * zend_fast_cache.h
      zend_variables.c: Use the fast cache here too

2000-02-19  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend-scanner.h
      zend-scanner.l
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_builtin_functions.c
      zend_builtin_functions.h
      zend_compile.c
      zend_compile.h
      zend_config.w32.h
      zend_constants.c
      zend_constants.h
      zend_dynamic_array.c
      zend_dynamic_array.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_modules.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_variables.c
      zend_variables.h: (c) patch

    * zend_API.c
      zend_API.h
      zend_fast_cache.h
      zend_hash.c:
    - Fix a nasty bug in the hash, introduced in the recent migration to macros
    - Make array_init() and friends trackable

    * zend_API.c
      zend_API.h
      zend_execute.c
      zend_operators.c
      zend_operators.h: Generalize macros

2000-02-18  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l: *** empty log message ***

2000-02-18  sascha  <sascha@pb1.pair.com>

    * zend_llist.c
      zend_llist.h:
    Get rid of second declaration of compare_func_t. Either put in a common
    header file or prefix it with i.e. zend_llist_

2000-02-18  Andi Gutmans  <andi@zend.com>

    * zend_llist.c
      zend_llist.h:
    - Quick and dirty hack for supporting sorts. Improve later on when I wake up.

    * ZendTS.dsp
      zend_dynamic_array.c: - Didn't compile on Win32

    * zend_dynamic_array.c:
    - Tiny change (I know I don't have to cast malloc() to void * but I like
      casting my malloc()'s)

    * Makefile.am
      zend_dynamic_array.c
      zend_dynamic_array.h:
    - Preliminary support for dynamic arrays. I need it on order to try out a
      new hash implementation. It isn't used anywhere.

2000-02-17  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend.h: - Add ZEND_API

2000-02-16  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: -Fix bug 3504 concerning leaks with unset()

    * zend_execute.c
      zend.h
      zend_compile.h: - Hopefully fix Thies' bug report.

2000-02-16  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c:
    ZEND_TEST_EXCEPTIONS should be defined/undefined before it's checked

2000-02-16  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Fix bug #3309

2000-02-14  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c:
    - Put in the infrastructure for the unset() fix. Right now it has the old
      behavior but I just need time tomorrow to add the correct behavior.

    * zend_builtin_functions.c: - Fix bug in func_get_arg()
    - Get rid of compiler warnings for unused function crash()

2000-02-13  Zeev Suraski  <zeev@zend.com>

    * zend_constants.c: Fix a memory leak

2000-02-13  Andi Gutmans  <andi@zend.com>

    * zend_hash.c: - Save a function call one very hash_add

    * zend_hash.c
      zend_hash.h:
    - Make startup a bit faster by changing some hash_update()'s and hash_add()'s
      to hash_update_ptr()/hash_add_ptr()

    * zend_hash.c:
    - Fix a couple of potential bugs where we were using emalloc/efree instead
      of pemalloc/pefree.
    - Fix a bug were we potentially would be freeing the key by mistake

2000-02-13  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c: *** empty log message ***

    * zend_operators.c: Make (array) false == array() and not array(false)

2000-02-11  Andrei Zmievski  <andrei@ispi.net>

    * zend_hash.c
      zend_hash.h: Made a couple of typedefs for zend_hash_apply_*() calls.

2000-02-11  Zeev Suraski  <zeev@zend.com>

    * Zend.dsp
      ZendTS.dsp
      zend_config.w32.h: Update .dsp's

    * zend-scanner.l
      zend.h
      zend_API.h
      zend_alloc.c
      zend_config.w32.h
      zend_constants.c
      zend_execute.c
      zend_extensions.c: Fine tune Andi's patch

2000-02-10  Andi Gutmans  <andi@zend.com>

    * zend.h: - #define ZEND_WIN32 differently

    * zend-scanner.l
      zend.h
      zend_API.h
      zend_alloc.c
      zend_constants.c
      zend_execute.c
      zend_extensions.c: - Finally beautify those WIN32|WINNT checks

    * zend_execute.c: - Shouldn't be there

    * zend_execute.c: - Cleanup the code

2000-02-09  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend_execute.c:
    Fix last known nasty bugs in Zend.  It'll be cool if there are no new ones :)

2000-02-09  Thies C. Arntzen  <thies@thieso.net>

    * zend_execute.c: foreach() works now for objects as well.

2000-02-08  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: Fix declaration

    * zend_execute.c: Fix an elusive bug

2000-02-08  Andrei Zmievski  <andrei@ispi.net>

    * zend_operators.c: Fix up the patch.

    * zend_builtin_functions.c
      zend_operators.c
      zend_operators.h: Patches from Walter for strncmp() stuff.

2000-02-07  Zeev Suraski  <zeev@zend.com>

    * zend_highlight.c: Remove old unnecessary check

    * zend-parser.y
      zend-scanner.l
      zend_compile.c
      zend_highlight.c:
    Syntax highlighting was erronously emitting more than one semicolon and/or garbage with heredocs

2000-02-06  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
    - Support the string offset syntax $a{2} with the regular array opcodes.
      Will need to write new opcodes sometime but right now it's good enough
      to announce the change to this string offset syntax for beta 4.

2000-02-05  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c:
    - This hopefully fixes the list($a, $a) = array(1,2) crash, i.e. when list
      by mistake contains the same variable twice.
    - BTW, there is no defined order of assignment. The value of $a after the
      previous example is undefined, and should not be assumed to be either 1
      nor 2.

2000-02-05  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: More cleanup

    * zend.h
      zend_builtin_functions.c
      zend_execute.c
      zend_execute_API.c: Pass the executor globals to internal functions

    * zend.c
      zend.h
      zend_API.c
      zend_compile.c
      zend_constants.c
      zend_execute.c
      zend_execute_API.c
      zend_hash.c
      zend_hash.h
      zend_modules.h
      zend_variables.c: - Stop passing list/plist to internal functions
    - Add a typedef for the pCopyConstructor function pointer
    - Minor hacks

    * zend-scanner.l:
    That was the broken downcasting that prevented the interactive C++ mode from working properly under UNIX

2000-02-04  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h
      zend_opcode.c:
    Maintain a state of whether we're compiling and/or executing

2000-02-03  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c
      zend_API.h: *** empty log message ***

2000-02-02  Zeev Suraski  <zeev@zend.com>

    * zend_API.c: - Fix built-in classes with more than 5 methods

    * zend_compile.c:
    - Fix the annoying problem with list(), that surfaced up after our recent cleaning
      patches

2000-02-01  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c
      zend_API.h: Added add_property_unset() and add_property_bool().

2000-02-01  Zeev Suraski  <zeev@zend.com>

    * ZendTS.dsp
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_execute_locks.h: Improve dependencies

    * zend_execute.c: Sort out a gdb problem

    * zend_execute.c: Fix warning

2000-02-01  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute_API.c
      zend_globals.h: - Get rid of remains of garbage.
    - This should fix Thies' UMR

2000-02-01  Thies C. Arntzen  <thies@thieso.net>

    * zend_execute_API.c:
    moved destroying of garbage before resource-list gets destroyed - (see my previous mail)
    zeev, andi - please comment!

    * zend.c: added missing break.

    * zend_hash.c
      zend_hash.h:
    took out zend_hash_pointer_update() & zend_hash_pointer_index_update_or_next_insert() - i really prefer link-errors instead of runtime-errors, don't you?

2000-01-31  Andi Gutmans  <andi@zend.com>

    * zend_compile.h: - This has to always be done.

2000-01-31  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend_compile.h
      zend_execute.c
      zend_execute_API.c: - Optimized garbage mechanism
    - Fixed another buglet in the parser

    * zend-parser.y
      zend_alloc.c
      zend_execute.c
      zend_fast_cache.h: - Fix foreach()
    - Fix indirect reference with object properties

2000-01-30  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fix the bug Thies found where I forgot to change a break; to NEXT_OPCODE();
    - If you find anymore let me know

    * zend_alloc.h: - Run it on align_test

2000-01-29  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Fix ``'s

    * zend-parser.y
      zend-scanner.l
      zend_compile.h: Fix require()

2000-01-29  Andi Gutmans  <andi@zend.com>

    * zend-parser.y: - Get rid of another rule which isn't needed.

    * zend-parser.y
      zend_compile.c
      zend_compile.h:
    - Add parser support for string offsets. This added three shift/reduce
      conflicts but they all seem to be fine.
    - Cleaned up the parsing rules a bit and made them much more compact and
      elegant.
    - Please CVS update and see that I didn't break anything.

    * zend_alloc.h:
    - This will save some memory w/ GCC compilers on some platforms

    * zend_execute.c: - Yet another tiny optimization.

2000-01-28  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_execute.c: - Make loop a bit faster.

    * zend.h: - Make sure its use is understood.

    * zend.h
      zend_execute.c: - Double the speed of some key switch() tests for Win32.

    * zend_execute.c:
    - This makes the switch() statement twice as quick. Moving to enum
      might make this a general speed up for other platforms too

2000-01-26  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c: - Keep objects as references.

    * zend_execute_API.c
      zend_opcode.c:
    - Allow is_ref to become 0 in case the refcount is back to 1.

2000-01-24  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.c:
    - Make foreach() now copy the array but use the original array. It can
      still be optimized A LOT but it's only a performance issue and not
      a feature issue.

2000-01-24  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend-scanner.l
      zend.c
      zend.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_operators.c
      zend_operators.h: - Implement declare() with declarables framework
    - Implement ticks - Germany&Norway - 5 points!

    * zend_execute.c
      zend_execute_API.c: Fixes

2000-01-22  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c: Fix an elusive bug

2000-01-20  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c: Add some order...

    * zend_hash.c: Indentation fixes

2000-01-19  Andi Gutmans  <andi@zend.com>

    * zend_hash.c: - Optimize zend_hash_del a tiny bit.

    * zend_hash.c
      zend_hash.h: - Hopefully fix the hash problem.

    * zend_hash.c: - Hrm I'm not concentrating

    * zend_hash.c:
    - Actually the destructor should run after the data is already detached
      from the hash but before the bucket is freed.

    * zend_hash.c:
    - Rollback hash_apply and friends. They assume now that hash_del is reentrant
      as it first applies the destructor and only later nukes the bucket

    * zend_hash.c:
    - Run destructor before the hash structure is modified, thus, making
      hash_del, reentrant (BLOCK_INTERRUPTIONS needs to be made a counter now).

    * zend_hash.c: - Undo a bug we introduced. (Another one out there).

2000-01-19  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h:
    RETURN_NULL -> RETURN_NULL() // we don't want macros without an argumnet

2000-01-18  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Leak fix

2000-01-18  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h: RETURN_NULL & RETVAL_NULL don't need ().

2000-01-17  Thies C. Arntzen  <thies@thieso.net>

    * zend_hash.c: use defines

2000-01-17  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c
      zend_hash.h
      zend_variables.c: Get rid of the IsPointer functionality in the hash.

    * zend_hash.c: - Fixes a newly introduced bug in the hash

    * zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_constants.h
      zend_execute_API.c
      zend_hash.c
      zend_hash.h
      zend_list.c
      zend_list.h
      zend_modules.h
      zend_opcode.c
      zend_variables.c
      zend_variables.h:
    Destructors no longer return ints, the low level problem it was intended to solve is long gone now...

2000-01-16  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_execute_API.c
      zend_hash.c
      zend_hash.h
      zend_list.c
      zend_list.h:
    - Make zend_hash_apply() (and friends) reentrant and much, much quicker
    - Introduce zend_hash_graceful_destroy(), which allows the destructor functions to
      use zend_hash_apply() and/or zend_hash_graceful_destroy()
    - Switch to zend_hash_graceful_destroy() in the resource list shutdowns

    * zend.c
      zend_compile.c
      zend_compile.h:
    Allow module startup to be separate from the compiler/executor startup

2000-01-16  Thies C. Arntzen  <thies@thieso.net>

    * zend_hash.c: make the ht->inconsistent stuff less ugly:)

2000-01-15  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c
      zend_list.c: Fix a bug in call_user_function_ex()

    * zend-parser.y:
    Added support for $foo->{$bar}["foobar"] notation (was supported in PHP 3)

2000-01-15  Thies C. Arntzen  <thies@thieso.net>

    * zend_hash.c
      zend_hash.h:
    if ZEND_DEBUG mode is on we'll now see warnings  when a HashTable is accessed
    while it's inconsistent.

    Zeev, Andi - you welcome to revert this patch if you don't like it - i find it
    useful! accesssing inconsistent hashtables is one of the hardest things to track!

2000-01-14  Andrei Zmievski  <andrei@ispi.net>

    * zend_highlight.c:
    Since we're highlighting code, put <code> and </code> around the code.

2000-01-13  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_config.w32.h: Make Win32 compile again

2000-01-12  sascha  <sascha@pb1.pair.com>

    * acconfig.h
      zend.h:
    Move dl stuff from acconfig.h into zend.h. That allows us finer control
    when it comes to suppressing dlfcn.h.

2000-01-09  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Functionality & crash fixes

2000-01-04  Andi Gutmans  <andi@zend.com>

    * zend.h
      zend_operators.c:
    - Rename IS_BC to FLAG_IS_BC. We will probably nuke it.

2000-01-04  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h: added ZVAL_*() macros.

2000-01-04  Andi Gutmans  <andi@zend.com>

    * zend.h
      zend_execute.c:
    - Separate the overloaded objects' types from Zend's data types.
      There is no reason for them to be the same, and IS_METHOD just cluttered
      there data types.

    * zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_constants.c
      zend_execute.c
      zend_execute_API.c
      zend_operators.c
      zend_variables.c
      zend-parser.y
      zend.c: - Change IS_UNSET -> IS_NULL

2000-01-03  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Fix a bug when using [] on a string

2000-01-03  Joey Smith  <joey@joeysmith.com>

    * zend_operators.c:     number.h comes from ext/bcmath, not functions/

2000-01-03  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Fix

2000-01-03  Andi Gutmans  <andi@zend.com>

    * zend_operators.c: - Fix compare_function() for IS_UNSET

2000-01-02  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Fix

2000-01-02  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h: renamed RET???_UNSET -> RET???_NULL

2000-01-01  sascha  <sascha@pb1.pair.com>

    * Zend.m4
      acconfig.h
      acinclude.m4: Some cleanup

2000-01-01  Andi Gutmans  <andi@zend.com>

    * zend_operators.c:
    - IS_NULL should be 0 when converted to a long although I don't think it
      really should be documented.

2000-01-01  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: Fix buglet

1999-12-31  Zeev Suraski  <zeev@zend.com>

    * Zend.dsp
      ZendTS.dsp: .dsp updates

    * Zend.dsp
      ZendTS.dsp
      zend_config.w32.h: - Add Release_inline builds

    * zend-parser.y
      zend-scanner.l
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_constants.c
      zend_execute.c
      zend_execute_API.c
      zend_operators.c
      zend_operators.h
      zend_variables.c: - Nuke undefined_variable_string
    - Introduce IS_UNSET

1999-12-31  Andi Gutmans  <andi@zend.com>

    * ZendTS.dsp
      zend-parser.y
      zend_compile.c
      zend_compile.h:
    - Fix bug #3073. continue in do..while() loops should work now

1999-12-30  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend_alloc.c
      zend_fast_cache.h
      zend_globals.h
      zend_globals_macros.h:
    This should enable people to use ALLOC_ZVAL() in code outside the php4.dll

1999-12-30  sascha  <sascha@pb1.pair.com>

    * Zend.m4:
    Solaris' sed does not like this expression. Since -O0 is the default,
    we can also omit it.

1999-12-29  Zeev Suraski  <zeev@zend.com>

    * zend_variables.c:
    - Change var_reset() to set bool(0) instead of string("")

    Authors should go over their code and change it to use var_reset() instead of manually
    setting it to string(""), in case they're interested in the false value.

    * zend_alloc.c: time_t is an int under Linux... this should always work.

1999-12-28  sascha  <sascha@pb1.pair.com>

    * zend_alloc.c: Fix warnings

1999-12-28  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h
      zend_constants.c: new constant: SQL_NULL
    new macros: RETURN_SQLNULL,RETVAL_SQLNULL,IS_SQLNULL

1999-12-27  Zeev Suraski  <zeev@zend.com>

    * zend_fast_cache.h: Fix

1999-12-27  Andi Gutmans  <andi@zend.com>

    * zend_API.c: - Get rid of warning

1999-12-27  Zeev Suraski  <zeev@zend.com>

    * Zend.dsp
      ZendTS.dsp
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_fast_cache.h
      zend_globals.h
      zend_opcode.c
      zend_operators.c
      zend_variables.c
      zend_zval_alloc.h: - Generalize the fast cache mechanism
    - Add the HashTable struct to the fast cache mechanism

1999-12-27  Andi Gutmans  <andi@zend.com>

    * zend_API.c:
    - Make zend_internal_function allocate a full zend_function structure so
      that we don't get memory overruns and Thies doesn't get angry :)

1999-12-27  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: *** empty log message ***

    * zend_globals.h
      zend_zval_alloc.h
      zend_alloc.c: Add cache statistics support

1999-12-27  Thies C. Arntzen  <thies@thieso.net>

    * zend.c: fix UMR in ZTS mode

1999-12-26  Zeev Suraski  <zeev@zend.com>

    * Zend.dsp
      ZendTS.dsp
      zend_alloc.c
      zend_globals.h
      zend_zval_alloc.h:
    - Enable the new zval cache on debug too.  No real reason not to, and it keeps
      the code cleaner.
    - ZTS compile fixes

    * zend_alloc.c: Fix buglet

    * zend_zval_alloc.h: Add missing file

    * zend.h
      zend_API.h
      zend_alloc.c
      zend_compile.c
      zend_execute.c
      zend_globals.h
      zend_operators.c:
    Introduce a zval-specific cache - 5-15% speed improvement

1999-12-26  sascha  <sascha@pb1.pair.com>

    * Makefile.am
      acinclude.m4: Makefile.am: Add dummy target for dependencies
    acinclude.m4: Cache result of broken sprintf check

1999-12-26  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_operators.c: Change ALLOC_ZVAL() semantics

    * zend_alloc.c
      zend_alloc.h
      zend_globals.h: namespace protection

1999-12-25  Zeev Suraski  <zeev@zend.com>

    * zend_ptr_stack.c
      zend_ptr_stack.h: inline functions cannot accept varargs

1999-12-25  Andi Gutmans  <andi@zend.com>

    * zend-parser.y: - Prepare Zend for the new $a{2} string offset syntax.

1999-12-24  Zeev Suraski  <zeev@zend.com>

    * zend_config.w32.h:
    Use __forceinline under Win32 (inlining under Win32 gives roughly 30% performance
    increase)

    * zend-scanner.l: Shut gcc up

    * zend_compile.c: Optimize

1999-12-24  Andi Gutmans  <andi@zend.com>

    * zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_operators.c
      zend_variables.c:
    - Create two new macro's. ALLOC_ZVAL() and FREE_ZVAL(z) and make Zend use
      them.

1999-12-24  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: - Use function_add_ref() here too

1999-12-23  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_opcode.c:
    Fix a class inheritence leak, when using static varibles in a parent class member function

    * zend_compile.c: This one slipped away

1999-12-23  sascha  <sascha@pb1.pair.com>

    * Zend.m4: Rename option to match description string

1999-12-23  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend-scanner.l
      zend_compile.c
      zend_compile.h
      zend_execute.c:
    - require() of a dynamic expression now has the standard require() semantics
    - Fixed a memory leak in require() of a dynamic expression

1999-12-23  sascha  <sascha@pb1.pair.com>

    * Makefile.am
      Zend.m4:
    Compile zend_execute.c with special CFLAGS. For GCC, INLINE_CFLAGS
    contains -O0 to disable optimizations. This can be disabled by using
    the appropiate parameter.

1999-12-22  sascha  <sascha@pb1.pair.com>

    * zend_builtin_functions.c: Kill compiler warning

    * Zend.m4: Don't set DEBUG_CFLAGS to -g, if -g is already in CFLAGS

1999-12-22  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h: export

    * zend_extensions.h: Those void's don't belong in there

    * zend_API.h
      zend_builtin_functions.c: - Fix function_exists()

    * zend_execute.c:
    - Fix a very old legacy memory leak in break(n) statements

    * zend_execute.c: Fix for the array() initialization bug Stas found

1999-12-22  Andi Gutmans  <andi@zend.com>

    * zend_compile.c: - Remove unused variable.

1999-12-21  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l
      zend.h
      zend_compile.c
      zend_execute.c:
    Fix the highlighting problem.  STR_REALLOC() should be used instead of plain erealloc()
    whenever you're dealing with strings that might be coming back from the engine - there seem
    to be a few other places like this in PHP.

1999-12-21  Andrei Zmievski  <andrei@ispi.net>

    * zend.c
      zend_API.c
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_operators.c
      zend_variables.c
      zend_variables.h: We're using ZVAL's now.

1999-12-21  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: - Fix Sascha's leak. Good report!

    * zend_alloc.c: No need to block for interruptions so early

1999-12-21  sascha  <sascha@pb1.pair.com>

    * Zend.m4:
    Explicitly check for C++ preprocessor, otherwise autoconf forces it onto
    us at the wrong place (subsequent autoconf checks failed).

1999-12-20  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: - Fix @expr

    * zend.h
      zend_compile.c
      zend_execute.c:
    - Fix the crash Thies was experiencing (returning a function call could cause a crash)
    - Fix the leak Thies was experiencing (@fcall() leaked)

1999-12-19  Zeev Suraski  <zeev@zend.com>

    * Zend.dsp: Some updates

    * Zend.dsp
      ZendTS.dsp: Make these work again

    * FlexLexer.h
      Makefile.am
      Zend.dsp
      Zend.m4
      ZendTS.dsp
      configure.in
      flex.skl
      libzend.dsp
      libzend.m4
      libzendts.dsp: libzend -> Zend

    * zend.h
      zend_API.h
      zend_compile.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h:
    - Made things work again (Thies, everybody - please check the latest CVS and see if you're
      still getting any problems)
    - Changed the interface of call_user_function_ex() to support returning of references

1999-12-19  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend.h
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_globals.h: - More fixes related to the return references patch
    - eval_string() and call_user_function_ex() still don't work.
    - The libzend tree is untested and might not be stabl yet.

1999-12-19  sascha  <sascha@pb1.pair.com>

    * Makefile.am: Add zend_sprintf.c

    * acconfig.h
      zend_sprintf.c: configure sets ZEND_BROKEN_SPRINTF

    * acinclude.m4: Variables are not interpolated unless we use _UNQUOTED

1999-12-18  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_API.h: - The tree compiles again

1999-12-18  sascha  <sascha@pb1.pair.com>

    * libzend.m4: Let autoconf check for the proper inline keyword

    * Makefile.am
      libzend.m4:
    automake created illegal target names due to the ZEND_SCANNER definition.
    We now substitute @ZEND_SCANNER@ directly

1999-12-18  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_API.c
      zend_API.h
      zend_builtin_functions.c:
    - Introduce ZEND_NUM_ARGS(), to replace ARG_COUNT(ht)
    - Rename getParameters() and friends for consistency and namespace cleanliness

1999-12-17  Zeev Suraski  <zeev@zend.com>

    * zend_constants.c: - Made PHP_VERSION and PHP_OS work again
    - More php3_ cleanup
    - Restored the PHP_VERSION and PHP_OS constants 

1999-12-17  sascha  <sascha@pb1.pair.com>

    * libzend.m4: Define inline to inline explicitly

    * Makefile.am
      acinclude.m4
      configure.in
      libzend.m4: Move config code into separate file

1999-12-17  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_compile.h:
    - By mistake commited this to the branch. It fixes a bug we introduced with
      the return reference patch.

1999-12-15  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: Doh! I'm an idiot.

    * zend_builtin_functions.c
      zend_compile.c: - s/inheritence/inheritance/g
    - Added is_subclass_of() function

1999-12-15  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_opcode.c: - Implement return by reference:
      - In function declaration instead of the return statement
      - In the assignment phase
    - Implement ability to turn off support for call-time pass by reference

1999-12-15  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: val->len

    * zend_builtin_functions.c: Faster, must go faster.

1999-12-15  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_opcode.c
      zend-parser.y
      zend_compile.c
      zend_compile.h:
    - Preliminary return ref patch. It breaks libzend so don't use this branch
      right now.

1999-12-14  Andrei Zmievski  <andrei@ispi.net>

    * zend_builtin_functions.c: - Added class_exists()
    - Moved function_exists() here from from the basic_functions.c
    - Modified method_exists() to convert method name to lowercase
      when checking

1999-12-13  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fix problem when return_value's is_ref/refcount is overwritten by the
      internal function.

1999-12-11  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Another small fix.

    * zend_execute.c: - Support returning references

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h:
    - This is supposed to be commited to the RETURN_REF_PATCH branch which is
      the beginning of work on allowing returning of references from functions.

1999-12-07  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l:
    - opened_path should not be freed here as the zend_file_dtor() takes care
      of it. This doesn't fix the bug report for the crash of highlight_file()
      though.

1999-12-07  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y: Support ZTS definition in zend_config.h

1999-12-06  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l
      zend_compile.c
      zend_compile.h
      zend_highlight.c
      zend_indent.c: Move the #include of zend-parser.h out of zend_compile.h

    * zend-parser.y
      zend_globals_macros.h: More localization

    * zend-parser.y
      zend_compile.h
      zend_globals_macros.h: Localize a couple of macros

1999-12-05  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l: *** empty log message ***

1999-12-05  sascha  <sascha@pb1.pair.com>

    * .cvsignore
      zend-parser.y
      zend.c
      zend_API.c
      zend_compile.c
      zend_execute_API.c: Fix some warnings

1999-12-04  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.c: *** empty log message ***

    * zend_API.c
      zend_API.h
      zend_hash.h: Added zend_set_hash_symbol() function.

1999-12-04  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h:
    backed out last change after andi decided on a different approach.

1999-12-04  Andi Gutmans  <andi@zend.com>

    * zend_API.h:
    - Call ZEND_SET_SYMBOL_WITH_LENGTH() with refcount 1 from the standard
      ZEND_SET_SYMBOL()

1999-12-04  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l
      zend_builtin_functions.c
      zend_compile.c: - Implement get_used_files() and get_imported_files()

    * zend-parser.y
      zend-scanner.l
      zend.c
      zend.h
      zend_compile.c
      zend_compile.h:
    - Break the zend->PHP dependency introduced by the .php extension for use(),
      by providing an API
    - Enable Stig's patch for use() extensions (it wasn't refered to by the parser)
    - Fix a memory leak in that code

1999-12-04  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h: the new SET_VAR_* macros forgot to set the refcount!

1999-12-04  Sam Ruby  <rubys@us.ibm.com>

    * zend-scanner.l: build error - windows

1999-12-04  stig  <stig@pb1.pair.com>

    * zend-scanner.l
      zend_compile.h: Fix typo, add prototype for use_filename().

    * zend-scanner.l: "use" should use arg+".php" as parameter to require

1999-12-04  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l: This should fix the fd leak with include()/require()

1999-12-03  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.h: *** empty log message ***

    * zend_API.h: Added ZEND_SET_GLOBAL_VAR_WITH_LENGTH_EX() macro.

1999-12-03  Thies C. Arntzen  <thies@thieso.net>

    * zend-scanner.l: revert my last patch - WARNING: we leak fd's again.
    add initialzation of opened_path highlight_file()

1999-12-03  Andi Gutmans  <andi@zend.com>

    * zend_API.h: - Remove _EX and make it the old _LENGTH

1999-12-02  Andi Gutmans  <andi@zend.com>

    * zend_API.h: - Add _EX macro for Andrei

1999-12-02  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.h
      zend_compile.h: Solve a couple of compile issues

1999-12-02  Thies C. Arntzen  <thies@thieso.net>

    * zend-scanner.l:
    php_fopen_wrapper_for_zend() does *NOT* insert the opened files into any list - the caller needs to fclose() the file. (not sure if this is desired)
    fixed "Uninitialized memory read" when including URLs

1999-12-01  stig  <stig@pb1.pair.com>

    * zend-scanner.h
      zend.c
      zend.h
      zend_alloc.h
      zend_builtin_functions.h
      zend_compile.h
      zend_constants.h
      zend_execute.c
      zend_execute.h
      zend_extensions.h
      zend_globals_macros.h
      zend_hash.h
      zend_indent.h: Fix warnings surfacing in maintainer-mode.

1999-12-01  Zeev Suraski  <zeev@zend.com>

    * zend_API.h:
    Make it possible to explicitly set refcount in ZEND_SET_SYMBOL_WITH_LENGTH(), part 2

    * libzendts.dsp
      zend_API.h:
    Allow to set the reference count explicitly for ZEND_SET_SYMBOL_WITH_LENGTH()

1999-12-01  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Forgot to check for BP_VAR_IS in the fix made for Thies' string offset
      problem.

1999-11-30  Andi Gutmans  <andi@zend.com>

    * zend_API.c: - Applied Thies' bug fix. Great work!

    * zend-parser.y
      zend-scanner.l
      zend.c
      zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h:
    - Add use support (behaves like require, but will not use the same file twice)
    - Add import support (behaves like include, but requires parentheses;  will not
      use the same file twice; Currently, it is not yet properly implemented, and
      only behaves like include)

    * zend_execute.c:
    - Fix problem Thies reported. We by mistake separated variables which were
      being fetched for read only.

1999-11-27  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: Add ability to disable the memory cache

1999-11-26  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l: - Fix fd leak in ZTS mode

    * zend-scanner.l
      zend_compile.c: UNIX/non ZTS compile fixes

    * zend-scanner.l
      zend_compile.c
      zend_compile.h: - Improve the file handle closing code

    * zend_llist.c
      zend_llist.h: - Modify zend_llist_del() to receive a comparison function

    * zend_API.c:
    This request_shutdown() is no longer needed (never was needed really)

    * zend-scanner.l: This should get the file to close properly

1999-11-26  sascha  <sascha@pb1.pair.com>

    * Makefile.am: Rebuild libzend.la, if the scanner was rebuilt

1999-11-26  Zeev Suraski  <zeev@zend.com>

    * zend_API.c
      zend_modules.h: Remove request_started, increase thread safety

1999-11-25  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: That's a more thorough fix...

    * zend_execute.c:
    Fix bug #2817 - assignments to string offsets could erronously modify unrelated strings

1999-11-22  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: Fix compile problem with enable-memory-limit

    * zend-scanner.l: Fix inconsistencies with here-docs implementation

    * zend-scanner.l
      zend_globals.h: Fix #2744

1999-11-21  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: That slipped away

1999-11-21  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_API.c
      zend_compile.c
      zend_execute.h
      zend_execute_API.c: - Optimize class instanciation
    - Fix constant instanciation for array elements inside objects

1999-11-19  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Moved var_uninit() for return_value to the beginning of DO_FCALL.
      We forgot to do it for overloaded methods

    * zend.h
      zend_execute.c:
    - Functions whose return values aren't used have them freed in DO_FCALL
      and don't need a special ZEND_FREE opcode following them anymore

1999-11-17  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.c:
    - If a function's return value is unused then don't create a ZEND_FREE
      opcode but free it after the function call in zend_execute.

    * zend_execute.c: - Forgot this

1999-11-16  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c: - Weird that this compiled for me.

    * zend.h: - CHange used_return_value -> return_value_used

    * zend_compile.c:
    - In any case create the free opcode. Need to allow the functions to
      create a hint.

    * zend.h
      zend_compile.c
      zend_execute.c:
    - Add support for used_return_value passed to internal functions.

1999-11-14  Andi Gutmans  <andi@zend.com>

    * zend_compile.h: - Fix comment as to Joey's findings

1999-11-13  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Fix crash with string offset assignments.

1999-11-04  Andrei Zmievski  <andrei@ispi.net>

    * zend_hash.c
      zend_hash.h: Made zend_hash_rehash() callable from outside.

1999-11-03  Andi Gutmans  <andi@zend.com>

    * zend_API.h
      zend_compile.c
      zend_compile.h
      zend_execute.c: - Add support for BYREF_FORCE_REST

1999-10-28  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.c: - Fix for Thies' leak and Andrei's crash

1999-10-25  Zeev Suraski  <zeev@zend.com>

    * zend_compile.h: *** empty log message ***

1999-10-23  Sam Ruby  <rubys@us.ibm.com>

    * libzend.dsp
      libzendts.dsp:
    Allow CYGWIN directory to be specified as via environment variable

1999-10-22  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Fix isset() with string offsets.

1999-10-19  Thies C. Arntzen  <thies@thieso.net>

    * zend_operators.c: fixed is_identicat_function()

1999-10-19  Andi Gutmans  <andi@zend.com>

    * zend_compile.h: - Move IS_IDENTICAL next to IS_EQUAL

    * zend_operators.c: - Fix is_identical function

    * zend-parser.y
      zend-scanner.l
      zend_compile.h
      zend_execute.c
      zend_opcode.c
      zend_operators.c
      zend_operators.h:
    - Preliminary submit of Thie's patch. Will fix the rest on Windows
      as this was added on UNIX with patch. Changed IS_SAME -> IS_IDENTICAL

1999-10-18  Andrei Zmievski  <andrei@ispi.net>

    * zend_API.h: Be safe, use ().

1999-10-15  Andrei Zmievski  <andrei@ispi.net>

    * zend_operators.c
      zend_operators.h: unstatic'fy is_numeric_string()

    * zend_hash.c
      zend_hash.h
      zend_compile.c: *** empty log message ***

1999-10-15  Andi Gutmans  <andi@zend.com>

    * zend_operators.h: - Add convert_to_number_ex()

1999-10-14  sascha  <sascha@pb1.pair.com>

    * configure.in:
    Add "--disable-inline" for low-memory machines (be it limited
    RAM or virtual memory). It's also useful for Digital C where
    the C++ compiler thinks "inline" is an invalid specifier.

    * Makefile.am: Use sources from $(srcdir)

1999-10-13  sascha  <sascha@pb1.pair.com>

    * Makefile.am: Do not use $< for anything but implicit rules.

1999-10-13  Thies C. Arntzen  <thies@thieso.net>

    * zend_list.c:
    (zend_fetch_resource) added warinig if resource is of wrong type

1999-10-13  sascha  <sascha@pb1.pair.com>

    * acconfig.h: Disable ZEND_EXTENSIONS_SUPPORT, if RTLD_NOW is not defined.

    Note that this part could be made platform independent by using
    libltdl (for Solaris, Linux, *BSD, HP-UX, Win16/32, BeOS).

1999-10-12  Thies C. Arntzen  <thies@thieso.net>

    * zend_list.c
      zend_list.h: new improved resource-API

1999-10-12  sascha  <sascha@pb1.pair.com>

    * acconfig.h:
    Use DL_LAZY for OpenBSD. This seems to be a compatibility flag which
    should be used for the 2nd parameter to dlopen.

    http://www.openbsd.org/cgi-bin/cvsweb/src/share/man/man3/dlfcn.3?rev=1.8

1999-10-12  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - object.ptr was made NULL in DO_FCALL but wasn't restored. Right now I
      push it in DO_FCALL and at the end of do_fcall_common it always gets
      popped. We might be able to optimize it out.

1999-10-11  Andrei Zmievski  <andrei@ispi.net>

    * .cvsignore: *** empty log message ***

    * zend_hash.c
      zend_hash.h: Modified zend_hash() to accept a pointer to sort function.

1999-10-11  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - No idea why this bug didn't exist before. But I'm too tired to think of it.
      During a regular do_fcall we need to set object.ptr to NULL and, thus,
      push it in the beginning and pop it in the end.
      I hope this fix more or less cuts it. I just want to sleep :)

1999-10-10  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Didn't lower refcount when doing an internal function call linked to a regular object.

1999-10-10  Thies C. Arntzen  <thies@thieso.net>

    * .cvsignore: added some more autoconf/libtool stuff to be ignored

1999-10-10  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Clean up a bit. Separate before the locking so that we can use SEPARATE_ZVAL
      macro.

1999-10-10  sascha  <sascha@pb1.pair.com>

    * build.mk: Add clean target which removes standard targets

    * build.mk: build.mk can be used to generate build tools. It is usually
    faster than buildconf, since it rebuilds only components, if
    it is necessary. To use it, run

        $ make -f build.mk

1999-10-09  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Shouldn't be needed

    * zend_execute.c:
    - God damn this sucked. I hopefully fixed the problems with classes although
      we might need to clean stuff up a bit.

1999-10-09  sascha  <sascha@pb1.pair.com>

    * acconfig.h:
    Define RTLD_NOW to DL_NOW, if RTLD_NOW is not defined (for OpenBSD).

1999-10-07  Thies C. Arntzen  <thies@thieso.net>

    * zend_variables.c
      zend_variables.h: added zval_del_ref() function

1999-10-07  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Reverse my patch

1999-10-06  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fixed memory leak with this pointer. It was somtimes initialized with refcount
      of 2 instead of 1.
    - Also fixed a place where object.ptr_ptr is set to pointing to a zval* instead
      of zval**. I don't think this is ever used so we might be able to remove it
      altogether.

1999-10-06  Thies C. Arntzen  <thies@thieso.net>

    * zend_execute.c: fix for using resources as array indices

1999-10-05  sascha  <sascha@pb1.pair.com>

    * configure.in
      zend.h
      zend_globals.h:     More portability stuff

    * configure.in:     OSF/1 V4.0 wants -lcxx

    * zend_compile.h:
        This causes link problems with anything higher than -O0.

1999-10-04  sascha  <sascha@pb1.pair.com>

    * Makefile.am:     Add necessary rule.

    * Makefile.am
      acconfig.h
      acinclude.m4
      buildconf
      configure.in
      zend_config.in:     Use libtool to build.

1999-10-04  Thies C. Arntzen  <thies@thieso.net>

    * zend_builtin_functions.c: use getParametersEx for all builtin functions

    * zend_API.c
      zend_API.h: added add_*_resource() and add_*_bool() functions

1999-10-03  Andi Gutmans  <andi@zend.com>

    * zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h: - Hooray. This might actually work. (I hope)

1999-10-03  sascha  <sascha@pb1.pair.com>

    * configure.in:     Make it executable.

1999-10-02  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Another locking fix.

    * zend_execute.c: - Fixed locking problem when fetching string offsets

1999-10-02  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
    Fix the leak reported on the PHP 3 list (isset() on string offsets)

1999-10-01  Andi Gutmans  <andi@zend.com>

    * zend.h
      zend_API.h
      zend_builtin_functions.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_opcode.c
      zend_operators.h:
    - Move is_ref back to being an unsigned char and not a bit field.

    * zend.h
      zend_API.h
      zend_builtin_functions.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c: - Remove locking support completely

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c:
    - For Andrei. Implement references in array() initializations

1999-09-29  Zeev Suraski  <zeev@zend.com>

    * zend_config.w32.h: *** empty log message ***

1999-09-29  Andi Gutmans  <andi@zend.com>

    * zend_operators.c: Fix leak in += with arrays

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c:
    - Fix SEND_VAR problem after fetch'ing a variable and not knowing the fetch type

1999-09-29  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.c
      zend_API.h: added add_property_resource

1999-09-28  Andi Gutmans  <andi@zend.com>

    * zend_compile.h
      zend_execute.c
      zend_execute_API.c:
    - Stop using the locking mechanism and start using refcount.
      Now we know when we need to free but we still need to support it

    * zend_execute.c
      zend_execute.h
      zend_execute_API.c:
    - First part of the patch which makes reads use ptr and not ptr_ptr.

1999-09-28  sascha  <sascha@pb1.pair.com>

    * acconfig.h
      configure.in
      zend-scanner.l:     Provide alternative istdiostream.

        This has been tested with Sun WorkShop 4.2 C++ which does not
        contain class istdiostream.

1999-09-26  sascha  <sascha@pb1.pair.com>

    * Makefile.am
      configure.in:     Actually allow to set CXXFLAGS

    * configure.in
      zend_config.in:
        Build communication channel and add checks for C++ library

1999-09-26  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_execute.h
      zend_execute_API.c: - Changed Ts{}.var to Ts{}.var.ptr_ptr.

1999-09-24  sascha  <sascha@pb1.pair.com>

    * zend_operators.h:     Add _ex API implementation for booleans.

1999-09-24  Zeev Suraski  <zeev@zend.com>

    * zend_list.c
      zend_list.h: Exify the standardized resource stuff

1999-09-23  Andi Gutmans  <andi@zend.com>

    * zend_operators.c: - Fix bug #2364.
      I haven't checked all of the conversion macros yet but there's a change
      there are more such bugs there.

1999-09-23  sascha  <sascha@pb1.pair.com>

    * configure.in:     Fix vpath build w/ thread-safe enabled on Unix.

1999-09-22  Thies C. Arntzen  <thies@thieso.net>

    * zend_builtin_functions.c:
    preliminary fix for each until andi & zeev clean up!

    * zend_list.c:
    if you pass NULL as the resource_type_name to zend_fetch_resource*&friends the functions will not print any warnings if the resource is not found!

1999-09-21  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
    - Fix problem where function parameter fetches were created too late.

1999-09-21  Zeev Suraski  <zeev@zend.com>

    * zend_builtin_functions.c: Add get_func_args()

    * zend_builtin_functions.c: *** empty log message ***

1999-09-20  Andi Gutmans  <andi@zend.com>

    * zend_builtin_functions.c:
    - Move some more Zend internal functions from PHP

    * zend-parser.y: - Next part of locking fix.
      $var = expr; and $var += expr; first create code for expr and later on
      for the fetch_w of $var.

    * zend_builtin_functions.c: - Newline for Sun's compiler

    * zend_API.h
      zend_builtin_functions.c: - Add some internal functions to Zend

    * zend_compile.c
      zend_compile.h
      zend_opcode.c:
    - First step in fixing locking problem. Array fetches are now always done last.
      Later on we will want to delay the write fetches even longer until after their
      resulting expression is parsed. The way it is now, will make it very easy
      to delay as long as we need.

    * zend_compile.c
      zend_compile.h:
    - Indirect references had all of the fetches by mistakenly backpatched.
      Actually all of the fetches are supposed to be read, except for the last
      one.

1999-09-20  Zeev Suraski  <zeev@zend.com>

    * libzend.dsp
      libzendts.dsp
      zend_builtin_functions.c: Added zend_num_args() and zend_get_arg()

    * Makefile.am
      zend.c
      zend_builtin_functions.c
      zend_builtin_functions.h:
    Add a file in which we can put Zend builtin functions

1999-09-18  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Try to fix the leak Rasmus reported. It's pretty sucky code so I'm really
      not sure this fix is OK.I can't remember all of what we did there.

1999-09-18  Zeev Suraski  <zeev@zend.com>

    * zend_list.c: Safer behavior

1999-09-17  Thies C. Arntzen  <thies@thieso.net>

    * zend_execute.c: make SUNs c89 happy

    * zend_execute_API.c: no // in the sources please

    * zend_globals_macros.h: added newline at end of file

1999-09-17  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: - Fix bug #2318

1999-09-16  Zeev Suraski  <zeev@zend.com>

    * zend_operators.h: Introduce convert_to_*_ex()

1999-09-16  sascha  <sascha@pb1.pair.com>

    * configure.in: this helps compiling on non-ANSI C compliant platforms

1999-09-13  stig  <stig@pb1.pair.com>

    * acconfig.h
      configure.in: Make sure HAVE_LIBDL gets defined.
    Disable more C++ tests when not configured for thread safety.

1999-09-12  Zeev Suraski  <zeev@zend.com>

    * zend.c: Make this class instanciatable

1999-09-12  sascha  <sascha@pb1.pair.com>

    * configure.in: check for c++ only, if thread safety is enabled

1999-09-10  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Shut up a warning

1999-09-09  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_globals.h
      zend_stack.c
      zend_stack.h: - Add foreach() freeing code.
    - Fix switch() freeing code to only free current function's switch expressions.
    - I have a feeling break expr; in a switch where expr > 1 leaks because it
      won't free all of the expressions. Fix is probably not trivial.

    * zend_operators.c:
    - Fix leak when decrementing strings which actually are longs.

1999-09-08  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Fix for floating point array offsets. Same behaviour as in PHP 3.0. We
      casted to (long).

    * Makefile.am
      libzendts.dsp: - Add -b option to flex++

1999-09-07  stig  <stig@pb1.pair.com>

    * acconfig.h: define tests first, use after.

1999-09-06  Andi Gutmans  <andi@zend.com>

    * zend_config.w32.h: - Fix win32 compile

    * zend_config.w32.h: - Make zend compile again in Win32.

1999-09-06  stig  <stig@pb1.pair.com>

    * .cvsignore: ignore zend-scanner.cc

    * ZendCore.dep
      libzend.dsp
      libzendts.dsp: hand-patched some MSVC files

    * Makefile.am
      acconfig.h
      acinclude.m4
      config.unix.h
      config.w32.h
      configure.in
      zend-scanner.l
      zend.h
      zend_API.c
      zend_alloc.c
      zend_compile.h
      zend_config.w32.h
      zend_execute.c
      zend_hash.c
      zend_list.c
      zend_ptr_stack.c
      zend_sprintf.c: * header file cleanup
    * fixed --enable-thread-safety build for UNIX

    I don't have a Win32 environment available, could someone please try
    compiling on Win32 to see if I got all the header file stuff right there?

1999-09-05  Andi Gutmans  <andi@zend.com>

    * zend_globals_macros.h: - Oops

    * libzendts.dsp
      zend.c
      zend.h
      zend_alloc.c
      zend_alloc.h
      zend_globals.h: - Shift around header files.

1999-09-04  Zeev Suraski  <zeev@zend.com>

    * zend_list.c: Fix a stupid bug (from stefan@roehri.ch)

1999-09-03  Zeev Suraski  <zeev@zend.com>

    * zend_list.h: Damn, forgot to commit that

    * zend_list.c
      zend_list.h
      zend_modules.h: Add new API for resources

1999-09-03  sascha  <sascha@pb1.pair.com>

    * zend_modules.h: Add global startup/shutdown functions

1999-09-03  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
    Revert the IS_RESOURCE patch.  It had some unintended behavior.

    * zend_variables.c: Let $GLOBALS actually work...

    * zend_operators.c:
    Release resources when converting to other types (fix Thies's reported problem)

1999-09-02  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
    Use \0NameFilenameLineno as key instead of numeric index for runtime defined functions

1999-08-28  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c
      zend.h
      zend_alloc.c
      zend_extensions.h
      zend_variables.c
      zend_variables.h: *** empty log message ***

    * zend.h
      zend_alloc.c
      zend_alloc.h
      zend_variables.c: Beef up debug macros

1999-08-27  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c: Fix a crash bug in case of aborted execution

    * zend.h
      zend_alloc.c
      zend_alloc.h
      zend_execute_API.c
      zend_variables.c
      zend_variables.h: Better debug macros

1999-08-26  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c: - Damn. It wasn't a correct fix. This should do it.
      When the zval ** are equal we don't want to assign_ref, in any other case
      I can think of we do want to assign_ref.

    * zend_execute_API.c: - Fix leak when global is used in the global scope.

    * zend_compile.c: - Fix when redefining classes at run-time.

1999-08-25  sascha  <sascha@pb1.pair.com>

    * zend.h: make it compile with gcc again

1999-08-25  Andi Gutmans  <andi@zend.com>

    * zend_hash.c
      zend_hash.h: - Add hash_apply_with_arguments()

    * zend-scanner.l: - More elegant fix for Win32 include_path

    * zend-scanner.l:
    - Temporary fix to allow Win32 MT safe version to use zend_fopen().

1999-08-23  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Fixed a specific memory leak linked to locking.

1999-08-22  sascha  <sascha@pb1.pair.com>

    * zend.h
      zend_globals.h: This changes makes it work on egcs 1.1.2/Alpha

    * configure.in
      zend.h: remove checks

1999-08-20  Zeev Suraski  <zeev@zend.com>

    * zend_constants.c
      zend_constants.h
      zend.c: Fix for Thies's UMR

1999-08-19  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_opcode.c:
    - Make sure expr_list and echo_list are either empty or comma seperated
      expressions

1999-08-18  Thies C. Arntzen  <thies@thieso.net>

    * zend-scanner.l: on unix ZTS gets defined in zend_config.h

1999-08-17  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c: Fix #2012

    * zend_execute.c: Fix #2070

1999-08-17  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend.h: - Add some ZENDAPI's

1999-08-15  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Oopsie

    * zend.h
      zend_compile.h
      zend_execute.c
      zend_globals.h: - Optimize the execute stack a bit.

1999-08-14  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Fix several class issues

    * zend_compile.c
      zend_compile.h:
    Generate better warnings for class/function redefinitions

1999-08-10  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_constants.c: - Got rid of the C++ comments.

1999-08-09  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Thies's crash fix.

1999-08-07  Zeev Suraski  <zeev@zend.com>

    * zend_compile.h
      zend_execute.c
      zend_execute_API.c: Fix a few leaks

1999-08-06  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c: Fix a bug in call_user_func_ex()

    * zend_API.h: Now that's an annoying bug.

    * zend_API.h
      zend_execute_API.c: Introduce call_user_func_ex()

    * zend_execute.c: *** empty log message ***

1999-08-03  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_opcode.c:
    - Initialize extended value's and put the fetch_type in it's own variable
      name.

1999-08-02  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h:
    Make set_compiled_filename() return a pointer to the allocated file name

1999-07-31  Zeev Suraski  <zeev@zend.com>

    * zend_API.h: These aren't necessary

1999-07-30  Zeev Suraski  <zeev@zend.com>

    * zend_API.h: Support symbols in any symbol table, not just the active one

1999-07-30  Andi Gutmans  <andi@zend.com>

    * zend_ptr_stack.c: - Damn that's more like it.

    * zend_ptr_stack.c: - Cut&paste crap

    * zend_execute.c
      zend_ptr_stack.c
      zend_ptr_stack.h:
    - Add ptr_stack_n_{push,pop} in order to speed up function calls a bit.
      There seems to be no reason for stack->top in the ptr_stack except for
      when realloc()'in the stack. I think I'll remove it.

1999-07-30  Zeev Suraski  <zeev@zend.com>

    * zend_API.h:
    * Setting variables in the global scope wasn't handling is_ref's properly

1999-07-29  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_compile.h:
    - Fixed a leak when doing inheritance. The parent class name wasn't being freed.
    - Fixed a stack leak. Functions that had late argument binding were set up as
      INIT_FCALL_BY_NAME but were using DO_FCALL and not the corresponding
      DO_FCALL_BY_NAME.

1999-07-28  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_hash.c: - Fixed various inheritance problems & Andrey's leak

1999-07-27  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Inherit parent's constructor

    * zend_compile.c:
    Fix runtime inheritence (child functions/members should have higher precedence)

1999-07-27  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Add missing lock

    * zend_execute.c: - Fix up the new operator a bit more.

1999-07-27  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Set reference count and is_ref values for new objects

1999-07-26  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
    - Fixed a memory leak when using assignment-op operators with lvalue of type
      string (or array/object)

    * zend_compile.c: *** empty log message ***

    * zend_compile.c
      zend_compile.h
      zend_execute.c:
    Fix a bug in inheritence from classes defined in include files, that are
    inherited from require()'d files

1999-07-26  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Oops I erased this by mistake

    * zend_execute.c:
    - Should be a complete fix now. This break away code should maybe be made
      somewhat generic

    * zend_execute.c: - Temporary fix for "this". Have to fix it tomorrow.

    * zend_execute.c:
    - Fix compile error. Weird that Visual didn't catch this one.

    * zend-parser.y
      zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c: - Fix the new operator incompatibility.
    - I commented PHP_FUNCTION(strtotime) in datetime.c because it stopped
      win32 from compiling. This needs to be fixed!!!
    - Check out libzend to compile the tree now.

    * zend.h
      zend_execute.c: - new operator fixes

1999-07-25  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c: - Commiting to branch newoperator.
    - To check it out do cvs checkout -rnewoperator libzend

1999-07-24  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Fix that memory leak... nested function issue remains

    * zend_compile.c
      zend_stack.c
      zend_stack.h: Fix RETURN & SWITCH memory leak issue

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c:
    Thoroughly fix the SWITCH problem.  No RETURN handling yet.

1999-07-23  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h: Fix bug #1812

    * zend.h
      zend_operators.c:
    * Add an API macro users can use to ensure an array member can be modifed
      before they modify it.
    * Fix a bug and remove redundant code in convert_to_long() (booleans and
      resources weren't changing their types

1999-07-22  Zeev Suraski  <zeev@zend.com>

    * zend_constants.c: New constants

1999-07-22  stig  <stig@pb1.pair.com>

    * buildconf: identify ourselves

1999-07-20  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Include alloca.h when need and available.

    * zend_compile.c
      zend_execute_API.c
      zend_list.c
      zend_operators.c: - Get rid of C++ comments

1999-07-19  Zeev Suraski  <zeev@zend.com>

    * config.unix.h
      config.w32.h
      zend-parser.y
      zend-scanner.h
      zend-scanner.l
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_constants.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_globals.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_modules.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_variables.c
      zend_variables.h: 0.91 update

1999-07-19  Andi Gutmans  <andi@zend.com>

    * zend.h
      zend_execute.c
      zend_extensions.h: * Fix Zend version
    * Fix a method call bug

    * LICENSE
      libzendts.dsp: License update

    * zend_errors.h: Make error codes PHP 3.0 compatible

1999-07-18  Andi Gutmans  <andi@zend.com>

    * zend_execute_API.c:
    - Should fix the memory leak when returning from the main scope.

1999-07-17  Zeev Suraski  <zeev@zend.com>

    * configure.in: Debug on by default

1999-07-16  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c:
    Ignore T_PHP_TRACK_VARS in the parser (handled in the scanner)

    * config.unix.h
      config.w32.h
      zend-parser.y
      zend-scanner.h
      zend-scanner.l
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_alloc.h
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_constants.h
      zend_errors.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_globals.h
      zend_hash.c
      zend_hash.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_list.c
      zend_list.h
      zend_llist.c
      zend_llist.h
      zend_modules.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_sprintf.c
      zend_stack.c
      zend_stack.h
      zend_variables.c
      zend_variables.h: License update

1999-07-15  Andi Gutmans  <andi@zend.com>

    * zend.c: Change true/false back to 1/""

    * zend_execute.c: Fix a lock issue

1999-07-15  sascha  <sascha@pb1.pair.com>

    * zend_execute_API.c: disable zend_handle_sigsegv

1999-07-14  Andi Gutmans  <andi@zend.com>

    * libzendts.dsp
      zend.c: Fix thread unsafe constants startup

    * LICENSE
      zend.c
      zend_constants.c
      zend_constants.h: - License update
    - Fix multithreaded constants startup

    * zend_operators.c: - Fix for boolean convert to number

1999-07-12  Andi Gutmans  <andi@zend.com>

    * zend_execute.c: - Fixed a purify warning

1999-07-10  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c: Oh, that dumb bug.

1999-07-10  Andi Gutmans  <andi@zend.com>

    * zend_execute.c
      zend_hash.c: Ok, so we do have to lock in there

    * zend.c
      zend_execute.c: Fix assignments of reference variables

1999-07-10  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c: Woops, fix.

    * zend_execute.c
      zend_execute_API.c
      zend_globals.h: Put the garbage in the garbage bin

    * zend_alloc.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_variables.c: Get rid of AiCount completely

    * zend_execute.c: Final tweaks

    * zend_execute.c
      zend_hash.c: More locking work

1999-07-09  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: *** empty log message ***

    * zend_execute.c: More stuff

    * zend-parser.y
      zend.h
      zend_API.c
      zend_API.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_opcode.c
      zend_operators.c
      zend_variables.c: Step 4:
    Move to a 7-bit counter (not fully implemented yet)

    * zend_API.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c
      zend_opcode.c
      zend_variables.c: Phase 3:
    Use a single bit to mark IS_REF variables

    * zend-parser.y
      zend.h
      zend_API.c
      zend_API.h
      zend_compile.c
      zend_execute.c
      zend_execute_API.c
      zend_opcode.c
      zend_operators.c: Step 2:
    Rename is_ref to EA

    * zend.c
      zend_API.c
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_constants.h
      zend_execute_API.c
      zend_hash.c
      zend_hash.h
      zend_list.c
      zend_list.h
      zend_modules.h
      zend_opcode.c
      zend_variables.c
      zend_variables.h: Step 1 in nuking the garbage collector:
    - Change the hash destructor to return int
    - Don't kill the bucket on hash_destroy if the destructor returns 0

    * config.w32.h
      configure.in
      zend_alloc.c: *** empty log message ***

    * zend_alloc.c: Send a SIGSEGV instead of exiting, to trigger a core dump

    * zend_alloc.c
      zend_alloc.h
      zend_hash.c: * Support recoverable failure from erealloc()
    * Fix the shutdown code on an unrecoverable erealloc() failure

    * zend_execute_API.c: Fix the mess in SIGSEGV handling, hopefully

1999-07-08  Zeev Suraski  <zeev@zend.com>

    * zend_compile.h
      zend_compile.c:
    Support definition of classes that are derived from classes that are defined in runtime

1999-07-06  sascha  <sascha@pb1.pair.com>

    * zend.h: enable it, until we find a better way

1999-07-05  sascha  <sascha@pb1.pair.com>

    * zend.h: make Solaris gcc happy

    * configure.in
      zend.h: use void * instead of long for 64-bit test

1999-07-05  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h: added RETVAL_RESOURCE and RETURN_RESOURCE

1999-07-04  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
    Make convert_to_string() regard false as "" instead of "0"

1999-07-03  sascha  <sascha@pb1.pair.com>

    * Makefile.am: don't wipe files for distributions

    * configure.in
      zend.h:
    checking for ints won't work, since they are 32 bit on both platforms

1999-07-03  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Support isset()/empty() for string offsets

    * zend-scanner.l: Fix a crash

1999-07-03  sascha  <sascha@pb1.pair.com>

    * configure.in: add usual rhapsody hack

    * config.unix.h: missing DL_HANDLE broke build

    * zend_extensions.c: typo

1999-07-02  sascha  <sascha@pb1.pair.com>

    * acconfig.h
      configure.in
      zend.h: workaround for 64-bit platforms

1999-07-02  Zeev Suraski  <zeev@zend.com>

    * acconfig.h
      configure.in
      zend_globals.h: define zend_bool

1999-06-30  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y: Make require accept any parameter

1999-06-26  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.h
      zend_operators.c
      zend_alloc.c:
    * Make the memory leak reporting code much better with repeats
    * Remove useless variables

1999-06-22  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Fix Thies's bug report

    * zend_alloc.c
      zend_compile.c
      zend_operators.c:
    * Fix concatenation of arrays (it was PHP 3.0 style, copying zval's instead
      of zval *, and it wasn't using reference counting)
    * Fix a memory leak in static array()'s with textual indices

1999-06-19  Zeev Suraski  <zeev@zend.com>

    * zend.c: *** empty log message ***

    * zend.h
      zend_extensions.h:
    Add a standard get_ini_entry() to interface between Zend and the outside world

    * configure.in: *** empty log message ***

1999-06-16  stig  <stig@pb1.pair.com>

    * zend_modules.h:
    added INIT_FUNC_ARGS_PASSTHRU and SHUTDOWN_FUNC_ARGS_PASSTHRU

1999-06-15  stig  <stig@pb1.pair.com>

    * zend_operators.c
      zend_operators.h: * added zend_binary_strcasecmp()

1999-06-12  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y:
    We can't quite go with expr there (shift/reduce conflict), go with scalar.

    * zend-parser.y: require() improvement as per Andi's suggestion

1999-06-11  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
    Make the concatenation operator use make_printable as well

    * zend-scanner.l: Don't take failing on an include file so badly

    * zend-scanner.l: Support <?=

    * zend_compile.c: E_ERROR -> E_COMPILE_ERROR in the compiler

    * zend_compile.c: Two fixes:
    * The error generated by a failed class inheritence wasn't  properly
      displaying the file in which he error occured.
    * Inheritence didn't work if the parent class had uppercase letters in it.

    * zend-parser.y
      zend-scanner.l
      zend_execute.c: * Use to_string() instead of __print()
    * Support boolean casts ((bool) and (boolean))

    * zend.c: Change __print into to_string()

    * zend.c
      zend.h
      zend_execute.c
      zend_execute_API.c:
    * Make the output handling of variables much, much cooler.
      Uses zend_make_printable_zval() instead of convert_to_string() now:

    $foo = true;
    print "\$foo is $foo";
    will now print
    $foo is true
    (instead of "$foo is 1", earlier).

    Also, with objects, it automatically tries to call __print() and use it as a printing
    function.

    For example:

    class foo {
      function __print() { return "Foo Object"; }
    };

    $foo = new foo;
    print $foo;

    will print "Foo Object".

1999-06-10  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: Now THAT's an annoying bug.

1999-06-09  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c: Fix

    * zend_API.c
      zend_execute.c:
    * Fix cases where you assign an array element to the parent array (the array was
    being erased before the assignment, so the element was being smashed).

    * zend_execute.c
      zend_execute_API.c: * Fix foreach() that receives a non array argument
    * Clean up some C++ comments

1999-06-09  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_operators.c: - Fix the static array() initializing

1999-06-08  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c: Replace error messages

1999-06-08  Andi Gutmans  <andi@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c: * Fix a by-name call/method call bug
    * Clean and optimize the whole function call process

1999-06-07  Zeev Suraski  <zeev@zend.com>

    * zend_hash.c
      zend_hash.h: Add zend_hash_get_current_key_type()

1999-06-06  Andi Gutmans  <andi@zend.com>

    * zend_compile.c:
    Work around a compiler bug - mark variables that are sent to functions that aren't yet
    defined as FETCH_W (because they might end up being sent by reference)

1999-06-05  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_compile.c
      zend_compile.h: * Centralized shutdown
    * Change shutdown order again

    * zend_compile.c:
    Call the request_shutdown on modules before destroying symbol tables, so that
    the session module can be implemented

    * zend-scanner.l
      zend_compile.c
      zend_execute.c:
    - Fixed Karl's bug report.  It's not really a thorough fix, we really need to rethink the INIT_FCALL/DO_FCALL issue.
    - Fixed numerous AiCount problems

1999-06-04  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_opcode.c: New $GLOBALS init

    * zend_execute_API.c:
    Fix that GLOBALS leak.  We were explicitly adding GLOBALS to the main symbol table,
    but there's no reason to do it (INIT_GLOBALS takes care of it if necessary.)

    * zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_list.c
      zend_list.h
      zend_opcode.c
      zend_operators.c: Minor updates (mostly __declspec() stuff)

1999-06-04  Thies C. Arntzen  <thies@thieso.net>

    * zend_API.h: added is_ref=0 and refcount=1 to SET_VAR_* macros

1999-06-03  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y: T_BAD_CHARACTER is actually a string.

1999-06-03  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l
      zend_execute.c:
    - We weren't counting newlines in heredocs. The only place which is still questionable
    is when there's a \ followed by a newline but it seems we have a parse error in this
    case anyways.
    - Fixed the alloca() macros so that the alloca() #define in win32 mode won't clash
    with the real win32 alloca().

1999-06-01  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - Make execute() use less stack in thread-safe win32 due to Microsoft's shitty 256kb stack.

1999-05-31  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_alloc.c: *** empty log message ***

1999-05-31  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l
      zend_compile.c
      zend_execute.c
      zend_execute_API.c: Fixes

1999-05-30  sascha  <sascha@pb1.pair.com>

    * zend_alloc.c
      zend_compile.h
      zend_execute_API.c
      zend_indent.c
      zend_opcode.c: * fix some casts
    * introduce unary_op_type - cleaner than casting data voids to function ptrs

1999-05-29  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c:
    That got fucked up when we went back to using uninitialized_zval

1999-05-29  sascha  <sascha@pb1.pair.com>

    * Makefile.am: another VPATH related change

1999-05-29  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y: Fix a bug

    * zend_hash.c
      zend_hash.h
      zend_operators.c: Support overwrite mode in zend_hash_merge()

1999-05-29  sascha  <sascha@pb1.pair.com>

    * Makefile.am: - clean is not called from automake. use CLEANFILES instead
    - allow VPATH compilation

1999-05-29  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Correct fix

    * zend_execute_API.c: *** empty log message ***

    * zend_execute.c: Fix a leak

1999-05-28  Zeev Suraski  <zeev@zend.com>

    * zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute_API.c: * Support getThis() for internal functions.
    * Fix 'new object or die' and AiCount issue thoroughly (earlier fix didn't
      work with the optimizer).
    * Add new macros for standardized definition of classes.
    * Only report AiCount problems if shutdown was not silent.

1999-05-27  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Fix the AiCount issue with objects

    * zend_API.h: Moved all #define's for SET_ and RETURN_ to zend_API.h

1999-05-25  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c:
    Avoid crashing if an error occurs before we open the first file.

1999-05-24  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: The last fix was wrong

    * zend_operators.c: Another operators fix

1999-05-23  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c:
    boolean comparison didn't work with smaller-than and greater-than, something that
    fucked up berber's site a bit.  fixed.

1999-05-22  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c:
    Sigh, another leak bites the dust.  FREE_OP missing in case of a SEND_VAR.

    * zend-parser.y: I'm on a roll.  Fix a nasty yet stupid AiCount bug

    * zend_alloc.c: Warn about AiCount not zeroing out

    * zend-parser.y
      zend-scanner.h
      zend.h
      zend_alloc.c
      zend_alloc.h
      zend_compile.c
      zend_compile.h
      zend_constants.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_extensions.h
      zend_highlight.h
      zend_list.h
      zend_llist.h
      zend_ptr_stack.h
      zend_stack.h:
    * Add struct name to all typedef's so that they can be debugged with MSVC
    * Fix an AiCount bug - list(...) = $var was using $var multiple times, and thus
    causing AiCount to be decreased multiple times even though it was increased only
    once for $var.  Mark all FETCH_DIM's so that they won't decrease AiCount, and only
    decrease AiCount on the last FETCH_DIM.
    * Fix a stupid bug - forgot to pass CLS_C to some compiler function.  For some reason
    MSVC doesn't report these :I

    * zend.h
      zend_alloc.c
      zend_execute_API.c:
    Give more information and save log lines in memory leak reports

    * zend-scanner.l
      zend_compile.c
      zend_compile.h
      zend_globals.h
      zend_llist.c
      zend_llist.h: Avoid leaking fd's in case of failures

    * zend-scanner.l: more fixes

1999-05-21  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l: That wasn't supposed to slip in

    * zend-scanner.l: * Properly handle failed file opens in C++
    * Properly handle failed require()'s within libzend

    * zend-scanner.l: * Fix the comments issue.  yymore() worked like a charm.
    * Change all flex states to be prefixed with ST_

1999-05-20  Zeev Suraski  <zeev@zend.com>

    * zend_compile.h
      zend_execute.c: Optimize allocations into uninitialized_zval assignments

1999-05-20  Andi Gutmans  <andi@zend.com>

    * config.w32.h
      libzend.dsp
      libzendts.dsp
      zend_compile.c
      zend_compile.h: - Updates we did today

    * zend_compile.c: - Fix a small problem with class decelerations.

    * zend-scanner.l: -Open curly braces fix?

1999-05-15  Zeev Suraski  <zeev@zend.com>

    * zend.c
      zend.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_hash.c
      zend-parser.y:
    * Fix all hash checks that checked Bucket.arKey for NULL, when it was changed
      to char[1], these checks should have been changed to Bucket.nKeyLength==0
    * Support runtime declaration of functions.  I ended up changing the grammar
      to catch top level functions vs. nested functions.  The reason is simple -
      if we don't have functions properly declared at compile-time, function calls
      cannot be resolved at compile time, and have to be resolved at runtime, which
      ends up being much much slower (without the optimizer, that is).
      It's no biggy though, the grammar change isn't that bad.

1999-05-14  Zeev Suraski  <zeev@zend.com>

    * configure.in
      zend-scanner.l:
    If a require() dies, we must bail out (since it corrupts an existing op_array

    * zend-scanner.l: Fix a bug

1999-05-14  stig  <stig@pb1.pair.com>

    * Makefile.am: don't install Zend on the system

1999-05-14  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l:
    Add \012 and \xff missing support to constant quoted string

1999-05-12  Zeev Suraski  <zeev@zend.com>

    * zend.h: *** empty log message ***

1999-05-12  stig  <stig@pb1.pair.com>

    * Makefile.am: install libzend.a and header files on "make install"

    * acconfig.h
      configure.in: add --enable-thread-safety option

1999-05-12  Zeev Suraski  <zeev@zend.com>

    * zend_llist.c
      zend_llist.h: Added prepend to llist

1999-05-11  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l
      zend.c: Fixes:
    * Avoid closing stdin (I could have sworn I've committed that already)
    * unclean_shutdown patches

    * zend_alloc.c: Easier Win32 debug code

    * zend-scanner.l
      zend_compile.c
      zend_globals.h
      zend_highlight.c:
    * Fix a bug that occured in case of parse errors.  We need to restore the lexical state
    even if the compilation failed.

1999-05-10  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.h
      zend-scanner.l
      zend.c
      zend_alloc.c
      zend_compile.h:
    Weed out all BoundsChecker-found bugs (including a serious file descriptor leak
    in the C++ scanner)

1999-05-09  Zeev Suraski  <zeev@zend.com>

    * zend_modules.h: Change argument name

    * zend.c
      zend_API.c
      zend_API.h
      zend_modules.h: Almost forgot to commit those

1999-05-06  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l: Ok, I tested it now.  It works very nicely!

1999-05-05  Andi Gutmans  <andi@zend.com>

    * zend_llist.c
      zend_llist.h: llist improvements

1999-05-02  Andi Gutmans  <andi@zend.com>

    * zend.c
      zend_compile.h: - Don't support interactive mode when thread safe.

1999-05-01  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: Several operator fixes.  Should fix the MySQL problem.

1999-04-30  Andi Gutmans  <andi@zend.com>

    * zend_opcode.c: - Free refcount when destroying the last class reference.

    * zend-parser.y: - Missed one place

    * zend-parser.y: - First try at fixing $a->foo[] syntax.

    * zend-scanner.l:
    - Move back to yyless(). I haven't tested it yet because it's taking too long
      to compile and I have to disconnect

1999-04-30  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend-scanner.l:
    Fix Boris's problem (in my never ending struggle to show I never mean what I say
    when I say something's not gonna happen :)

    * zend-scanner.l
      zend_compile.c:
    * Fix a problem with constant quoted strings, that was causing Thies's problem
    * Remove a development-time printf

1999-04-29  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l: - No reason to handle newlines here.

1999-04-28  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l: Make the C++ scanner support interactive input

1999-04-27  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l
      zend_compile.h
      zend_execute_API.c
      zend_extensions.c
      zend_extensions.h
      zend_opcode.c: * Fix debugger+interactive mode bug
    * Recognize whether an extension is with debug information or not

1999-04-26  Zeev Suraski  <zeev@zend.com>

    * libzendts.dsp: fix

    * config.w32.h
      libzend.dsp
      libzendts.dsp
      zend-scanner.l
      zend.c
      zend_alloc.c
      zend_compile.h
      zend_globals.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_opcode.c
      zend_sprintf.c: Various thread safety fixes and DLL updates

1999-04-26  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l
      zend.c
      zend_alloc.c
      zend_globals.h: -More commits

1999-04-24  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c: Another small fix

    * libzendts.dsp: dsp update

    * zend.c
      zend_globals.h: Thread safety fixes

    * zend_list.c: Remove redundant includes

1999-04-24  zeevread  <zeevread@pb1.pair.com>

    * zend-scanner.l: g++ compile fix

1999-04-24  Zeev Suraski  <zeev@zend.com>

    * Makefile.am
      zend-scanner.l: *** empty log message ***

    * zend_API.c
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_opcode.c
      zend-parser.y
      zend-scanner.l: Cleanups, remove old ts code

1999-04-23  Zeev Suraski  <zeev@zend.com>

    * zend_operators.c: Arithmetics bug fix

    * zend-scanner.h
      zend-scanner.l: Support eval() and highlight_string() in the C++ scanner

1999-04-23  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l:
    - Use yyless() instead of unput() where possible. I'll erase the commented
      out code in a day or so.

1999-04-23  Zeev Suraski  <zeev@zend.com>

    * FlexLexer.h
      flex.skl
      zend-scanner.h
      zend-scanner.l
      zend.h
      zend_alloc.c
      zend_alloc.h
      zend_compile.h
      zend_globals.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_operators.h
      zend_variables.h: Ok, call me crazy, because I probably am.
    Thread safe version now uses a C++ scanner object.  Works fully.

1999-04-22  Zeev Suraski  <zeev@zend.com>

    * acconfig.h
      zend-parser.y
      zend-scanner.l
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_globals.h
      zend_highlight.c
      zend_indent.c
      zend_opcode.c: Make token names uniform, they all begin with T_ now.

1999-04-21  stig  <stig@pb1.pair.com>

    * buildconf: state which aclocal.m4 and configure files are created

    * Makefile.am:
    zend-parser.o and zend-scanner.o were included twice in libzend.a

1999-04-21  Zeev Suraski  <zeev@zend.com>

    * FlexLexer.h
      flex.skl
      libzendts.dsp
      zend_API.c
      zend_API.h
      zend_globals.h:
    * Change the thread safe project to create a C++ scanner.
    * Add in a slightly modified skeleton file (only a couple of #if's for #include's
    that we dont have in Windows)

    It does NOT compile or work yet :)

    * zend_list.h: Fix

    * zend.c
      zend_compile.c
      zend_constants.c
      zend_constants.h
      zend_list.c
      zend_list.h:
    Thread safety patch.  It works now with 'just in time' resource initialization!

    * libzend.dsp
      libzendts.dsp
      zend_globals.h: Thread-safe project

1999-04-21  stig  <stig@pb1.pair.com>

    * buildconf: move automake back to before autoconf

    * buildconf:
    autoheader must be called after autoconf, automake after autoheader

    * zend_config.h.in: think before one commits

    * zend_config.h.in: doh.  cvs appears to ignore .in files by default

1999-04-21  Zeev Suraski  <zeev@zend.com>

    * zend-parser.y
      zend-scanner.l
      zend.c
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_compile.c
      zend_compile.h
      zend_constants.c
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h
      zend_opcode.c:
    Thread safety patch.  We're still not quite there but it compiles again, and
    more logic has been implemented.

1999-04-20  stig  <stig@pb1.pair.com>

    * .cvsignore
      Makefile.am
      Makefile.in
      aclocal.m4
      buildconf: Makefile.in and aclocal.m4 are generated
    added buildconf script

1999-04-19  Zeev Suraski  <zeev@zend.com>

    * zend_extensions.c
      zend_extensions.h:
    Return a success value from the startup function, so we can unload immediately
    if it fails.

1999-04-19  stig  <stig@pb1.pair.com>

    * .cvsignore
      Makefile.am
      Makefile.in
      acconfig.h
      acinclude.m4
      aclocal.m4
      config.h.in
      configure.in
      zend.h: convert to automake

1999-04-19  Andi Gutmans  <andi@zend.com>

    * zend_API.c
      zend_API.h: Add a couple of ZEND_API's

    * config.w32.h
      zend-parser.y
      zend_compile.c
      zend_execute.c: Support =unset as arguments

1999-04-19  stig  <stig@pb1.pair.com>

    * acconfig.h
      config.h.in
      configure.in: removed -lnsl and -lsocket checks from zend

1999-04-18  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: AiCount needs to be decreased here

    * configure.in
      zend-scanner.l
      zend.c
      zend.h
      zend_API.c
      zend_API.h
      zend_alloc.c
      zend_compile.c
      zend_extensions.c
      zend_extensions.h
      zend_globals.h
      zend_llist.c
      zend_modules.h
      zend_opcode.c: Whatnot:
    * updated alloc_persist to use critical sections
    * changed extension shutdown to two-phase
    * updated dependencies
    * PR support (don't remember if there was any really)

1999-04-15  Andi Gutmans  <andi@zend.com>

    * zend_execute.c:
    - one more place which seems to have needed fixing. I don't have time to look
      more into it. I hope we don't have anymore places which need fixing.

    * zend_compile.c:
    - Should fix the pass by reference problem. This happened because we moved
     start from arg 1 now and not arg 0. There might be more places which need fixing
     like in the executor but the bug seems OK now.

1999-04-14  Zeev Suraski  <zeev@zend.com>

    * zend_compile.h: Compile fix

1999-04-14  Andi Gutmans  <andi@zend.com>

    * config.w32.h
      libzend.dsp
      zend-scanner.l
      zend_API.c
      zend_API.h
      zend_compile.c
      zend_compile.h
      zend_opcode.c: -Tiny patches

1999-04-13  Zeev Suraski  <zeev@zend.com>

    * zend_execute.c: Better detection

    * zend_execute.c:
    Move Ai stuff before get_zval_*(), like Andi suggested.  Fixes Sascha's huge
    memory leak

1999-04-13  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.c
      zend_execute.c
      zend_execute_API.c: - Fix various memory leaks.

    * zend_execute.c: Refcount bugfix

    * libzend.dsp
      zend_API.c
      zend_execute_API.c
      zend_ptr_stack.c: * Optimize argument_stack top lookup
    * Fix a nasty bug in zend_ptr_stack_clean()

1999-04-12  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c
      zend_globals.h: Remove unnecessary stack

    * zend_API.c: off by one

    * zend_execute.c: Minor optimization

    * zend_API.c: Make functions that don't take arguments somewhat happier:)

    * zend_execute.c:
    This should take care of "this" for user-defined functions.  It wasn't yet working
    for built-in functions anyway, this one is coming soon.

    * zend_compile.c
      zend_execute_API.c:
    Destroy the resource list after destroying the symbol table, otherwise the
    auto-destructor for resources are run when the resource list is no longer valid

    * zend-parser.y
      zend.h
      zend_API.c
      zend_API.h
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_execute.h
      zend_execute_API.c
      zend_globals.h
      zend_ptr_stack.c:
    This patch is a go.  Not fully optimized yet, but working properly.
    Prepatch tagged as BEFORE_STACK_PATCH.

    * zend_compile.c
      zend_execute.c: Minor fixes:
    	missing zval_copy_ctor()
    	messed up AiCount fix

1999-04-10  Zeev Suraski  <zeev@zend.com>

    * zend_alloc.c
      zend_alloc.h: Allow runtime setting of the memory limit

    * zend_alloc.c
      zend_alloc.h
      zend_globals.h: Get rid of php3_ini in Zend

    * zend.c
      zend.h:
    We need to initialize the utility values after we initialize the INI file, which in
    turn, is after we initialize Zend.  Set the utility values separately from Zend's
    initialization

1999-04-09  Andi Gutmans  <andi@zend.com>

    * zend-scanner.l: - Changed here-docs to <<< followed by whitespace.

1999-04-09  stig  <stig@pb1.pair.com>

    * .cvsignore: ignore file

1999-04-09  Andi Gutmans  <andi@zend.com>

    * zend-parser.y
      zend_compile.h:
    - I guess print $GLOBALS and print "$GLOBALS" should yield the same result
      so I returned the one in encaps_var.
    - Made INITAL_OP_ARRAY_SIZE smaller (64? can't remeber). I don't think the
      erealloc()'s during compile time are such a biggy, we might make it even
      smaller. We can have a configure time option as to it's size.

    * zend-parser.y:
    - Support $GLOBALS in cvar's. Now list(..) = each($GLOBALS) will work.
    - Remove support of $GLOBALS in enacapsed strings. print "$GLOBALS" isn't
      supposed to work in any case.

1999-04-09  Zeev Suraski  <zeev@zend.com>

    * zend-scanner.l:
    Honor a semicolon on the same line as an ending token of a heredoc

    * zend_compile.c: Prevent class redeclarations

1999-04-08  Zeev Suraski  <zeev@zend.com>

    * zend_API.c
      zend_modules.h: * Add arguments to shutdown functions
    * Remove traces of php_ini stuff

    * zend-parser.y: "Our favourite mistake"

    * zend-parser.y
      zend_compile.c
      zend_compile.h
      zend_execute.c
      zend_opcode.c: $GLOBALS support

1999-04-08  Andi Gutmans  <andi@zend.com>

    * ZEND_CHANGES: foreach() syntax has changed

1999-04-08  Zeev Suraski  <zeev@zend.com>

    * zend_compile.c
      zend_execute.c: Fix static assignment

1999-04-07  Zeev Suraski  <zeev@zend.com>

    * zend_execute_API.c: Remove an unused variable

    * libzend.dsp: That's better.

    * libzend.dsp: We didn't save the .dsp back then...

    * ZendCore.dsp
      ZendCore.dsw
      ZendCore.mak
      diffs
      libzend.dsp: Cleanups:  ZendCore->libzend

1999-04-07  Rasmus Lerdorf  <rasmus@php.net>

    * zend.c: *** empty log message ***

1999-04-07  Andi Gutmans  <andi@zend.com>

    * LICENSE
      Makefile.in
      ZEND_CHANGES
      configure.in
      zend-parser.y
      zend-scanner.h
      zend-scanner.l
      zend.h
      zend_API.c
      zend_API.h
      zend_compile.h
      zend_errors.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_hash.c
      zend_hash.h
      zend_list.c
      zend_list.h
      zend_llist.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_stack.c
      zend_stack.h
      zend_variables.c
      zend_variables.h: New file.

    * LICENSE
      Makefile.in
      ZEND_CHANGES
      configure.in
      zend-parser.y
      zend-scanner.h
      zend-scanner.l
      zend.h
      zend_API.c
      zend_API.h
      zend_compile.h
      zend_errors.h
      zend_execute.c
      zend_execute_API.c
      zend_globals.h
      zend_hash.c
      zend_hash.h
      zend_list.c
      zend_list.h
      zend_llist.h
      zend_opcode.c
      zend_operators.c
      zend_operators.h
      zend_ptr_stack.c
      zend_ptr_stack.h
      zend_stack.c
      zend_stack.h
      zend_variables.c
      zend_variables.h: Zend Library

    * ZendCore.dep
      ZendCore.dsp
      ZendCore.dsw
      ZendCore.mak
      acconfig.h
      aclocal.m4
      config.h.in
      config.unix.h
      config.w32.h
      diffs
      zend.c
      zend.ico
      zend_alloc.c
      zend_alloc.h
      zend_compile.c
      zend_constants.c
      zend_constants.h
      zend_execute.h
      zend_extensions.c
      zend_extensions.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_llist.c
      zend_modules.h
      zend_sprintf.c: New file.

    * ZendCore.dep
      ZendCore.dsp
      ZendCore.dsw
      ZendCore.mak
      acconfig.h
      aclocal.m4
      config.h.in
      config.unix.h
      config.w32.h
      diffs
      zend.c
      zend.ico
      zend_alloc.c
      zend_alloc.h
      zend_compile.c
      zend_constants.c
      zend_constants.h
      zend_execute.h
      zend_extensions.c
      zend_extensions.h
      zend_highlight.c
      zend_highlight.h
      zend_indent.c
      zend_indent.h
      zend_llist.c
      zend_modules.h
      zend_sprintf.c: Zend Library


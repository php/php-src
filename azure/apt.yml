parameters:
  packages: ''

steps:
  - script: |
      sudo apt-get update -y | true
      sudo apt install bison \
                       re2c \
                       locales \
                       ldap-utils \
                       openssl \
                       slapd \
                       language-pack-de \
                       re2c \
                       libgmp-dev \
                       libicu-dev \
                       libtidy-dev \
                       libenchant-dev \
                       libaspell-dev \
                       libpspell-dev \
                       libsasl2-dev \
                       libxpm-dev \
                       libzip-dev \
                       libsqlite3-dev \
                       libwebp-dev \
                       libonig-dev \
                       libkrb5-dev \
                       libgssapi-krb5-2 \
                       libcurl4-openssl-dev \
                       libxml2-dev \
                       libxslt1-dev \
                       libpq-dev \
                       libreadline-dev \
                       libldap2-dev \
                       libsodium-dev \
                       libargon2-0-dev \
                       libmm-dev \
                       libsnmp-dev \
                       postgresql \
                       postgresql-contrib \
                       snmpd \
                       snmp-mibs-downloader \
                       freetds-dev \
                       unixodbc-dev \
                       llvm \
                       libc-client-dev \
                       libkrb5-dev \
                       dovecot-core \
                       dovecot-pop3d \
                       dovecot-imapd \
                       sendmail \
                       firebird-dev \
                       ${{ parameters.packages }}
    displayName: 'APT'
  - script: |
      mkdir /opt/oracle
      wget https://download.oracle.com/otn_software/linux/instantclient/instantclient-basiclite-linuxx64.zip
      unzip instantclient-basiclite-linuxx64.zip
      wget https://download.oracle.com/otn_software/linux/instantclient/instantclient-sdk-linuxx64.zip
      unzip instantclient-sdk-linuxx64.zip
      mv instantclient_*_* /opt/oracle/instantclient
      # Interferes with libldap2 headers.
      rm /opt/oracle/instantclient/sdk/include/ldap.h
    displayName: 'Install Oracle Instant Client'
